!function(r){var t={};function n(e){if(t[e])return t[e].exports;var a=t[e]={i:e,l:!1,exports:{}};return r[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=r,n.c=t,n.d=function(r,t,e){n.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:e})},n.r=function(r){Object.defineProperty(r,"__esModule",{value:!0})},n.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(t,"a",t),t},n.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},n.p="",n(n.s=121)}([function(r,t,n){"use strict";var e=n(7);function a(r,t){for(;;){var n=t,i=r,u=i.length||1,o=u-n.length|0;if(o){if(o<0){t=e.caml_array_sub(n,u,0|-o),r=i.apply(null,e.caml_array_sub(n,0,u));continue}return function(r,t){return function(n){return a(r,t.concat([n]))}}(i,n)}return i.apply(null,n)}}function i(r,t,n){if(n>7||n<0)return a(r,[t]);switch(n){case 0:case 1:return r(t);case 2:return function(n){return r(t,n)};case 3:return function(n,e){return r(t,n,e)};case 4:return function(n,e,a){return r(t,n,e,a)};case 5:return function(n,e,a,i){return r(t,n,e,a,i)};case 6:return function(n,e,a,i,u){return r(t,n,e,a,i,u)};case 7:return function(n,e,a,i,u,o){return r(t,n,e,a,i,u,o)}}}function u(r,t){var n=r.length;return 1===n?r(t):i(r,t,n)}function o(r,t,n,e){if(e>7||e<0)return a(r,[t,n]);switch(e){case 0:case 1:return a(r(t),[n]);case 2:return r(t,n);case 3:return function(e){return r(t,n,e)};case 4:return function(e,a){return r(t,n,e,a)};case 5:return function(e,a,i){return r(t,n,e,a,i)};case 6:return function(e,a,i,u){return r(t,n,e,a,i,u)};case 7:return function(e,a,i,u,o){return r(t,n,e,a,i,u,o)}}}function c(r,t,n){var e=r.length;return 2===e?r(t,n):o(r,t,n,e)}function f(r,t,n,e,i){var u=0;if(i>7||i<0)return a(r,[t,n,e]);switch(i){case 0:case 1:u=1;break;case 2:return a(r(t,n),[e]);case 3:return r(t,n,e);case 4:return function(a){return r(t,n,e,a)};case 5:return function(a,i){return r(t,n,e,a,i)};case 6:return function(a,i,u){return r(t,n,e,a,i,u)};case 7:return function(a,i,u,o){return r(t,n,e,a,i,u,o)}}return 1===u?a(r(t),[n,e]):void 0}function s(r,t,n,e){var a=r.length;return 3===a?r(t,n,e):f(r,t,n,e,a)}function _(r,t,n,e,i,u){var o=0;if(u>7||u<0)return a(r,[t,n,e,i]);switch(u){case 0:case 1:o=1;break;case 2:return a(r(t,n),[e,i]);case 3:return a(r(t,n,e),[i]);case 4:return r(t,n,e,i);case 5:return function(a){return r(t,n,e,i,a)};case 6:return function(a,u){return r(t,n,e,i,a,u)};case 7:return function(a,u,o){return r(t,n,e,i,a,u,o)}}return 1===o?a(r(t),[n,e,i]):void 0}function l(r,t,n,e,a){var i=r.length;return 4===i?r(t,n,e,a):_(r,t,n,e,a,i)}function m(r,t,n,e,i,u,o){var c=0;if(o>7||o<0)return a(r,[t,n,e,i,u]);switch(o){case 0:case 1:c=1;break;case 2:return a(r(t,n),[e,i,u]);case 3:return a(r(t,n,e),[i,u]);case 4:return a(r(t,n,e,i),[u]);case 5:return r(t,n,e,i,u);case 6:return function(a){return r(t,n,e,i,u,a)};case 7:return function(a,o){return r(t,n,e,i,u,a,o)}}return 1===c?a(r(t),[n,e,i,u]):void 0}function v(r,t,n,e,a,i){var u=r.length;return 5===u?r(t,n,e,a,i):m(r,t,n,e,a,i,u)}function d(r,t,n,e,i,u,o,c){var f=0;if(c>7||c<0)return a(r,[t,n,e,i,u,o]);switch(c){case 0:case 1:f=1;break;case 2:return a(r(t,n),[e,i,u,o]);case 3:return a(r(t,n,e),[i,u,o]);case 4:return a(r(t,n,e,i),[u,o]);case 5:return a(r(t,n,e,i,u),[o]);case 6:return r(t,n,e,i,u,o);case 7:return function(a){return r(t,n,e,i,u,o,a)}}return 1===f?a(r(t),[n,e,i,u,o]):void 0}function g(r,t,n,e,a,i,u){var o=r.length;return 6===o?r(t,n,e,a,i,u):d(r,t,n,e,a,i,u,o)}function h(r,t,n,e,i,u,o,c,f){var s=0;if(f>7||f<0)return a(r,[t,n,e,i,u,o,c]);switch(f){case 0:case 1:s=1;break;case 2:return a(r(t,n),[e,i,u,o,c]);case 3:return a(r(t,n,e),[i,u,o,c]);case 4:return a(r(t,n,e,i),[u,o,c]);case 5:return a(r(t,n,e,i,u),[o,c]);case 6:return a(r(t,n,e,i,u,o),[c]);case 7:return r(t,n,e,i,u,o,c)}return 1===s?a(r(t),[n,e,i,u,o,c]):void 0}function y(r,t,n,e,a,i,u,o){var c=r.length;return 7===c?r(t,n,e,a,i,u,o):h(r,t,n,e,a,i,u,o,c)}function p(r,t,n,e,i,u,o,c,f,s){var _=0;if(s>7||s<0)return a(r,[t,n,e,i,u,o,c,f]);switch(s){case 0:case 1:_=1;break;case 2:return a(r(t,n),[e,i,u,o,c,f]);case 3:return a(r(t,n,e),[i,u,o,c,f]);case 4:return a(r(t,n,e,i),[u,o,c,f]);case 5:return a(r(t,n,e,i,u),[o,c,f]);case 6:return a(r(t,n,e,i,u,o),[c,f]);case 7:return a(r(t,n,e,i,u,o,c),[f])}return 1===_?a(r(t),[n,e,i,u,o,c,f]):void 0}function b(r,t,n,e,a,i,u,o,c){var f=r.length;return 8===f?r(t,n,e,a,i,u,o,c):p(r,t,n,e,a,i,u,o,c,f)}t.app=a,t.curry_1=i,t._1=u,t.__1=function(r){return 1===r.length?r:function(t){return u(r,t)}},t.curry_2=o,t._2=c,t.__2=function(r){return 2===r.length?r:function(t,n){return c(r,t,n)}},t.curry_3=f,t._3=s,t.__3=function(r){return 3===r.length?r:function(t,n,e){return s(r,t,n,e)}},t.curry_4=_,t._4=l,t.__4=function(r){return 4===r.length?r:function(t,n,e,a){return l(r,t,n,e,a)}},t.curry_5=m,t._5=v,t.__5=function(r){return 5===r.length?r:function(t,n,e,a,i){return v(r,t,n,e,a,i)}},t.curry_6=d,t._6=g,t.__6=function(r){return 6===r.length?r:function(t,n,e,a,i,u){return g(r,t,n,e,a,i,u)}},t.curry_7=h,t._7=y,t.__7=function(r){return 7===r.length?r:function(t,n,e,a,i,u,o){return y(r,t,n,e,a,i,u,o)}},t.curry_8=p,t._8=b,t.__8=function(r){return 8===r.length?r:function(t,n,e,a,i,u,o,c){return b(r,t,n,e,a,i,u,o,c)}}},function(r,t,n){"use strict";var e=n(0),a=n(63),i=n(18),u=n(62),o=n(30),c=n(12),f=n(29),s=n(28),_=n(2),l=n(60),m=f.create("Pervasives.Exit");function v(r,t){return r+t}function d(r){for(var t=r.length,n=0;;){var e=n;if(e>=t)return v(r,".");var a=c.get(r,e);if(a>=48){if(a>=58)return r;n=e+1|0}else{if(45!==a)return r;n=e+1|0}}}var g=a.stdin,h=a.stdout,y=a.stderr;function p(r,t,n){return a.caml_ml_open_descriptor_out(s.not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function b(){for(var r=a.caml_ml_out_channels_list(0);;){var t=r;if(!t)return 0;try{a.caml_ml_flush(t[0])}catch(r){}r=t[1]}}function w(r,t){return a.caml_ml_output(r,t,0,t.length)}function x(r,t){return a.caml_ml_output(r,t,0,t.length)}function k(r,t,n){return a.caml_ml_open_descriptor_in(s.not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function M(r,t,n,e){for(;;){var a=e,i=n;if(a<=0)return 0;var u=s.not_implemented("caml_ml_input not implemented by bucklescript yet\n");if(!u)throw _.end_of_file;e=a-u|0,n=i+u|0}}function C(r,t,n,e){if(n<0||e<0||n>(t.length-e|0))throw[_.invalid_argument,"really_input"];return M(0,0,n,e)}function S(r){var t=function(r,t,n){for(;;){var e=n,a=t;if(!e)return r;var i=e[0],u=i.length;c.caml_blit_bytes(i,0,r,a-u|0,u),n=e[1],t=a-u|0}};return c.bytes_to_string(function(n,e){for(;;){var i=e,u=n,o=s.not_implemented("caml_ml_input_scan_line not implemented by bucklescript yet\n");if(!o){if(u)return t(c.caml_create_string(i),i,u);throw _.end_of_file}if(o>0){var f=c.caml_create_string(o-1|0);if(s.not_implemented("caml_ml_input not implemented by bucklescript yet\n"),a.caml_ml_input_char(r),u){var l=(i+o|0)-1|0;return t(c.caml_create_string(l),l,[f,u])}return f}var m=c.caml_create_string(0|-o);s.not_implemented("caml_ml_input not implemented by bucklescript yet\n"),e=i-o|0,n=[m,u]}}(0,0))}var P=[b];function A(){return e._1(P[0],0)}var T=Number.MAX_VALUE,D=Number.MIN_VALUE,L=a.caml_ml_flush,N=a.caml_ml_output_char,U=a.caml_ml_output_char,V=a.caml_ml_input_char,z=a.caml_ml_input_char,B=[function(r,t){return s.not_implemented("caml_ml_seek_out_64 not implemented by bucklescript yet\n")},function(){return s.not_implemented("caml_ml_pos_out_64 not implemented by bucklescript yet\n")},function(){return s.not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")},function(r,t){return s.not_implemented("caml_ml_seek_in_64 not implemented by bucklescript yet\n")},function(){return s.not_implemented("caml_ml_pos_in_64 not implemented by bucklescript yet\n")},function(){return s.not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")}];t.invalid_arg=function(r){throw[_.invalid_argument,r]},t.failwith=function(r){throw[_.failure,r]},t.Exit=m,t.min=function(r,t){return i.caml_lessequal(r,t)?r:t},t.max=function(r,t){return i.caml_greaterequal(r,t)?r:t},t.abs=function(r){return r>=0?r:0|-r},t.max_int=2147483647,t.min_int=-2147483648,t.lnot=function(r){return-1^r},t.infinity=1/0,t.neg_infinity=-1/0,t.nan=NaN,t.max_float=T,t.min_float=D,t.epsilon_float=2.220446049250313e-16,t.$caret=v,t.char_of_int=function(r){if(r<0||r>255)throw[_.invalid_argument,"char_of_int"];return r},t.string_of_bool=function(r){return r?"true":"false"},t.bool_of_string=function(r){switch(r){case"false":return 0;case"true":return 1;default:throw[_.invalid_argument,"bool_of_string"]}},t.string_of_int=function(r){return""+r},t.string_of_float=function(r){return d(o.caml_format_float("%.12g",r))},t.$at=function r(t,n){return t?[t[0],r(t[1],n)]:n},t.stdin=g,t.stdout=h,t.stderr=y,t.print_char=function(r){return a.caml_ml_output_char(h,r)},t.print_string=function(r){return x(h,r)},t.print_bytes=function(r){return w(h,r)},t.print_int=function(r){return x(h,""+r)},t.print_float=function(r){return x(h,d(o.caml_format_float("%.12g",r)))},t.print_endline=function(r){return console.log(r),0},t.print_newline=function(){return a.caml_ml_output_char(h,10),a.caml_ml_flush(h)},t.prerr_char=function(r){return a.caml_ml_output_char(y,r)},t.prerr_string=function(r){return x(y,r)},t.prerr_bytes=function(r){return w(y,r)},t.prerr_int=function(r){return x(y,""+r)},t.prerr_float=function(r){return x(y,d(o.caml_format_float("%.12g",r)))},t.prerr_endline=function(r){return console.error(r),0},t.prerr_newline=function(){return a.caml_ml_output_char(y,10),a.caml_ml_flush(y)},t.read_line=function(){return a.caml_ml_flush(h),S(g)},t.read_int=function(){return o.caml_int_of_string((a.caml_ml_flush(h),S(g)))},t.read_float=function(){return o.caml_float_of_string((a.caml_ml_flush(h),S(g)))},t.open_out=function(r){return p()},t.open_out_bin=function(r){return p()},t.open_out_gen=p,t.flush=L,t.flush_all=b,t.output_char=N,t.output_string=x,t.output_bytes=w,t.output=function(r,t,n,e){if(n<0||e<0||n>(t.length-e|0))throw[_.invalid_argument,"output"];return a.caml_ml_output(r,t,n,e)},t.output_substring=function(r,t,n,e){if(n<0||e<0||n>(t.length-e|0))throw[_.invalid_argument,"output_substring"];return a.caml_ml_output(r,t,n,e)},t.output_byte=U,t.output_binary_int=function(r,t){return s.not_implemented("caml_ml_output_int not implemented by bucklescript yet\n")},t.output_value=function(r,t){return s.not_implemented("caml_output_value not implemented by bucklescript yet\n")},t.seek_out=function(r,t){return s.not_implemented("caml_ml_seek_out not implemented by bucklescript yet\n")},t.pos_out=function(){return s.not_implemented("caml_ml_pos_out not implemented by bucklescript yet\n")},t.out_channel_length=function(){return s.not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")},t.close_out=function(r){return a.caml_ml_flush(r),s.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")},t.close_out_noerr=function(r){try{a.caml_ml_flush(r)}catch(r){}try{return s.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(r){return 0}},t.set_binary_mode_out=function(r,t){return s.not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")},t.open_in=function(r){return k()},t.open_in_bin=function(r){return k()},t.open_in_gen=k,t.input_char=V,t.input_line=S,t.input=function(r,t,n,e){if(n<0||e<0||n>(t.length-e|0))throw[_.invalid_argument,"input"];return s.not_implemented("caml_ml_input not implemented by bucklescript yet\n")},t.really_input=C,t.really_input_string=function(r,t){var n=c.caml_create_string(t);return C(0,n,0,t),c.bytes_to_string(n)},t.input_byte=z,t.input_binary_int=function(){return s.not_implemented("caml_ml_input_int not implemented by bucklescript yet\n")},t.input_value=function(){return s.not_implemented("caml_input_value not implemented by bucklescript yet\n")},t.seek_in=function(r,t){return s.not_implemented("caml_ml_seek_in not implemented by bucklescript yet\n")},t.pos_in=function(){return s.not_implemented("caml_ml_pos_in not implemented by bucklescript yet\n")},t.in_channel_length=function(){return s.not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")},t.close_in=function(){return s.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")},t.close_in_noerr=function(){try{return s.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(r){return 0}},t.set_binary_mode_in=function(r,t){return s.not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")},t.LargeFile=B,t.string_of_format=function(r){return r[1]},t.$caret$caret=function(r,t){return[l.concat_fmt(r[0],t[0]),v(r[1],v("%,",t[1]))]},t.exit=function(r){return A(),u.caml_sys_exit(r)},t.at_exit=function(r){var t=P[0];return P[0]=function(){return e._1(r,0),e._1(t,0)},0},t.valid_float_lexem=d,t.unsafe_really_input=M,t.do_at_exit=A},function(r,t,n){"use strict";var e=["Out_of_memory",0],a=["Sys_error",-1],i=["Failure",-2],u=["Invalid_argument",-3],o=["End_of_file",-4],c=["Division_by_zero",-5],f=["Not_found",-6],s=["Match_failure",-7],_=["Stack_overflow",-8],l=["Sys_blocked_io",-9],m=["Assert_failure",-10],v=["Undefined_recursive_module",-11];e.tag=248,a.tag=248,i.tag=248,u.tag=248,o.tag=248,c.tag=248,f.tag=248,s.tag=248,_.tag=248,l.tag=248,m.tag=248,v.tag=248,t.out_of_memory=e,t.sys_error=a,t.failure=i,t.invalid_argument=u,t.end_of_file=o,t.division_by_zero=c,t.not_found=f,t.match_failure=s,t.stack_overflow=_,t.sys_blocked_io=l,t.assert_failure=m,t.undefined_recursive_module=v},function(r,t,n){"use strict";var e=n(13),a=n(8),i=n(22),u=n(6),o=n(0),c=n(41),f=n(7),s=n(9),_=n(58),l=n(1),m=n(40);function v(r){switch(r){case 0:case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 9;case 6:return 16}}function d(r){return 1!==r?4:2}function g(r){return 1!==r?m.float_:m.unsigned_short}var h=[v,d,g],y=[1];function p(){var r=y[0];return y[0]=r+1|0,r}function b(r){switch(0|r.tag){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;case 6:return 6}}function w(r,t,n){var e=[r[1],o._3(c.Gl[40],t,n,r[0]),r[2]];return r[3]=[e],e}function x(r,t){var n=r[2];switch(0|n.tag){case 0:return t.uniform1f(r[1],n[0][0]),0;case 1:return t.uniform1i(r[1],n[0][0]),0;case 2:var e=n[0][0];return t.uniform2f(r[1],f.caml_array_get(e,0),f.caml_array_get(e,1)),0;case 3:var a=n[0][0];return t.uniform3f(r[1],f.caml_array_get(a,0),f.caml_array_get(a,1),f.caml_array_get(a,2)),0;case 4:var i=n[0][0];return t.uniform4f(r[1],f.caml_array_get(i,0),f.caml_array_get(i,1),f.caml_array_get(i,2),f.caml_array_get(i,3)),0;case 5:var u=n[0][0];return t.uniformMatrix3fv(r[1],!1,u),0;case 6:var o=n[0][0];return t.uniformMatrix4fv(r[1],!1,o),0}}var k=[b,function(r){switch(r){case 0:return u.__(0,[[0]]);case 1:return u.__(1,[[0]]);case 2:return u.__(2,[[e.Vec2[6](0)]]);case 3:return u.__(3,[[e.Vec3[10](0)]]);case 4:return u.__(4,[[e.Vec4[3](0)]]);case 5:return u.__(5,[[e.Mat3[7](0)]]);case 6:return u.__(6,[[e.Mat4[4](0)]])}},function(r,t){return[r,b(t),t,0]},w,function(r,t,n){return o._3(c.Gl[40],r,t,n)},function(r,t,n){return[r,n,t]},function(r,t){return r.tag?l.failwith("Uniform not float"):(r[0][0]=t,0)},function(r,t){return 2===r.tag?(r[0][0]=t,0):l.failwith("Uniform not vec2f")},function(r,t){return 3===r.tag?(r[0][0]=t,0):l.failwith("Uniform not vec3f")},function(r,t){return 4===r.tag?(r[0][0]=t,0):l.failwith("Uniform not vec4f")},function(r,t){return 5===r.tag?(r[0][0]=t,0):l.failwith("Uniform not mat3")},x];function M(r,t,n,e,a,i){return[o._3(c.Gl[41],t,n,r[0]),e,a,i,g(r[1])]}function C(r,t){return t.vertexAttribPointer(r[0],r[1],r[4],!1,r[2],r[3]),0}var S=[function(r,t){return[r,t]},M,C];function P(r,t,n){var e=o._2(c.Gl[8],r,t);return c.Gl[11](r,e,n),o._2(c.Gl[12],r,e),+(1===c.Gl[48](r,e,1))?[e]:(console.log("Shader compilation failed: "+o._2(c.Gl[49],r,e)),console.log(n),0)}var A=[function(r){return[r]},P];function T(r,t,n){var e=P(r,m.vertex_shader,t),a=P(r,m.fragment_shader,n);if(e){if(a){var i=a[0],u=e[0],f=o._1(c.Gl[7],r);return o._3(c.Gl[9],r,f,u),o._2(c.Gl[10],r,u),o._3(c.Gl[9],r,f,i),o._2(c.Gl[10],r,i),o._2(c.Gl[13],r,f),+(1===c.Gl[47](r,f,1))?[f]:(console.log("GlProgram linking failed"),0)}return 0}return 0}function D(r,t,n){var e=a.fold_left(function(r,t){return r+s.imul(v(t[1]),d(t[1]))|0},0,r),i=[0];return a.map(function(r){var a=v(r[1]),u=s.imul(a,d(r[1])),o=M(r,t,n,a,e,i[0]);return i[0]=i[0]+u|0,o},r)}function L(r,t){var n=T(t,r[0][0],r[1][0]);if(n){var e=n[0],i=a.map(function(r){return w(r,t,e)},r[3]),u=D(r[2],t,e);return[[p(),e,u,i]]}return 0}var N=[function(r,t,n,e){return[r,t,n,e,a.fold_left(function(r,t){return r+v(t[1])|0},0,n)]},T,D,L,function(r,t){return[r[0],r[1],r[2],t]}];function U(r,t,n,e){var a=-1+n,i=a+r,u=1-e,o=u-t;return[a,o,i,o,i,u,a,u]}function V(r,t,n){var e=t?t[0]:0;return[r?r[0]:U(2,2,0,0),e,[["position",2],0],2,0]}function z(r,t){return r[2]=t,r[5]=t.length,r[4]=1,0}function B(r,t){var n=r[4];return n?z(n[0],t):(r[0]=t,0)}function E(r,t){var n;switch(r[5]=r[2].length,r[6]){case 0:n=m.static_draw;break;case 1:n=m.dynamic_draw;break;case 2:n=m.stream_draw}return t.bufferData(m.array_buffer,o._2(c.Gl[24][1],1,r[2]),n),0}function F(r,t,n){var e=r[4];if(e)return e[0];var a,i=o._1(c.Gl[15],t);switch(t.bindBuffer(m.array_buffer,i),r[1]){case 0:a=m.static_draw;break;case 1:a=m.dynamic_draw;break;case 2:a=m.stream_draw}t.bufferData(m.array_buffer,o._2(c.Gl[24][1],1,r[0]),a);var u=[p(),i,r[0],r[3],0,r[0].length,r[1]];return n[1]=u[0],r[4]=[u],u}var I=[function(r,t,n){return[r,n,t,a.fold_left(function(r,t){return r+v(t[1])|0},0,t),0]},function(r){return a.map(function(r){return[r[0],r[1]]},r[2])},U,function(){return[["position",2],0]},V,z,B,E,F,function(r,t){return r.deleteBuffer(t[1]),0}];function q(r){var t=f.caml_make_vect(s.imul(r,6),0);return function(n){for(;;){var e=n;if(!(e<r))return 0;var a=e<<2,i=s.imul(e,6);f.caml_array_set(t,i,0+a|0),f.caml_array_set(t,i+1|0,1+a|0),f.caml_array_set(t,i+2|0,2+a|0),f.caml_array_set(t,i+3|0,0+a|0),f.caml_array_set(t,i+4|0,2+a|0),f.caml_array_set(t,i+5|0,3+a|0),n=e+1|0}}(0),t}function R(r,t){return r[2]=t,r[4]=t.length,r[3]=1,0}function G(r,t){var n=r[2];return n?R(n[0],t):(r[0]=t,0)}function O(r){var t,n=r[6];switch(r[4]=r[2].length,r[5]){case 0:t=m.static_draw;break;case 1:t=m.dynamic_draw;break;case 2:t=m.stream_draw}return n.bufferData(m.element_array_buffer,o._2(c.Gl[24][1],3,r[2]),t),0}function H(r,t,n){var e=r[2];if(e)return e[0];var a,i=o._1(c.Gl[15],t);switch(t.bindBuffer(m.element_array_buffer,i),r[1]){case 0:a=m.static_draw;break;case 1:a=m.dynamic_draw;break;case 2:a=m.stream_draw}t.bufferData(m.element_array_buffer,o._2(c.Gl[24][1],3,r[0]),a);var u=[p(),i,r[0],0,r[0].length,r[1],t];return n[2]=u[0],r[2]=[u],u}var K=[function(r,t){return[r,t,0]},function(){return[[0,1,2,0,2,3],0,0]},q,R,G,O,H,function(r,t){return r.deleteBuffer(t[1]),0}],j=[function(r,t){return[r,t]},function(r,t){var n=r?r[0]:0;return[V(0,[n]),[[q(1),n,0]]]},function(r,t){B(r[0],t);var n=r[0][3]<<2,e=r[1];return e?G(e[0],q(s.div(t.length,n))):0}];function $(r,t,n){return[r,t,n,0]}function W(r,t){var n=r[3];if(n)return n[0];var e,a=o._1(c.Gl[17],t),i=0!==r[2]?m.nearest:m.linear;switch(o._3(c.Gl[19],t,m.texture_2d,a),o._4(c.Gl[20],t,m.texture_2d,m.texture_wrap_s,m.clamp_to_edge),o._4(c.Gl[20],t,m.texture_2d,m.texture_wrap_t,m.clamp_to_edge),o._4(c.Gl[20],t,m.texture_2d,m.texture_min_filter,i),o._4(c.Gl[20],t,m.texture_2d,m.texture_mag_filter,i),r[1]){case 0:e=6409;break;case 1:e=6406;break;case 2:e=m.rgb;break;case 3:e=m.rgba}r[1]||t.pixelStorei(3317,1);var u=r[0];if("number"!=typeof u)if(u.tag){var f=u[0];t.texImage2D(m.texture_2d,0,e,u[1],u[2],0,e,m.unsigned_byte,f?o._2(c.Gl[24][1],5,f[0]):null)}else c.Gl[30](t,m.texture_2d,0,u[0]);var s=[p(),a,r[0],0,e,t];return r[3]=[s],s}function X(r,t){var n=r[3];if(n){var e=n[0];return o._3(c.Gl[19],t,m.texture_2d,e[1]),e}return W(r,t)}function Q(r){var t=r[5];o._3(c.Gl[19],t,m.texture_2d,r[1]);var n=r[2];if("number"!=typeof n)if(n.tag){var e=n[0];t.texImage2D(m.texture_2d,0,r[4],n[1],n[2],0,r[4],m.unsigned_byte,e?o._2(c.Gl[24][1],5,e[0]):null)}else c.Gl[30](t,m.texture_2d,0,n[0]);return r[3]=0,0}var Y=[$,function(r,t){var n=r[3];if(n){var e=n[0];return e[2]=t,e[3]=1,0}return r[0]=t,0},function(r){var t=r[3],n=t?t[0][2]:r[0];return"number"!=typeof n&&n.tag?[[n[1],n[2]]]:0},6409,6406,3317,function(r,t,n,e){var a=r?r[0]:128,i=t?t[0]:128,o=n?n[0]:0;return $(u.__(1,[0,a,i]),3,o)},function(r,t,n,e){var a=r?r[0]:128,i=t?t[0]:128,o=n?n[0]:0;return $(u.__(1,[0,a,i]),2,o)},function(r,t,n,e){var a=r?r[0]:128,i=t?t[0]:128,o=n?n[0]:0;return $(u.__(1,[0,a,i]),1,o)},W,X,function(r,t,n,e){var a=r[0];if("number"==typeof a)return l.failwith("Need int data texture to resize");if(a.tag){if(a[1]<n||a[2]<e){var _,v=a[0],d=l.max(n,e),g=function(r){for(;;){var t=r;if(d<=t)return t;r=t<<1}}(1),h=X(r,t),y=function(r,t){var n=r.length;return i.init(t,function(t){return t<n?f.caml_array_get(r,t):0})};if(v){var p=v[0],b=r[1];if(2!==b)if(b>=3){var w=y(p,s.imul(g,g)<<2);h[2]=u.__(1,[[w],g,g]),r[0]=h[2],_=o._2(c.Gl[24][1],5,w)}else{var x=y(p,s.imul(g,g));h[2]=u.__(1,[[x],g,g]),r[0]=h[2],_=o._2(c.Gl[24][1],5,x)}else{var k=y(p,s.imul(s.imul(g,g),3));h[2]=u.__(1,[[k],g,g]),r[0]=h[2],_=o._2(c.Gl[24][1],5,k)}}else h[2]=u.__(1,[0,g,g]),r[0]=h[2],_=null;return t.texImage2D(m.texture_2d,0,h[4],g,g,0,h[4],m.unsigned_byte,_),0}return 0}return l.failwith("Need int data texture to resize")},Q];function Z(r,t,n){var e=r[2];if(e)return e[0];var a=W(r[1],t),i=o._3(c.Gl[40],t,n,r[0]),u=[p(),a,i];return r[2]=[u],u}var J=[function(r,t){return[r,t,0]},Z,function(r,t,n){return o._3(c.Gl[40],t,n,r)},function(r,t,n){if(r[2])return l.failwith("Init from ref already inited");var e=W(r[1],t),a=[p(),e,n];return r[2]=[a],a}],rr=[36160,36064,function(r,t){return[r,t,0]},function(r,t){var n=r[2];if(n)return n[0];var e=t.createFramebuffer(),a=[r[0],r[1],e];return r[2]=[a],a},function(r,t,n){var e=W(n,t);return t.bindFramebuffer(36160,r[2]),t.framebufferTexture2D(36160,36064,m.texture_2d,e[1],0),0}];function tr(r){var t=r.getError();if(0===t)return 0;if(t>=1287)return 37442!==t?[t]:6;if(!(t>=1280))return[t];switch(t-1280|0){case 0:return 1;case 1:return 2;case 2:return 3;case 3:case 4:return[t];case 5:return 5;case 6:return 4}}function nr(r){var t=tr(r);if("number"!=typeof t)return["Other error: "+l.string_of_int(t[0])];switch(t){case 0:return 0;case 1:return["Invalid enum"];case 2:return["Invalid value"];case 3:return["Invalid operation"];case 4:return["Invalid framebuffer operation"];case 5:return["Out of memory"];case 6:return["Context lost webgl"]}}var er=[tr,nr],ar=window;function ir(r,t){var n=o._1(c.Gl[2][5],[]);o._3(c.Gl[2][6],n,r,t);var e=n[0].getContext("webgl",{preserveDrawingBuffer:1,antialias:1,stencil:1});return e.enable(2884),o._5(c.Gl[38],e,0,0,r,t),[e,[0,0,0,[]],0,0,r,t,[65],n]}function ur(r,t,n){var e=r[0],i=r[1];return i[0]!==t[0]&&(o._2(c.Gl[14],e,t[1]),a.iter(function(r){return C(r,e),e.enableVertexAttribArray(r[0]),0},t[2]),i[0]=t[0]),i[1]!==n[0]&&(e.bindBuffer(m.array_buffer,n[1]),i[1]=n[0]),o._4(c.Gl[52],e,m.triangles,0,n[5])}function or(r,t,n,e,u){var o,c=r[0],s=r[1],_=s[0]!==t[0]?(c.useProgram(t[1]),s[0]=t[0],1):0;a.iter(function(r){return x(r,c)},t[3]),s[1]!==n[0]?(c.bindBuffer(m.array_buffer,n[1]),n[4]&&E(n,c),s[1]=n[0],o=1):o=0,(_||o)&&a.iter(function(r){return C(r,c),c.enableVertexAttribArray(r[0]),0},t[2]),s[2]!==e[0]&&(c.bindBuffer(m.element_array_buffer,e[1]),e[3]&&O(e),s[2]=e[0]);var l=s[3].length;s[3]=i.mapi(function(r,t){var n=r>(l-1|0)||f.caml_array_get(s[3],r)!==t[0]?(c.uniform1i(t[2],r),c.activeTexture(m.texture0+r|0),c.bindTexture(m.texture_2d,t[1][1]),1):0;return t[1][3]&&(n||(c.activeTexture(m.texture0+r|0),c.bindTexture(m.texture_2d,t[1][1])),Q(t[1])),t[0]},u),c.drawElements(m.triangles,e[4],m.unsigned_short,0);var v=nr(c);return v?(console.log(v[0]),0):0}var cr=[ar,function(){return[0|ar.innerWidth,0|ar.innerHeight]},2884,ir,function(r,t,n){return o._3(c.Gl[2][6],r[7],t,n),o._5(c.Gl[38],r[0],0,0,t,n),r[4]=t,r[5]=n,0},function(r,t,n,e,a,i,u){var f=ir(r,t),s=[o._1(n,f)];return c.Gl[5](f[7],0,0,0,[function(r,t){return f[6][0]=r,!t&&a?(s[0]=o._2(a[0],s[0],f),0):0}],[function(){return 0}],[function(){return i?o._1(i[0],s[0]):0}],function(r){return f[2]=r/1e3,f[3]+=f[2],s[0]=o._2(e,s[0],f),0},0)},function(r,t,n,e,a){return r.colorMask(_.to_js_boolean(t),_.to_js_boolean(n),_.to_js_boolean(e),_.to_js_boolean(a)),0},function(r,t){return r.depthMask(_.to_js_boolean(t)),0},function(r,t,n,e,a){return o._5(c.Gl[6],r[0],t,n,e,a),o._2(c.Gl[39],r[0],m.color_buffer_bit)},function(r){return o._2(c.Gl[39],r[0],m.stencil_buffer_bit)},function(r,t){return r[0].bindFramebuffer(36160,t[2]),o._5(c.Gl[38],r[0],0,0,t[0],t[1])},function(r){return r[0].bindFramebuffer(36160,null),o._5(c.Gl[38],r[0],0,0,r[4],r[5])},ur,or],fr=[function(r,t,n,e,u,o){var c=L(t,r);if(c){var f=c[0],s=F(n,r,o),_=e?[H(e[0],r,o)]:0,m=a.map(function(t){return Z(t,r,f[1])},u);return[f,s,_,i.of_list(m)]}return l.failwith("Program creation failed")},function(r,t,n,e){return[r,t,n,e]},function(r,t){var n=r[2];return n?or(t,r[0],r[1],n[0],r[3]):ur(t,r[0],r[1])}];t.Constants=0,t.Gl=0,t.GlType=h,t.curRId=y,t.rId=p,t.Uniform=k,t.VertexAttrib=S,t.Shader=A,t.Program=N,t.VertexBuffer=I,t.IndexBuffer=K,t.VertexObject=j,t.Texture=Y,t.ProgramTexture=J,t.FrameBuffer=rr,t.Scissor=[3089],t.Stencil=[2960,519,514,517,7680,7681],t.$$Error=er,t.Canvas=cr,t.DrawState=fr},function(r,t,n){"use strict";var e=n(3),a=n(13),i=n(8),u=n(54),o=n(22),c=n(6),f=n(0),s=n(88),_=n(24),l=n(41),m=n(7),v=n(9),d=n(1),g=n(87),h=n(40),y=n(86),p=[0];function b(){var r=p[0];return p[0]=r+1|0,r}var w=e.VertexBuffer[4](0,0,0),x=e.IndexBuffer[1](0);function k(r,t,n,e,a,i,u,o,f,s){return[r?r[0]:c.__(0,[c.__(0,[1]),c.__(0,[1])]),o,f,t,n,a?a[0]:0,e,i?i[0]:0,u?u[0]:0]}function M(r,t,n,e,a,i,u,o,c,f){return[r?r[0]:f[0],o?o[0]:f[1],c?c[0]:f[2],t?t[0]:f[3],n?n[0]:f[4],a?a[0]:f[5],e?e[0]:f[6],i?i[0]:f[7],u?u[0]:f[8]]}var C=[function(r,t,n){var e=r?r[0]:c.__(0,[0]),i=t?t[0]:c.__(0,[0]),u=n[32];return[0,u?u[0]:d.failwith("Provided node does not draw to texture"),[n[2]],[c.__(5,[[a.Mat3[7](0)]])],e,i]},function(r,t,n){return[0,n,0,0,r?r[0]:c.__(0,[0]),t?t[0]:c.__(0,[0])]}];function S(r){var t=function(n,e,a){n[37]=e,n[38]=[r];var u=n[0];if(u){var o=u[0];_.mem(r[2],o)?d.failwith("Node with key already exist: "+o):_.add(r[2],o,n)}var c=n[1];if(c){var f=c[0];if(_.mem(r[3],f)){var s=_.find(r[3],f);_.replace(r[3],f,[n,s])}else _.add(r[3],f,[n,0])}var l=i.fold_left(function(r,t){return[[n,t[0],t[1]],r]},a,n[34]),m=i.fold_left(function(r,e){return t(e,[n],r)},l,n[17]);return i.fold_left(function(r,e){return t(e,[n],r)},m,n[18])},n=t(r[5],0,0);return r[21]=i.map(function(t){return[t[0],_.find(r[2],t[1]),t[2]]},n),0}function P(r,t){var n=function(t,e,a,u,o){_.iter(function(r,n){return n[0]=[t[2],n[0]],0},t[28]);var c,f=t[25];if(f){var s=f[0];s[0]=[t[2],s[0]]}else{var l=t[21];if(l){var v=l[0][4];if(v){var g=v[0];g[0]=[t[2],g[0]]}else d.failwith("Could not find vo")}else d.failwith("Could not find vo")}if(_.iter(function(r,n){return n[0]=[t[2],n[0]],0},t[23]),t[15]&&(r[17]=[t[2],r[17]]),t[12]||t[14])c=0;else{var h=[t[10],0];if(!u&&e){var y=e[0];y[8]=[h,y[8]]}c=[h]}var p=[0,0,a,u,o,0,t,0,0,c,0,0,0,0,e];if(m.caml_array_set(r[15],t[2],[p]),p[12]=i.map(function(r){return n(r,[p],1,1,0)},t[17]),t[5][5]>=2){var b=i.fold_left(function(r,t){return[n(t,[p],a,0,r),r]},0,t[18]);i.fold_left(function(r,t){return t[5]=r,[t,r]},0,b),p[13]=i.rev(b)}else p[13]=i.map(function(r){return n(r,[p],a,0,0)},t[18]);var w=function(r){return i.iter(function(t){return r[8]=[t,r[8]],0},p[8]),i.iter(w,r[13])};if(i.iter(w,o),!p[3]){var x=p[14];if(x){var k=x[0];i.iter(function(r){return k[8]=[r,k[8]],0},p[8])}}return p};r[15]=m.caml_make_vect(p[0],0);var e=n(t,0,0,0,0);return r[17]=i.sort(function(r,t){return 0!=+(r>t)?1:-1},r[17]),e}function A(r){var t=r[0];if(t)return t[0]+" id:"+d.string_of_int(r[2]);var n=r[1];return n?"cls: "+n[0]+" id:"+d.string_of_int(r[2]):"id:"+d.string_of_int(r[2])}function T(r,t,n,a,u,o,c){var f=i.fold_left(function(r,t){return[e.Uniform[2](t[0]+"Mat",t[1]),r]},0,r),s=t?[e.Uniform[2]("elapsedScene",t[0]),f]:f,_=n?[e.Uniform[2]("pixelSize",n[0]),s]:s,l=a?[e.Uniform[2]("layout",a[0]),_]:_,m=u?[e.Uniform[2]("texTrans",u[0]),l]:l,v=i.fold_left(function(r,t){return[t[1],r]},m,o);return i.append(v,c)}function D(r,t){var n=t[0];if(n)return n[0];var a=r[4][0],u=r[4][1],o=i.map(function(r){if(_.mem(t[6],r)){var n=_.find(t[6],r);return e.Uniform[2](r,n[1])}if(_.mem(t[7],r)){var a=_.find(t[7],r);return e.Uniform[2](r,e.Uniform[1](a))}return d.failwith("Could not find uniform from list key")},t[5]),c=e.Program[0](t[1],t[2],t[3],o),f=e.Program[3](c,a),s=f?f[0]:d.failwith("Could not init program"),l=_.create(0,i.length(t[8])),m=_.create(0,_.length(t[9])),v=_.create(0,i.length(t[8]));_.iter(function(r,t){var n=e.ProgramTexture[1](t[1],a,s[1]);return _.add(m,r,n),_.add(l,r,n[2]),t[0][3]?_.add(v,r,e.Uniform[4](a,s[1],r+"Mat")):0},t[9]),_.iter(function(r,t){return _.add(l,r,e.ProgramTexture[2](r,a,s[1])),t?_.add(v,r,e.Uniform[4](a,s[1],r+"Mat")):0},t[10]);var g=t[11]?[e.Uniform[4](a,s[1],"layout")]:0,h=t[11]?[e.Uniform[4](a,s[1],"pixelSize")]:0,y=t[11]?[e.Uniform[4](a,s[1],"elapsed")]:0,p=t[11]?[e.Uniform[4](a,s[1],"texTrans")]:0,b=_.create(0,i.length(t[15]));i.iter(function(r){return _.add(b,r,e.Uniform[4](a,s[1],r))},t[15]);var w,x=t[4];if(x){var k=x[0],M=e.VertexBuffer[8](k[1],a,u),C=k[2];w=[[M,C?[e.IndexBuffer[6](C[0],a,u)]:0]]}else w=0;return[s,m,l,v,w,g,h,y,p,b]}function L(r,t,n){var a,u=D(r,n),c=r[4][0],f=r[4][1],s=i.fold_left(function(r,a){var i=r[1],u=r[0];if(u){var o=u[1],c=u[0];if(_.mem(t[28],a)){var f=_.find(t[28],a);return[o,[e.Uniform[5](e.Uniform[0](f[1]),f[1],c[1]),i]]}return _.mem(n[6],a)?[o,[c,i]]:d.failwith("Could not find uniform by name: "+a)}return d.failwith("Scene program uniform mismatch between inited program and node creating drawstate")},[u[0][3],0],n[5])[1],l=t[33],m=u[8],v=l&&m?[e.Uniform[5](5,l[0],m[0]),s]:s,g=t[31],h=u[7],y=g&&h?[e.Uniform[5](0,g[0],h[0]),v]:v,p=t[30],b=u[6],w=p&&b?[e.Uniform[5](2,p[0],b[0]),y]:y,x=t[29],k=u[5],M=x&&k?[e.Uniform[5](5,x[0],k[0]),w]:w,C=i.fold_left(function(r,n){if(_.mem(t[24],n)){var a=_.find(t[24],n);return[e.Uniform[5](5,a[1],_.find(u[3],n)),r]}return r},M,n[8]),S=i.fold_left(function(r,t){var n=t[1];return[e.Uniform[5](5,n[2],_.find(u[9],n[0])),r]},C,t[34]),P=i.map(function(r){if(_.mem(t[23],r)){var n=_.find(t[23],r);return e.ProgramTexture[3](e.ProgramTexture[0](r,n[1]),c,_.find(u[2],r))}return _.mem(u[1],r)?_.find(u[1],r):d.failwith("Could not find texture")},n[8]),A=t[25];if(A){var T=A[0],L=T[2];a=[e.VertexBuffer[8](T[1],c,f),L?[e.IndexBuffer[6](L[0],c,f)]:0]}else{var N=u[4];a=N?N[0]:d.failwith("Neither node nor program has vertexobject")}return t[3]=[e.DrawState[1](e.Program[4](u[0],i.rev(S)),a[0],a[1],o.of_list(P))],0}function N(r,t){var n,a=r[4][1],u=i.fold_left(function(r,n){var e=_.find(t[23],n)[3];return e?[[n,e[0]],r]:r},0,t[22]),o=i.map(function(r){var n=_.find(t[28],r);return e.Uniform[2](r,n[1])},t[27]),c=T(u,t[31],t[30],t[29],t[33],t[34],o),f=i.map(function(r){var n=_.find(t[23],r);return e.ProgramTexture[0](r,n[1])},t[22]),s=t[19],l=s?s[0]:d.failwith("Vertex shader not found on: "+A(t)),m=t[20],v=m?m[0]:d.failwith("Fragment shader not found on: "+A(t)),g=t[25];if(g){var h=g[0];n=[h[1],h[2]]}else n=d.failwith("Could not find vo");var y=t[26],p=y?y[0]:d.failwith("Program or attribs is required");return t[3]=[e.DrawState[0](r[4][0],e.Program[0](l,v,p,c),n[0],n[1],f,a)],0}function U(r,t){if(t[11]){var n=t[21];return n?L(r,t,n[0]):N(r,t)}return 0}function V(r){var t=function(r,n){var e=i.fold_left(function(r,n){return t(n,r)},n,r[18]),a=i.fold_left(function(r,n){return t(n,r)},e,r[17]);return r[11]&&0===r[3]?[r,a]:a};return r[18]=t(r[5],0),0}function z(r,t){return r[1]=i.fold_left(function(r,t){return[t,r]},r[1],t),0}function B(r){return r[6][15]?0:(r[0]=1,i.iter(function(r){return r[0]?0:B(r)},r[13]))}function E(r){for(;;){var t=r;if(t[6][15])return 0;t[0]=1,i.iter(function(r){return r[0]?0:B(r)},t[13]);var n=t[14];if(n){var e=n[0];if(e[2]){if(e[0])return 0;r=e;continue}return e[0]?0:F(e)}return 0}}function F(r){if(r[6][15]||r[0])return 0;if(r[0]=1,i.iter(function(r){return r[0]?0:F(r)},r[4]),i.iter(function(r){return r[0]?0:B(r)},r[13]),i.iter(function(r){return r[0]?0:F(r)},r[5]),r[2]){var t=r[14];if(t){var n=t[0];n[0]||(n[2]?E(n):F(n))}else d.failwith("Dependency without parent")}var e=r[14];if(!e)return 0;var a=e[0];if(a[1])return 0;for(var u=a;;){var o=u;o[1]=1;var c=o[14];if(!c)return 0;var f=c[0];if(f[1])return 0;u=f}}function I(r){for(var t=function(r){var t=r[9];return t?(t[0][1]=1,0):0},n=function(e){for(;;){var a=e,i=a[4],u=i?[i[0]]:a[14];if(!u)return d.failwith("Could not find covering parent for: "+A(r[6])+". Maybe add a background node?");var o=u[0];if(o[6][11]){var c=1-(o[6][12]||o[6][14])&&s.Rect[3](o[6][7],r[6][7]),f=[r[6][7],r[6][9],o,0,c,1-(o[6][15]||o[0])];return o[10]=[f,o[10]],o[6][15]?[f,n(f[2])]:(o[0],f[4]?[f,0]:(t(f[2]),[f,n(f[2])]))}e=o}},e=r[11];;){var a=e;if(a){var u=a[1],o=a[0];if(u){if(o[2][6][15]){e=u;continue}if(o[2][0]){if(o[4])return 0;t(o[2]),e=u;continue}if(o[5]=1,o[4])return 0;t(o[2]),e=u;continue}return o[2][6][15]?(r[11]=i.append(r[11],n(o[2])),0):o[2][0]?o[4]?0:(t(o[2]),r[11]=i.append(r[11],n(o[2])),0):(o[5]=1,o[4]?0:(t(o[2]),r[11]=i.append(r[11],n(o[2])),0))}return r[11]=n(r),0}}function q(r){if(r){var t=r[0];return q(t[14]),i.fold_left(function(r,t){return t[6][15]?r:(t[0]||F(t),r+1|0)},0,i.append(t[4],t[5]))>0&&!t[6][15]&&!t[0]?F(t):0}return 0}function R(r,t,n){var a=r[4][1],u=m.caml_array_get(r[15],n[2]),_=u?u[0]:d.failwith("Root update node not found"),v=[i.fold_left(function(t,n){var e=m.caml_array_get(r[15],n);if(e){var a=e[0];return F(a),[a,t]}return d.failwith("Could not find update node with id: "+d.string_of_int(n))},0,t),[0,0]];i.iter(function(r){return i.iter(function(r){return q([r])},r)},v);var g=function(r){return r[0]?((r[6][12]||r[6][14])&&I(r),i.iter(g,r[13])):r[1]?i.iter(g,r[13]):0};g(_);var h=[0],y=[0],p=function(t,n,u){var f=u||t[6][15];t[1]&&(t[1]=0);var _,l=i.fold_left(function(r,t){return p(t,r,f)},n,t[12]);if(t[6][11]){if(f){t[0]=0,i.iter(function(r){return r[5]=0,0},t[10]);var m=i.fold_left(function(r,t){return t[1]||t[0]?p(t,r,f):r},l,t[13]);return i.iter(function(r){return r[1]=0,0},t[8]),m}var v,d=i.filter(function(r){return r[1]})(t[8]),g=function(r){for(;;){var t=r;if(t){var n=t[1],e=t[0];if(i.exists(function(r){return function(t){return s.Rect[3](t[0],r[0])}}(e),n)){r=n;continue}return[e,g(n)]}return 0}},b=g(d);if(b)if(0!==h[0]&&function(r){var t=h[0];if(!t)return 0;for(var n=r,e=t[0];;){var a=e,i=n;if(i){if(a){if(s.Rect[2](i[0][0],a[0][0]))return 0;e=a[1],n=i[1];continue}return 0}return a?0:1}}(b))v=l;else{var w=o.concat(i.map(function(r){var t=r[0];return[t[0],t[1]-t[3],t[0],t[1],t[0]+t[2],t[1],t[0]+t[2],t[1]-t[3]]},b)),x=e.VertexBuffer[4]([w],[1],0),k=e.IndexBuffer[0](e.IndexBuffer[2](i.length(b)),1),M=[e.VertexBuffer[8](x,r[4][0],a),e.IndexBuffer[6](k,r[4][0],a)];h[0]=[b],v=[c.__(2,[M]),l]}else h[0]?(h[0]=0,v=[1,l]):v=l;if(t[0]){t[0]=0,t[6][3]||U(r,t[6]);var C=0!==y[0]?(y[0]=0,[0,v]):v,S=t[6][32]?[[c.__(3,[t[6]]),C],1]:[C,0],P=[c.__(0,[t[6]]),S[0]],A=i.fold_left(function(r,t){return p(t,r,f)},P,t[13]),T=S[1]?[2,A]:A;return i.iter(function(r){return r[1]=0,0},b),i.iter(function(r){return r[5]=0,0},t[10]),T}var D=i.filter(function(r){return r[5]})(t[10]),L=function(r){for(;;){var t=r;if(t){var n=t[1],e=t[0];if(e[5]=0,i.exists(function(r){return function(t){return s.Rect[3](t[0],r[0])}}(e),n)){r=n;continue}return[e,L(n)]}return 0}},N=L(D),V=i.fold_left(function(r,n){return y[0]?function(r){var t=y[0];return t?s.Rect[2](t[0],r):0}(n[1])?[c.__(0,[t[6]]),0]:(y[0]=[n[1]],[c.__(0,[t[6]]),[c.__(1,[n[1]]),[0,r]]]):(y[0]=[n[1]],[c.__(0,[t[6]]),[c.__(1,[n[1]]),r]])},v,N),z=i.fold_left(function(r,t){return t[0]||t[1]?p(t,r,f):r},V,t[13]);return i.iter(function(r){return r[1]=0,0},b),z}t[0]?(t[0]=0,_=t[6][32]?[[c.__(3,[t[6]]),l],1]:[l,0]):_=[l,0];var B=i.fold_left(function(r,t){return t[0]||t[1]?p(t,r,f):r},_[0],t[13]);return _[1]?[2,B]:B};f._2(l.Gl[14],r[4][0],r[14][1][1]),a[0]=r[14][1][0];var b=p(_,0,0),w=0!==y[0]?[0,b]:b,x=0!==h[0]?[1,w]:w,k=function(r){return r[0]?(r[0]=0,i.iter(k,r[13])):r[1]?(r[1]=0,i.iter(k,r[13])):0};return function(r){for(;;){var t=r;if(!t)return 0;var n=t[0];n[1]&&(n[1]=0,i.iter(k,n[13])),n[0]&&(n[0]=0,i.iter(k,n[13])),r=n[14]}}(_[14]),i.rev(x)}function G(r,t){if(_.mem(r[13],t))return _.find(r[13],t);var n=e.FrameBuffer[3](e.FrameBuffer[2](t[0],t[1]),r[4][0]);return _.add(r[13],t,n),n}function O(r,t,n){var a=t[32];if(a){var i=a[0],u=n[0];u&&(n[1]=[u[0],n[1]]);var o=G(r,[1024,1024]);r[4][0].bindFramebuffer(e.FrameBuffer[0],o[2]);var c=0|t[7][2],s=0|t[7][3];return f._5(l.Gl[38],r[4][0],0,0,c,s),e.FrameBuffer[4](o,r[4][0],i),t[36]&&e.Canvas[8](r[4],0,0,0,0),n[0]=[[o,i,c,s]],0}return d.failwith("Node is not drawToTexture")}function H(r,t){var n=t[1];if(n){var a=n[0],i=a[0];return e.FrameBuffer[4](i,r[4][0],a[1]),e.Canvas[10](r[4],i),t[1]=n[1],t[0]=[a],f._5(l.Gl[38],r[4][0],0,0,a[2],a[3])}return t[0]=0,e.Canvas[11](r[4]),f._5(l.Gl[38],r[4][0],0,0,r[4][4],r[4][5])}function K(r,t){var n=t[3];if(n){var a=n[0],u=t[31];u&&e.Uniform[6](u[0],r[4][3]);var o,c=t[0],f=t[1];if(c){var s=c[0];o=i.exists(function(r){return+(s===r)},0)}else if(f){var _=f[0];o=i.exists(function(r){return+(_===r)},0)}else o=0;if(t[12]){var l=r[4][0];l.enable(h.blend);var m=0!==t[13]?1:h.src_alpha;return l.blendFunc(m,h.one_minus_src_alpha),e.DrawState[2](a,r[4]),l.disable(h.blend),0}return o?(e.DrawState[2](a,r[4]),e.Canvas[11](r[4]),e.DrawState[2](a,r[4])):e.DrawState[2](a,r[4])}return d.failwith("Drawstate not found")}function j(r,t,n){for(var a=r[4][0],u=r[4][3],o=[0,0],c=t;;){var f=c;if(!f)return 0;var s=f[0];if("number"==typeof s)switch(s){case 0:a.disable(e.Scissor[0]);break;case 1:a.disable(e.Stencil[0]);break;case 2:n||H(r,o)}else switch(0|s.tag){case 0:var _=s[0];if(n){var l=r[8],m=_[29],v=_[32];if(l&&m){var d=m[0];5===d.tag&&(v||y.draw(l[0][0],d[0][0],u+_[2]))}}else if(_[16])i.exists(function(r){return function(t){return+(t===r)}}(_),r[11])||(r[11]=[_,r[11]]);else{var h=_[4];h?h[0](_,r[0]):K(r,_)}break;case 1:var p=s[0];a.enable(e.Scissor[0]),a.scissor(0|p[0],0|p[1],0|p[2],0|p[3]);break;case 2:var b=s[0];a.enable(e.Stencil[0]),e.Canvas[9](r[4]),a.stencilFunc(e.Stencil[1],1,255),a.stencilOp(e.Stencil[4],e.Stencil[4],e.Stencil[5]),a.stencilMask(255),e.Canvas[6](a,0,0,0,0),e.Canvas[7](a,0),g.draw(r[14],b[0],b[1]),e.Canvas[6](a,1,1,1,1),e.Canvas[7](a,1),a.stencilFunc(e.Stencil[3],1,255),a.stencilMask(0);break;case 3:n||O(r,s[0],o)}c=f[1]}}function $(r,t,n){console.log("====\nDrawlist",i.fold_left(function(t,n){var e=m.caml_array_get(r[15],n);return e?t+", "+A(e[0][6]):t},"",t[0]));for(var e=n;;){var a=e;if(!a)return 0;var u=a[0];if("number"==typeof u)switch(u){case 0:console.log("Clear rect");break;case 1:console.log("Clear stencil");break;case 2:console.log("Unbind draw texture")}else switch(0|u.tag){case 0:console.log("Draw node: "+A(u[0]));break;case 1:console.log("Set rect: ",u[0]);break;case 2:console.log("Draw stencil: ",u[0][0][2]);break;case 3:console.log("Bind draw texture: "+A(u[0]))}e=a[1]}}function W(r,t){return _.mem(r[2],t)?[_.find(r[2],t)]:0}function X(r,t){return t[15]=1,r[17]=i.sort_uniq(function(r,t){return 0!=+(r>t)?1:-1},[t[2],r[17]]),z(r,[r[5][2],0])}function Q(r,t){return t[15]=0,r[17]=i.filter(function(r){return+(r!==t[2])})(r[17]),z(r,[t[2],0])}function Y(r){return i.iter(function(r){var t=r[1],n=r[0],i=n[7][2]/t[7][2],u=n[7][3]/t[7][3],o=(n[7][0]-t[7][0])/t[7][2]*2,c=(n[7][1]-t[7][1])/t[7][3]*2;return e.Uniform[10](r[2][2],a.Mat3[6](i,u,o,c))},r[21])}function Z(r){var t=r[4][4],n=r[4][5],u=function(r,e,a){!function(r,e,a){var i=r[6],u=function(r){switch(0|r.tag){case 0:return e*r[0];case 1:return t*r[0];case 2:return r[0]}},o=function(r){switch(0|r.tag){case 0:return a*r[0];case 1:return n*r[0];case 2:return r[0]}},c=r[5][4];if(!c)return 0;var f=c[0];switch(0|f.tag){case 0:var s=f[0];switch(0|s.tag){case 0:var _=s[0],l=e*_,m=a*_;return i[2]=l,i[3]=l,i[4]=m,i[5]=m,0;case 1:var v=s[0],d=t*v,g=n*v;return i[2]=d,i[3]=d,i[4]=g,i[5]=g,0;case 2:var h=s[0];return i[2]=h,i[3]=h,i[4]=h,i[5]=h,0}break;case 1:var y=u(f[0]),p=o(f[1]);return i[2]=y,i[3]=y,i[4]=p,i[5]=p,0;case 2:var b=u(f[0]),w=o(f[1]),x=u(f[2]),k=o(f[3]);i[2]=x,i[3]=b,i[4]=k,i[5]=w}}(r,e,a);var i,u=r[6],o=function(n){var a=r[5][1];if(!a)return n;var i=a[0];switch(0|i.tag){case 0:var u=i[0];return 0!=+(n>e*u)?e*u:n;case 1:var o=i[0];return 0!=+(n>t*o)?t*o:n;case 2:var c=i[0];return 0!=+(n>c)?c:n}},c=function(t){var e=r[5][2];if(!e)return t;var i=e[0];switch(0|i.tag){case 0:var u=i[0];return 0!=+(t>a*u)?a*u:t;case 1:var o=i[0];return 0!=+(t>n*o)?n*o:t;case 2:var c=i[0];return 0!=+(t>c)?c:t}},f=r[5][0];switch(0|f.tag){case 0:var s,_,l=f[1],m=f[0];switch(0|m.tag){case 0:s=e*m[0];break;case 1:s=t*m[0];break;case 2:s=m[0]}switch(0|l.tag){case 0:_=a*l[0];break;case 1:_=t*l[0];break;case 2:_=l[0]}i=[o(s),c(_)];break;case 1:var v,d=f[1],g=f[0];switch(0|g.tag){case 0:v=e*g[0];break;case 1:v=t*g[0];break;case 2:v=g[0]}var h=o(v);if(r[5][2]){var y=h*d,p=c(y);i=p<y?[h*(p/y),p]:[h,h*d]}else i=[h,h*d];break;case 2:var b,w=f[1],x=f[0];switch(0|x.tag){case 0:b=a*x[0];break;case 1:b=n*x[0];break;case 2:b=x[0]}if(r[5][1]){var k=b*w,M=o(k);i=M<k?[b*(M/k),M]:[b,b*w]}else i=[b*w,b];break;case 3:var C=f[0];if(r[5][4]){var S=o(e),P=c(a),A=o(S-u[2]-u[3]),T=c(P-u[4]-u[5]);i=C<A/T?[T*C+u[2]+u[3],P]:[S,A/C+u[4]+u[5]]}else{var D=o(e),L=c(a);i=C<D/L?[L*C,L]:[D,D/C]}}return u[0]=i[0],u[1]=i[1],u[6]=u[0]-u[2]-u[3],u[7]=u[1]-u[4]-u[5],0},o=function(c,f){var s,l=c[5],v=c[6],g=l[3];if(g){var h=g[0];switch(0|h.tag){case 0:var y=h[0],p=v[0]*y,b=v[1]*y;s=[v[0]-2*p,v[1]-2*b,v[8]+p,v[9]+b];break;case 1:var w=h[0],x=t*w,k=n*w;s=[v[0]-2*x,v[1]-2*k,v[8]+x,v[9]+k];break;case 2:var M=h[0];s=[v[0]-2*M,v[1]-2*M,v[8]+M,v[9]+M]}}else s=[v[0],v[1],v[8],v[9]];var C=s[2]+v[2],S=s[3]+v[4],P=s[0]-v[2]-v[3],A=s[1]-v[4]-v[5];switch(i.iter(function(r){return u(r,P,A)},c[17]),i.iter(function(r){return u(r,P,A)},c[18]),i.iter(function(r){return r[6][8]=C,r[6][9]=S,0},c[17]),l[5]){case 0:var T,D=l[6];if(D){var L=D[0];switch(0|L.tag){case 0:T=P*L[0];break;case 1:T=t*L[0];break;case 2:T=L[0]}}else T=0;switch(l[7]){case 0:var N=i.fold_left(function(r,t){return r+t[6][0]},0,c[18])+T*(i.length(c[18])-1|0),U=(P-N)/2;i.fold_left(function(r,t){return t[6][8]=r+t[6][2],r+T+t[6][0]},C+U,c[18]);break;case 1:i.fold_left(function(r,t){return t[6][8]=r+t[6][2],r+T+t[6][0]},C,c[18]);break;case 2:i.fold_right(function(r,t){var n=t-r[6][0];return r[6][8]=n+r[6][2],n-T},c[18],C+P)}switch(l[8]){case 0:i.iter(function(r){return r[6][9]=S+r[6][4],0},c[18]);break;case 1:i.iter(function(r){return r[6][9]=S+(A-r[6][1])/2+r[6][4],0},c[18]);break;case 2:i.iter(function(r){return r[6][9]=S+A-r[6][1]+r[6][4],0},c[18])}break;case 1:var V,z=l[6];if(z){var B=z[0];switch(0|B.tag){case 0:V=A*B[0];break;case 1:V=n*B[0];break;case 2:V=B[0]}}else V=0;switch(l[7]){case 0:i.iter(function(r){return r[6][8]=C+(P-r[6][0])/2+r[6][2],0},c[18]);break;case 1:i.iter(function(r){return r[6][8]=C+r[6][2],0},c[18]);break;case 2:i.iter(function(r){return r[6][8]=C+P-r[6][0]+r[6][2],0},c[18])}switch(l[8]){case 0:i.fold_left(function(r,t){return t[6][9]=r+t[6][4],r+t[6][1]+V},S,c[18]);break;case 1:var E=i.fold_left(function(r,t){return r+t[6][1]},0,c[18])+V*(i.length(c[18])-1|0);i.fold_left(function(r,t){return t[6][9]=r+t[6][4],r+t[6][1]+V},S+(A-E)/2,c[18]);break;case 2:i.fold_right(function(r,t){var n=t-r[6][1];return r[6][9]=n+r[6][4],n-V},c[18],S+A)}break;case 2:switch(l[7]){case 0:i.iter(function(r){return r[6][8]=C+(P-r[6][0])/2+r[6][2],0},c[18]);break;case 1:i.iter(function(r){return r[6][8]=C+r[6][2],0},c[18]);break;case 2:i.iter(function(r){return r[6][8]=C+P-r[6][0]+r[6][2],0},c[18])}switch(l[8]){case 0:i.iter(function(r){return r[6][9]=S+r[6][4],0},c[18]);break;case 1:i.iter(function(r){return r[6][9]=S+(A-r[6][1])/2+r[6][4],0},c[18]);break;case 2:i.iter(function(r){return r[6][9]=S+A-r[6][1]+r[6][4],0},c[18])}}var F=Math.floor(v[8]+.5),I=Math.floor(v[9]+.5),q=Math.floor(v[6]+(v[8]-F)+.5),R=Math.floor(v[7]+(v[9]-I)+.5),G=Math.floor(v[0]+(v[8]-F)+.5),O=Math.floor(v[1]+(v[9]-I)+.5);c[7][0]=F,c[7][1]=I,c[7][2]=q,c[7][3]=R,c[8][0]=Math.floor(v[8]-v[2]+.5),c[8][1]=Math.floor(v[9]-v[4]+.5),c[8][2]=G,c[8][3]=O,c[9][0]=F,c[9][1]=n-I-R,c[9][2]=q,c[9][3]=R,c[10][0]=F/t*2-1,c[10][1]=1-I/n*2,c[10][2]=q/t*2,c[10][3]=R/n*2;var H,K=c[29];if(K){var j=K[0],$=q/t,W=R/n,X=c[32],Q=c[33];if(X){var Y=X[0];if(e.Texture[11](Y,r[4][0],0|c[7][2],0|c[7][3]),Q){var Z=(2*F+q)/t-1,J=(-2*I-R)/n+1,rr=a.Mat3[6]($,W,Z,J);e.Uniform[10](j,rr);var tr=a.Mat3[6](1,1,0,0);e.Uniform[10](Q[0],tr),H=[[F,I,q,R]]}else{var nr=a.Mat3[6](1,1,0,0);e.Uniform[10](j,nr),H=[[F,I,q,R]]}}else{var er,ar=(2*F+q)/t-1,ir=(-2*I-R)/n+1;if(f){var ur=f[0];er=a.Mat3[6](q/ur[2],R/ur[3],(2*(F-ur[0])+q)/ur[2]-1,(-2*(I-ur[1])-R)/ur[3]+1)}else er=a.Mat3[6]($,W,ar,ir);e.Uniform[10](j,er),H=f}}else H=f;var or=c[30];return or&&e.Uniform[7](or[0],a.Vec2[5](q,R)),i.iter(function(r){return o(r,0)},c[17]),i.iter(function(r){return o(r,H)},c[18]),_.iter(function(t,n){var i=n[0],u=i[2];if(u){var o=m.caml_array_get(r[15],u[0]),f=o?o[0][6]:d.failwith("Could not find texNode"),s=e.Texture[2](i[1]),_=s?s[0]:d.failwith("Could not get size of texture"),l=f[7][2]/_[0]/2*(f[7][2]/c[7][2]),v=f[7][3]/_[1]/2*(f[7][3]/c[7][3]),g=a.Mat3[6](l,v,l,v);return e.Uniform[10](n[1],g)}return 0},c[24])};return u(r[5],t,n),r[5][6][8]=0,r[5][6][9]=0,o(r[5],0),Y(r)}function J(r,t,n){var e=function(r,t){if(i.exists(function(t){return+(t===r[2])},n))return t;var a=i.fold_left(function(r,t){return[t[2],r]},t,r[17]);return i.fold_left(function(r,t){return e(t,r)},a,r[18])};return i.rev(i.fold_left(function(t,n){var a=m.caml_array_get(r[15],n),i=a?a[0][6]:d.failwith("Could not find node");return e(i,t)},0,t))}function rr(r,t){var n=m.caml_array_get(r[15],t);if(!n)return d.failwith("Could not find node");for(var e=n[0][6];;){var a=e;if(a[15])return 1;var i=a[37];if(!i)return 0;e=i[0]}}function tr(r){return r[0]||r[1],i.iter(function(r){return r[1],0},r[8]),i.iter(function(r){return r[5],0},r[10]),i.iter(tr,r[12]),i.iter(tr,r[13])}function nr(r){var t=function(n){for(;;){var e=n;if(e){var a=e[1],i=e[0];if(i[5]+=r[4][2],1!==i[6]&&v.mod_(i[7],i[6])||i[1](r,i),i[7]=i[7]+1|0,i[5]>=i[4]){i[2](r);var u=i[3];u&&f._1(u[0],r),n=a;continue}return[i,t(a)]}return 0}};r[12]=t(r[12]);var n=i.sort_uniq(function(r,t){return 0!=+(r<t)?-1:0!=+(r>t)?1:0},r[1]);r[1]=0;var e,a=r[17],u=[n,a],o=function(t,n){var e=J(r,[t,0],r[17]);return i.iter(function(t){if(_.mem(r[10],t))return 0;if(_.add(r[10],t,1),o(t,0),i.exists(function(r){return+(r===t)},n))return 0;var e=m.caml_array_get(r[15],t);if(e){var a=e[0],c=R(r,[t,0],a[6]);return j(r,c,0),r[8]?(console.log("==\nDep drawlist: "+A(a[6])),$(r,u,c),tr(a)):0}return d.failwith("Could not find dep node")},e)};if(_.mem(r[9],u))e=0;else{var c=i.filter(function(t){return 1-rr(r,t)})(n);_.add(r[9],u,1),i.iter(function(t){var e=m.caml_array_get(r[15],t);return e?e[0][2]?o(t,0):o(t,n):d.failwith("Could not find node")},c),e=[c]}if(!_.mem(r[7],u)){var s=e?e[0]:i.filter(function(t){return 1-rr(r,t)})(n),l=R(r,s,r[5]);_.add(r[7],u,l),r[8]&&$(r,u,_.find(r[7],u))}var g=i.partition(function(r){return r[16]},r[11]),y=g[1];if(r[11]=g[0],i.length(y)>0){var p=i.map(function(t){var n=t[4];return n&&n[0](t,r[0]),t[2]},y),b=R(r,p,r[5]);j(r,b,0)}if(j(r,_.find(r[7],u),0),r[8]){var w=m.caml_array_get(r[15],r[5][2]);w&&tr(w[0]);var x=r[4][0];x.enable(h.blend),x.blendFunc(h.src_alpha,h.one_minus_src_alpha),j(r,_.find(r[7],u),1),x.disable(h.blend)}var k=r[19];if(k){var M=k[0];if(r[19]=k[1],_.mem(r[10],M))return 0;_.add(r[10],M,1);var C=m.caml_array_get(r[15],M);if(C){var S=C[0],P=R(r,[M,0],S[6]);return j(r,P,0),r[8]?(console.log("==\nQueued dep drawlist: "+A(S[6])),$(r,[0,0],P),tr(S)):0}return d.failwith("Could not find dep node")}var T=r[18];return T?(r[18]=T[1],U(r,T[0])):0}function er(r,t){for(var n=t;;){var a=n;if(!a)return 0;var i=a[0];if("number"!=typeof i&&2===i.tag){var u=i[0];e.VertexBuffer[9](r[4][0],u[0]),e.IndexBuffer[7](r[4][0],u[1])}n=a[1]}}function ar(r){var t=e.Canvas[1](0);return e.Canvas[4](r[4],t[0],t[1]),_.iter(function(t,n){return er(r,n)},r[7]),_.clear(r[7]),_.clear(r[9]),_.clear(r[10]),Z(r),z(r,[r[5][2],0]),nr(r)}var ir=[function(r,t){return[0,r,t]},function(r,t){var n=r?r[0]:0;return[0,e.VertexBuffer[4](0,[n],0),[e.IndexBuffer[0](e.IndexBuffer[2](1),n)]]},function(r,t,n){e.VertexBuffer[6](t[1],n);var a=t[1][3]<<2,i=t[2];return i&&e.IndexBuffer[4](i[0],e.IndexBuffer[2](v.div(n.length,a))),z(r,t[0])}];function ur(r,t,n){return e.Uniform[6](t[1],n),z(r,t[0])}var or=[function(r){return[0,c.__(0,[[r]])]},function(){return[0,c.__(0,[[0]])]},function(){return[0,c.__(0,[[1]])]},ur];function cr(r,t,n){return e.Uniform[7](t[1],n),z(r,t[0])}var fr=[function(){return[0,c.__(2,[[a.Vec2[6](0)]])]},function(r,t){return[0,c.__(2,[[a.Vec2[5](r,t)]])]},function(r){return[0,c.__(2,[[a.Vec2[1](r)]])]},cr,function(r,t,n){return e.Uniform[7](t[1],a.Vec2[1](n)),z(r,t[0])},function(r){var t=r[1];return 2===t.tag?t[0][0]:d.failwith("Could not get vec2 uniform")}];function sr(r,t,n){return e.Uniform[8](t[1],n),z(r,t[0])}var _r=[function(){return[0,c.__(3,[[a.Vec3[10](0)]])]},function(r,t,n){return[0,c.__(3,[[a.Vec3[1](r,t,n)]])]},function(r){return[0,c.__(3,[[a.Vec3[3](r)]])]},function(r){return[0,c.__(3,[[r]])]},sr,function(r,t,n){return e.Uniform[8](t[1],a.Vec3[3](n)),z(r,t[0])},function(r,t){return e.Uniform[8](r[1],t)},function(r){var t=r[1];return 3===t.tag?t[0][0]:d.failwith("Could not get vec3 uniform")}],lr=[function(){return[0,c.__(4,[[a.Vec4[3](0)]])]},function(r,t,n,e){return[0,c.__(4,[[a.Vec4[1](r,t,n,e)]])]},function(r){return[0,c.__(4,[[a.Vec4[4](r)]])]},function(r){return[0,c.__(4,[[r]])]},function(r,t,n){return e.Uniform[9](t[1],n),z(r,t[0])},function(r,t,n){return e.Uniform[9](t[1],a.Vec4[4](n)),z(r,t[0])}];function mr(r,t,n){return e.Uniform[10](t[1],n),z(r,t[0])}var vr=[function(){return[0,c.__(5,[[a.Mat3[7](0)]])]},function(r){return[0,c.__(5,[[r]])]},mr];t.currNodeId=p,t.nextNodeId=b,t.quadVertices=w,t.quadIndices=x,t.nodeLayout=k,t.fromNodeLayout=M,t.SceneVO=[function(r,t){return[0,r,t]}],t.SceneTex=C,t.makeProgram=function(r,t,n,a,o,c,f,s,_,l,m,v,d,g){var h=n?n[0]:0,y=a?a[0]:0,p=o?o[0]:0,b=c?c[0]:0,w=_?_[0]:1,x=l?l[0]:0,k=m?m[0]:0,M=v?v[0]:0,C=d?d[0]:0;return[0,r,t,f,s,i.append(i.map(function(r){return r[0]},h),i.map(function(r){return r[0]},y)),u.listToTbl(h),u.listToTbl(y),i.append(i.map(function(r){return r[0]},p),i.map(function(r){return r[0]},b)),u.listToTbl(i.map(function(r){var t=r[1],n=r[0];return[n,[t,e.ProgramTexture[0](n,t[1])]]},p)),u.listToTbl(b),w,x,k,M,C]},t.defaultVo=function(){return[0,w,[x]]},t.makeNode=function(r,t,n,o,f,l,m,v,g,h,y,p,C,S,P,A,T,D,L,N,U,V,z,B,E,F,I,q,R,G,O,H,K,j,$,W,X){var Q,Y=m?m[0]:0,Z=v?v[0]:0,J=y?y[0]:0,rr=p?p[0]:1,tr=C?C[0]:0,nr=S?S[0]:0,er=P?P[0]:0,ar=A?A[0]:0,ir=I?I[0]:1,ur=q?q[0]:0,or=R?R[0]:0,cr=G?G[0]:0,fr=O?O[0]:0,sr=H?H[0]:0,_r=K?K[0]:0,lr=j?j[0]:0,mr=$?$[0]:0,vr=W?W[0]:0,dr=i.map(function(r){return r[0]},Z),gr=u.listToTbl(Z);if(f){var hr=f[0],yr=_.create(0,i.length(hr[8]));i.iter(function(r){if(_.mem(gr,r)){var t=_.find(gr,r),n=t[3];return n?_.add(yr,r,[t,n[0]]):0}var e=_.find(hr[9],r)[0];return e[3]?_.add(yr,r,[e,c.__(5,[[a.Mat3[7](0)]])]):0},hr[8]),Q=yr}else{var pr=_.create(0,_.length(gr));_.iter(function(r,t){var n=t[3];return n?_.add(pr,r,[t,n[0]]):0},gr),Q=pr}var br,wr=i.map(function(r){return r[0]},J),xr=u.listToTbl(J);if(f){var kr=f[0];i.iter(function(r){return _.mem(kr[7],r)||_.mem(kr[6],r)?0:d.failwith("Uniform with key not supported by program: "+r)},wr),_.iter(function(r,t){return _.mem(xr,r)?0:d.failwith("Required uniform: "+r+" not defined")},kr[7]),i.iter(function(r){return _.mem(kr[10],r)||_.mem(kr[9],r)?0:d.failwith("Texture with key not supported by program: "+r)},dr),_.iter(function(r,t){return _.mem(gr,r)?0:d.failwith("Required texture: "+r+" not defined")},kr[10])}if(f){var Mr=f[0];br=[Mr[11],Mr[12],Mr[13],Mr[14]]}else br=[0,0,0,0];var Cr,Sr=rr||br[0]?[c.__(5,[[a.Mat3[7](0)]])]:0,Pr=tr||br[1]?[c.__(2,[[a.Vec2[6](0)]])]:0,Ar=nr||br[2]?[c.__(0,[[0]])]:0,Tr=i.map(function(r){return[r[0],e.Uniform[2](r[1],c.__(5,[[a.Mat3[7](0)]]))]},er);Cr=h?[h[0]]:f&&f[0][4]?0:[[0,w,[x]]];var Dr,Lr,Nr=f?g?d.failwith("Attribs not usable when program is provided"):0:g||(Cr?[e.VertexBuffer[1](Cr[0][1])]:d.failwith("Attribs, program or vo is required")),Ur=F?M(T,[N],[U],[z],V,B,E,[D],[L],F[0]):k(T,N,U,z,V,B,E,D,L);if("number"==typeof lr)switch(lr){case 0:Dr=0;break;case 1:Dr=[e.Texture[6](0,0,0,0)];break;case 2:Dr=[e.Texture[7](0,0,0,0)];break;case 3:Dr=[e.Texture[8](0,0,0,0)]}else switch(0|lr.tag){case 0:var Vr=lr[0];Dr=[e.Texture[6]([Vr],[Vr],0,0)];break;case 1:var zr=lr[0];Dr=[e.Texture[7]([zr],[zr],0,0)];break;case 2:Dr=[lr[0]]}var Br=0;return"number"==typeof lr&&0===lr?Lr=0:Br=1,1===Br&&(Lr=0!==mr?[c.__(5,[[a.Mat3[7](0)]])]:0!==br[3]?[c.__(5,[[a.Mat3[7](0)]])]:0),[r,t,b(),0,l,Ur,[0,0,0,0,0,0,0,0,0,0],s.Rect[1](0),s.Rect[1](0),s.Rect[1](0),s.Rect[1](0),ir,or,cr,fr,sr,ur,_r,Y,n,o,f,dr,gr,Q,Cr,Nr,wr,xr,Sr,Pr,Ar,Dr,Lr,Tr,ar,vr,0,0]},t.setNodeParentsSceneKeyCls=S,t.buildUpdateTree=P,t.make=function(r,t,n,e,a,i){var u=e?e[0]:0,o=a?a[0]:1,c=0!==u?[[y.make(r)]]:0,f=[t,0,_.create(0,30),_.create(0,30),r,n,0,_.create(0,30),c,_.create(0,30),_.create(0,10),0,0,_.create(0,1),g.make(r),[],0,0,0,0,o,0];return S(f),f[16]=[P(f,f[5])],f},t.nodeDescr=A,t.nodeIdDescr=function(r,t){var n=m.caml_array_get(r[15],t);return n?A(n[0][6]):d.failwith("Could not find node with id: "+d.string_of_int(t))},t.createDrawStateUniforms=T,t.initSceneProgram=D,t.createProgramDrawState=L,t.createNodeDrawState=N,t.createDrawState=U,t.queueDrawStates=V,t.queueUpdates=z,t.makeAnim=function(r,t,n,e,a,i,u,o){return[e,r,t,u,n,0,i?i[0]:1,0,a]},t.clearAnim=function(r,t){return r[12]=i.filter(function(r){var n=r[0];return n?+(n[0]!==t):1})(r[12]),0},t.setChildToUpdate=B,t.setDepParentToUpdate=E,t.setToUpdate=F,t.actRectUntilCovered=I,t.setAdjecentStackedToUpdate=q,t.createDrawList=R,t.getFBuffer=G,t.debugNodes=0,t.bindDrawTexture=O,t.unbindDrawTexture=H,t.draw=K,t.Gl=0,t.processDrawList=j,t.logDrawList=$,t.getSceneNodesToUpdate=function(r,t){var n=function(t,e,a){var u=i.fold_left(function(r,t){return n(t,r,0)},0,t[17]),o=a||+(i.length(u)>0)||i.exists(function(r){return+(t[2]===r)},r),c=i.fold_left(function(r,t){return n(t,r,o)},e,t[18]),f=o&&t[11]?[t,c]:c;return i.fold_left(function(r,t){return[t,r]},f,u)};return n(t,0,0)},t.getNode=W,t.getNodeUnsafe=function(r,t){var n=W(r,t);return n?n[0]:d.failwith("Could not find node: "+t)},t.hideNode=X,t.hideNodeByKey=function(r,t){var n=W(r,t);return n?X(r,n[0]):d.failwith("Could not find node: "+t)},t.showNode=Q,t.showNodeByKey=function(r,t){var n=W(r,t);return n?Q(r,n[0]):d.failwith("Could not find node: "+t)},t.updateNodeScaled=Y,t.calcLayout=Z,t.collectDeps=J,t.isNodeHidden=rr,t.checkForCleanState=tr,t.update=nr,t.cleanUpDrawList=er,t.queueDeps=function(r,t){var n=function(t){var e=J(r,t,0);return e?i.append(n(e),e):0};return r[19]=n([t,0]),0},t.doResize=ar,t.run=function(r,t,n,a,i,u,o,c){var s=e.Canvas[3](r,t),_=[f._1(n,s)],m=f._2(a,s,_[0]);Z(m);var v=[0];return l.Gl[5](s[7],0,0,0,[function(r,t){return s[6][0]=r,!t&&u?(_[0]=f._2(u[0],_[0],s),0):0}],[function(){return 0}],[function(){return v[0]=[s[3]],0}],function(r){s[2]=r/1e3,s[3]+=s[2],m[6]||(z(m,[m[5][2],0]),nr(m),m[20]&&V(m),m[6]=1),_[0]=f._3(i,_[0],m,s);var t=v[0];return t&&s[3]>t[0]+.02?(v[0]=0,o&&f._1(o[0],_[0]),ar(m)):0},0)},t.doAnim=function(r,t){return r[12]=[t,r[12]],0},t.SVertexObject=ir,t.makeSceneUniform=function(r){return[0,r]},t.UFloat=or,t.UVec2f=fr,t.UVec3f=_r,t.UVec4f=lr,t.UMat3f=vr,t.setUniformFloat=function(r,t,n,e){return ur(r,_.find(t[28],n),e)},t.setUniformVec2f=function(r,t,n,e){return cr(r,_.find(t[28],n),e)},t.setUniformVec3f=function(r,t,n,e){return sr(r,_.find(t[28],n),e)},t.setUniformMat3f=function(r,t,n,e){return mr(r,_.find(t[28],n),e)}},function(r,t,n){"use strict";var e=["Out_of_memory",0],a=["Sys_error",-1],i=["Failure",-2],u=["Invalid_argument",-3],o=["End_of_file",-4],c=["Division_by_zero",-5],f=["Not_found",-6],s=["Match_failure",-7],_=["Stack_overflow",-8],l=["Sys_blocked_io",-9],m=["Assert_failure",-10],v=["Undefined_recursive_module",-11];e.tag=248,a.tag=248,i.tag=248,u.tag=248,o.tag=248,c.tag=248,f.tag=248,s.tag=248,_.tag=248,l.tag=248,m.tag=248,v.tag=248,t.out_of_memory=e,t.sys_error=a,t.failure=i,t.invalid_argument=u,t.end_of_file=o,t.division_by_zero=c,t.not_found=f,t.match_failure=s,t.stack_overflow=_,t.sys_blocked_io=l,t.assert_failure=m,t.undefined_recursive_module=v},function(r,t,n){"use strict";t.__=function(r,t){return t.tag=r,t}},function(r,t,n){"use strict";var e=n(2);t.caml_array_sub=function(r,t,n){for(var e=new Array(n),a=0,i=t;a<n;)e[a]=r[i],a=a+1|0,i=i+1|0;return e},t.caml_array_concat=function(r){var t=function(r,t){for(;;){var n=t,e=r;if(!n)return e;t=n[1],r=n[0].length+e|0}}(0,r),n=new Array(t);return function(r,t,n){for(;;){var e=n,a=t;if(!e)return 0;for(var i=e[0],u=i.length,o=a,c=0;c<u;)r[o]=i[c],o=o+1|0,c=c+1|0;n=e[1],t=o}}(n,0,r),n},t.caml_make_vect=function(r,t){for(var n=new Array(r),e=0,a=r-1|0;e<=a;++e)n[e]=t;return n},t.caml_array_blit=function(r,t,n,e,a){if(e<=t){for(var i=0,u=a-1|0;i<=u;++i)n[i+e|0]=r[i+t|0];return 0}for(var o=a-1|0;o>=0;--o)n[o+e|0]=r[o+t|0];return 0},t.caml_array_get=function(r,t){if(t<0||t>=r.length)throw[e.invalid_argument,"index out of bounds"];return r[t]},t.caml_array_set=function(r,t,n){if(t<0||t>=r.length)throw[e.invalid_argument,"index out of bounds"];return r[t]=n,0}},function(r,t,n){"use strict";var e=n(0),a=n(18),i=n(1),u=n(2);function o(r){for(var t=0,n=r;;){var e=n,a=t;if(!e)return a;n=e[1],t=a+1|0}}function c(r,t){for(;;){var n=t,e=r;if(!e)return n;t=[e[0],n],r=e[1]}}function f(r){return r?i.$at(r[0],f(r[1])):0}function s(r){return function(t){for(var n=0,a=t;;){var i=a,u=n;if(!i)return c(u,0);var o=i[1],f=i[0];e._1(r,f)?(a=o,n=[f,u]):a=o}}}function _(r,t){for(;;){var n=t,e=r;if(e){if(n){t=n[1],r=e-1|0;continue}throw[u.assert_failure,["list.ml",223,11]]}return n}}function l(r,t){var n=function(t,n){var i=0;if(2!==t)if(3!==t)i=1;else if(n){var u=n[1];if(u){var o=u[1];if(o){var f=o[0],s=u[0],l=n[0];return e._2(r,l,s)<=0?e._2(r,s,f)<=0?[l,[s,[f,0]]]:e._2(r,l,f)<=0?[l,[f,[s,0]]]:[f,[l,[s,0]]]:e._2(r,l,f)<=0?[s,[l,[f,0]]]:e._2(r,s,f)<=0?[s,[f,[l,0]]]:[f,[s,[l,0]]]}i=1}else i=1}else i=1;else if(n){var m=n[1];if(m){var v=m[0],d=n[0];return e._2(r,d,v)<=0?[d,[v,0]]:[v,[d,0]]}i=1}else i=1;if(1===i)for(var g=t>>1,h=t-g|0,y=_(g,n),p=a(g,n),b=a(h,y),w=0;;){var x=w,k=b,M=p;if(M){if(k){var C=k[0],S=M[0];if(e._2(r,S,C)>0){w=[S,x],p=M[1];continue}w=[C,x],b=k[1];continue}return c(M,x)}return c(k,x)}},a=function(t,a){var i=0;if(2!==t)if(3!==t)i=1;else if(a){var u=a[1];if(u){var o=u[1];if(o){var f=o[0],s=u[0],l=a[0];return e._2(r,l,s)>0?e._2(r,s,f)>0?[l,[s,[f,0]]]:e._2(r,l,f)>0?[l,[f,[s,0]]]:[f,[l,[s,0]]]:e._2(r,l,f)>0?[s,[l,[f,0]]]:e._2(r,s,f)>0?[s,[f,[l,0]]]:[f,[s,[l,0]]]}i=1}else i=1}else i=1;else if(a){var m=a[1];if(m){var v=m[0],d=a[0];return e._2(r,d,v)>0?[d,[v,0]]:[v,[d,0]]}i=1}else i=1;if(1===i)for(var g=t>>1,h=t-g|0,y=_(g,a),p=n(g,a),b=n(h,y),w=0;;){var x=w,k=b,M=p;if(M){if(k){var C=k[0],S=M[0];if(e._2(r,S,C)<=0){w=[S,x],p=M[1];continue}w=[C,x],b=k[1];continue}return c(M,x)}return c(k,x)}},i=o(t);return i<2?t:n(i,t)}var m=i.$at,v=f,d=s,g=l,h=l;t.length=o,t.hd=function(r){if(r)return r[0];throw[u.failure,"hd"]},t.tl=function(r){if(r)return r[1];throw[u.failure,"tl"]},t.nth=function(r,t){if(t<0)throw[u.invalid_argument,"List.nth"];for(var n=r,e=t;;){var a=n;if(a){if(e){e=e-1|0,n=a[1];continue}return a[0]}throw[u.failure,"nth"]}},t.rev=function(r){return c(r,0)},t.append=m,t.rev_append=c,t.concat=v,t.flatten=f,t.iter=function(r,t){for(;;){var n=t;if(!n)return 0;e._1(r,n[0]),t=n[1]}},t.iteri=function(r,t){for(var n=0,a=r,i=t;;){var u=i,o=n;if(!u)return 0;e._2(a,o,u[0]),i=u[1],n=o+1|0}},t.map=function r(t,n){return n?[e._1(t,n[0]),r(t,n[1])]:0},t.mapi=function(r,t){return function r(t,n,a){return a?[e._2(n,t,a[0]),r(t+1|0,n,a[1])]:0}(0,r,t)},t.rev_map=function(r,t){for(var n=0,a=t;;){var i=a,u=n;if(!i)return u;a=i[1],n=[e._1(r,i[0]),u]}},t.fold_left=function(r,t,n){for(;;){var a=n,i=t;if(!a)return i;n=a[1],t=e._2(r,i,a[0])}},t.fold_right=function r(t,n,a){return n?e._2(t,n[0],r(t,n[1],a)):a},t.iter2=function(r,t,n){for(;;){var a=n,i=t;if(i){if(a){e._2(r,i[0],a[0]),n=a[1],t=i[1];continue}throw[u.invalid_argument,"List.iter2"]}if(a)throw[u.invalid_argument,"List.iter2"];return 0}},t.map2=function r(t,n,a){if(n){if(a)return[e._2(t,n[0],a[0]),r(t,n[1],a[1])];throw[u.invalid_argument,"List.map2"]}if(a)throw[u.invalid_argument,"List.map2"];return 0},t.rev_map2=function(r,t,n){for(var a=0,i=t,o=n;;){var c=o,f=i,s=a;if(f){if(c){o=c[1],i=f[1],a=[e._2(r,f[0],c[0]),s];continue}throw[u.invalid_argument,"List.rev_map2"]}if(c)throw[u.invalid_argument,"List.rev_map2"];return s}},t.fold_left2=function(r,t,n,a){for(;;){var i=a,o=n,c=t;if(o){if(i){a=i[1],n=o[1],t=e._3(r,c,o[0],i[0]);continue}throw[u.invalid_argument,"List.fold_left2"]}if(i)throw[u.invalid_argument,"List.fold_left2"];return c}},t.fold_right2=function r(t,n,a,i){if(n){if(a)return e._3(t,n[0],a[0],r(t,n[1],a[1],i));throw[u.invalid_argument,"List.fold_right2"]}if(a)throw[u.invalid_argument,"List.fold_right2"];return i},t.for_all=function(r,t){for(;;){var n=t;if(n){if(e._1(r,n[0])){t=n[1];continue}return 0}return 1}},t.exists=function(r,t){for(;;){var n=t;if(!n)return 0;if(e._1(r,n[0]))return 1;t=n[1]}},t.for_all2=function(r,t,n){for(;;){var a=n,i=t;if(i){if(a){if(e._2(r,i[0],a[0])){n=a[1],t=i[1];continue}return 0}throw[u.invalid_argument,"List.for_all2"]}if(a)throw[u.invalid_argument,"List.for_all2"];return 1}},t.exists2=function(r,t,n){for(;;){var a=n,i=t;if(i){if(a){if(e._2(r,i[0],a[0]))return 1;n=a[1],t=i[1];continue}throw[u.invalid_argument,"List.exists2"]}if(a)throw[u.invalid_argument,"List.exists2"];return 0}},t.mem=function(r,t){for(;;){var n=t;if(n){if(a.caml_compare(n[0],r)){t=n[1];continue}return 1}return 0}},t.memq=function(r,t){for(;;){var n=t;if(!n)return 0;if(n[0]===r)return 1;t=n[1]}},t.find=function(r,t){for(;;){var n=t;if(!n)throw u.not_found;var a=n[0];if(e._1(r,a))return a;t=n[1]}},t.filter=d,t.find_all=s,t.partition=function(r,t){for(var n=0,a=0,i=t;;){var u=i,o=a,f=n;if(!u)return[c(f,0),c(o,0)];var s=u[1],_=u[0];e._1(r,_)?(i=s,n=[_,f]):(i=s,a=[_,o])}},t.assoc=function(r,t){for(;;){var n=t;if(n){var e=n[0];if(a.caml_compare(e[0],r)){t=n[1];continue}return e[1]}throw u.not_found}},t.assq=function(r,t){for(;;){var n=t;if(!n)throw u.not_found;var e=n[0];if(e[0]===r)return e[1];t=n[1]}},t.mem_assoc=function(r,t){for(;;){var n=t;if(n){if(a.caml_compare(n[0][0],r)){t=n[1];continue}return 1}return 0}},t.mem_assq=function(r,t){for(;;){var n=t;if(!n)return 0;if(n[0][0]===r)return 1;t=n[1]}},t.remove_assoc=function r(t,n){if(n){var e=n[1],i=n[0];return a.caml_compare(i[0],t)?[i,r(t,e)]:e}return 0},t.remove_assq=function r(t,n){if(n){var e=n[1],a=n[0];return a[0]===t?e:[a,r(t,e)]}return 0},t.split=function r(t){if(t){var n=t[0],e=r(t[1]);return[[n[0],e[0]],[n[1],e[1]]]}return[0,0]},t.combine=function r(t,n){if(t){if(n)return[[t[0],n[0]],r(t[1],n[1])];throw[u.invalid_argument,"List.combine"]}if(n)throw[u.invalid_argument,"List.combine"];return 0},t.sort=g,t.stable_sort=l,t.fast_sort=h,t.sort_uniq=function(r,t){var n=function(t,n){var i=0;if(2!==t)if(3!==t)i=1;else if(n){var u=n[1];if(u){var o=u[1];if(o){var f=o[0],s=u[0],l=n[0],m=e._2(r,l,s);if(m){if(m<0){var v=e._2(r,s,f);if(v){if(v<0)return[l,[s,[f,0]]];var d=e._2(r,l,f);return d?d<0?[l,[f,[s,0]]]:[f,[l,[s,0]]]:[l,[s,0]]}return[l,[s,0]]}var g=e._2(r,l,f);if(g){if(g<0)return[s,[l,[f,0]]];var h=e._2(r,s,f);return h?h<0?[s,[f,[l,0]]]:[f,[s,[l,0]]]:[s,[l,0]]}return[s,[l,0]]}var y=e._2(r,s,f);return y?y<0?[s,[f,0]]:[f,[s,0]]:[s,0]}i=1}else i=1}else i=1;else if(n){var p=n[1];if(p){var b=p[0],w=n[0],x=e._2(r,w,b);return x?x<0?[w,[b,0]]:[b,[w,0]]:[w,0]}i=1}else i=1;if(1===i)for(var k=t>>1,M=t-k|0,C=_(k,n),S=a(k,n),P=a(M,C),A=0;;){var T=A,D=P,L=S;if(L){if(D){var N=D[1],U=D[0],V=L[1],z=L[0],B=e._2(r,z,U);if(B){if(B>0){A=[z,T],S=V;continue}A=[U,T],P=N;continue}A=[z,T],P=N,S=V;continue}return c(L,T)}return c(D,T)}},a=function(t,a){var i=0;if(2!==t)if(3!==t)i=1;else if(a){var u=a[1];if(u){var o=u[1];if(o){var f=o[0],s=u[0],l=a[0],m=e._2(r,l,s);if(m){if(m>0){var v=e._2(r,s,f);if(v){if(v>0)return[l,[s,[f,0]]];var d=e._2(r,l,f);return d?d>0?[l,[f,[s,0]]]:[f,[l,[s,0]]]:[l,[s,0]]}return[l,[s,0]]}var g=e._2(r,l,f);if(g){if(g>0)return[s,[l,[f,0]]];var h=e._2(r,s,f);return h?h>0?[s,[f,[l,0]]]:[f,[s,[l,0]]]:[s,[l,0]]}return[s,[l,0]]}var y=e._2(r,s,f);return y?y>0?[s,[f,0]]:[f,[s,0]]:[s,0]}i=1}else i=1}else i=1;else if(a){var p=a[1];if(p){var b=p[0],w=a[0],x=e._2(r,w,b);return x?x>0?[w,[b,0]]:[b,[w,0]]:[w,0]}i=1}else i=1;if(1===i)for(var k=t>>1,M=t-k|0,C=_(k,a),S=n(k,a),P=n(M,C),A=0;;){var T=A,D=P,L=S;if(L){if(D){var N=D[1],U=D[0],V=L[1],z=L[0],B=e._2(r,z,U);if(B){if(B<0){A=[z,T],S=V;continue}A=[U,T],P=N;continue}A=[z,T],P=N,S=V;continue}return c(L,T)}return c(D,T)}},i=o(t);return i<2?t:n(i,t)},t.merge=function r(t,n,a){if(n){if(a){var i=a[0],u=n[0];return e._2(t,u,i)<=0?[u,r(t,n[1],a)]:[i,r(t,n,a[1])]}return n}return a}},function(r,t,n){"use strict";var e=n(2);function a(r){return(255&r)<<24|(65280&r)<<8|(16711680&r)>>>8|(4278190080&r)>>>24}var i=Math.imul||function(r,t){return((r>>16)*(t|=0)<<16)+(65535&r)*t|0},u=a;t.div=function(r,t){if(0===t)throw e.division_by_zero;return r/t|0},t.mod_=function(r,t){if(0===t)throw e.division_by_zero;return r%t},t.caml_bswap16=function(r){return(255&r)<<8|(65280&r)>>>8},t.caml_int32_bswap=a,t.caml_nativeint_bswap=u,t.imul=i},function(r,t,n){"use strict";t.__=function(r,t){return t.tag=r,t}},function(r,t,n){"use strict";var e=n(17);function a(r,t){for(;;){var n=t,i=r,u=i.length||1,o=u-n.length|0;if(o){if(o<0){t=e.caml_array_sub(n,u,0|-o),r=i.apply(null,e.caml_array_sub(n,0,u));continue}return function(r,t){return function(n){return a(r,t.concat([n]))}}(i,n)}return i.apply(null,n)}}function i(r,t,n){if(n>7||n<0)return a(r,[t]);switch(n){case 0:case 1:return r(t);case 2:return function(n){return r(t,n)};case 3:return function(n,e){return r(t,n,e)};case 4:return function(n,e,a){return r(t,n,e,a)};case 5:return function(n,e,a,i){return r(t,n,e,a,i)};case 6:return function(n,e,a,i,u){return r(t,n,e,a,i,u)};case 7:return function(n,e,a,i,u,o){return r(t,n,e,a,i,u,o)}}}function u(r,t){var n=r.length;return 1===n?r(t):i(r,t,n)}function o(r,t,n,e){if(e>7||e<0)return a(r,[t,n]);switch(e){case 0:case 1:return a(r(t),[n]);case 2:return r(t,n);case 3:return function(e){return r(t,n,e)};case 4:return function(e,a){return r(t,n,e,a)};case 5:return function(e,a,i){return r(t,n,e,a,i)};case 6:return function(e,a,i,u){return r(t,n,e,a,i,u)};case 7:return function(e,a,i,u,o){return r(t,n,e,a,i,u,o)}}}function c(r,t,n){var e=r.length;return 2===e?r(t,n):o(r,t,n,e)}function f(r,t,n,e,i){var u=0;if(i>7||i<0)return a(r,[t,n,e]);switch(i){case 0:case 1:u=1;break;case 2:return a(r(t,n),[e]);case 3:return r(t,n,e);case 4:return function(a){return r(t,n,e,a)};case 5:return function(a,i){return r(t,n,e,a,i)};case 6:return function(a,i,u){return r(t,n,e,a,i,u)};case 7:return function(a,i,u,o){return r(t,n,e,a,i,u,o)}}return 1===u?a(r(t),[n,e]):void 0}function s(r,t,n,e){var a=r.length;return 3===a?r(t,n,e):f(r,t,n,e,a)}function _(r,t,n,e,i,u){var o=0;if(u>7||u<0)return a(r,[t,n,e,i]);switch(u){case 0:case 1:o=1;break;case 2:return a(r(t,n),[e,i]);case 3:return a(r(t,n,e),[i]);case 4:return r(t,n,e,i);case 5:return function(a){return r(t,n,e,i,a)};case 6:return function(a,u){return r(t,n,e,i,a,u)};case 7:return function(a,u,o){return r(t,n,e,i,a,u,o)}}return 1===o?a(r(t),[n,e,i]):void 0}function l(r,t,n,e,a){var i=r.length;return 4===i?r(t,n,e,a):_(r,t,n,e,a,i)}function m(r,t,n,e,i,u,o){var c=0;if(o>7||o<0)return a(r,[t,n,e,i,u]);switch(o){case 0:case 1:c=1;break;case 2:return a(r(t,n),[e,i,u]);case 3:return a(r(t,n,e),[i,u]);case 4:return a(r(t,n,e,i),[u]);case 5:return r(t,n,e,i,u);case 6:return function(a){return r(t,n,e,i,u,a)};case 7:return function(a,o){return r(t,n,e,i,u,a,o)}}return 1===c?a(r(t),[n,e,i,u]):void 0}function v(r,t,n,e,a,i){var u=r.length;return 5===u?r(t,n,e,a,i):m(r,t,n,e,a,i,u)}function d(r,t,n,e,i,u,o,c){var f=0;if(c>7||c<0)return a(r,[t,n,e,i,u,o]);switch(c){case 0:case 1:f=1;break;case 2:return a(r(t,n),[e,i,u,o]);case 3:return a(r(t,n,e),[i,u,o]);case 4:return a(r(t,n,e,i),[u,o]);case 5:return a(r(t,n,e,i,u),[o]);case 6:return r(t,n,e,i,u,o);case 7:return function(a){return r(t,n,e,i,u,o,a)}}return 1===f?a(r(t),[n,e,i,u,o]):void 0}function g(r,t,n,e,a,i,u){var o=r.length;return 6===o?r(t,n,e,a,i,u):d(r,t,n,e,a,i,u,o)}function h(r,t,n,e,i,u,o,c,f){var s=0;if(f>7||f<0)return a(r,[t,n,e,i,u,o,c]);switch(f){case 0:case 1:s=1;break;case 2:return a(r(t,n),[e,i,u,o,c]);case 3:return a(r(t,n,e),[i,u,o,c]);case 4:return a(r(t,n,e,i),[u,o,c]);case 5:return a(r(t,n,e,i,u),[o,c]);case 6:return a(r(t,n,e,i,u,o),[c]);case 7:return r(t,n,e,i,u,o,c)}return 1===s?a(r(t),[n,e,i,u,o,c]):void 0}function y(r,t,n,e,a,i,u,o){var c=r.length;return 7===c?r(t,n,e,a,i,u,o):h(r,t,n,e,a,i,u,o,c)}function p(r,t,n,e,i,u,o,c,f,s){var _=0;if(s>7||s<0)return a(r,[t,n,e,i,u,o,c,f]);switch(s){case 0:case 1:_=1;break;case 2:return a(r(t,n),[e,i,u,o,c,f]);case 3:return a(r(t,n,e),[i,u,o,c,f]);case 4:return a(r(t,n,e,i),[u,o,c,f]);case 5:return a(r(t,n,e,i,u),[o,c,f]);case 6:return a(r(t,n,e,i,u,o),[c,f]);case 7:return a(r(t,n,e,i,u,o,c),[f])}return 1===_?a(r(t),[n,e,i,u,o,c,f]):void 0}function b(r,t,n,e,a,i,u,o,c){var f=r.length;return 8===f?r(t,n,e,a,i,u,o,c):p(r,t,n,e,a,i,u,o,c,f)}t.app=a,t.curry_1=i,t._1=u,t.__1=function(r){return 1===r.length?r:function(t){return u(r,t)}},t.curry_2=o,t._2=c,t.__2=function(r){return 2===r.length?r:function(t,n){return c(r,t,n)}},t.curry_3=f,t._3=s,t.__3=function(r){return 3===r.length?r:function(t,n,e){return s(r,t,n,e)}},t.curry_4=_,t._4=l,t.__4=function(r){return 4===r.length?r:function(t,n,e,a){return l(r,t,n,e,a)}},t.curry_5=m,t._5=v,t.__5=function(r){return 5===r.length?r:function(t,n,e,a,i){return v(r,t,n,e,a,i)}},t.curry_6=d,t._6=g,t.__6=function(r){return 6===r.length?r:function(t,n,e,a,i,u){return g(r,t,n,e,a,i,u)}},t.curry_7=h,t._7=y,t.__7=function(r){return 7===r.length?r:function(t,n,e,a,i,u,o){return y(r,t,n,e,a,i,u,o)}},t.curry_8=p,t._8=b,t.__8=function(r){return 8===r.length?r:function(t,n,e,a,i,u,o,c){return b(r,t,n,e,a,i,u,o,c)}}},function(r,t,n){"use strict";var e=n(2);function a(r,t,n,e,a){if(a>0){if(r===n){var i=r,u=t,o=e,c=a;if(u<o){for(var f=(i.length-o|0)-1|0,s=c-1|0,_=f>s?s:f;_>=0;--_)i[o+_|0]=i[u+_|0];return 0}if(u>o){for(var l=(i.length-u|0)-1|0,m=c-1|0,v=l>m?m:l,d=0;d<=v;++d)i[o+d|0]=i[u+d|0];return 0}return 0}var g=r.length-t|0;if(a<=g){for(var h=0,y=a-1|0;h<=y;++h)n[e+h|0]=r[t+h|0];return 0}for(var p=0,b=g-1|0;p<=b;++p)n[e+p|0]=r[t+p|0];for(var w=g,x=a-1|0;w<=x;++w)n[e+w|0]=0;return 0}return 0}function i(r){var t=r,n=r.length,e="",i=n;if(n<=4096&&n===t.length)return String.fromCharCode.apply(null,t);for(var u=0;i>0;){var o=i<1024?i:1024,c=new Array(o);a(t,u,c,0,o),e+=String.fromCharCode.apply(null,c),i=i-o|0,u=u+o|0}return e}t.bytes_of_string=function(r){for(var t=r.length,n=new Array(t),e=0,a=t-1|0;e<=a;++e)n[e]=r.charCodeAt(e);return n},t.bytes_to_string=i,t.caml_is_printable=function(r){return r>31?+(r<127):0},t.caml_string_of_char_array=function(r){for(var t=r.length,n=new Array(t),e=0,a=t-1|0;e<=a;++e)n[e]=r[e];return i(n)},t.caml_string_get=function(r,t){if(t>=r.length||t<0)throw[e.invalid_argument,"index out of bounds"];return r.charCodeAt(t)},t.caml_string_compare=function(r,t){return r===t?0:r<t?-1:1},t.caml_create_string=function(r){if(r<0)throw[e.invalid_argument,"String.create"];return new Array(r)},t.caml_fill_string=function(r,t,n,e){if(n>0){for(var a=t,i=(n+t|0)-1|0;a<=i;++a)r[a]=e;return 0}return 0},t.caml_blit_string=function(r,t,n,e,a){if(a>0){var i=r.length-t|0;if(a<=i){for(var u=0,o=a-1|0;u<=o;++u)n[e+u|0]=r.charCodeAt(t+u|0);return 0}for(var c=0,f=i-1|0;c<=f;++c)n[e+c|0]=r.charCodeAt(t+c|0);for(var s=i,_=a-1|0;s<=_;++s)n[e+s|0]=0;return 0}return 0},t.caml_blit_bytes=a,t.caml_string_get16=function(r,t){return r.charCodeAt(t)+(r.charCodeAt(t+1|0)<<8)|0},t.caml_string_get32=function(r,t){return((r.charCodeAt(t)+(r.charCodeAt(t+1|0)<<8)|0)+(r.charCodeAt(t+2|0)<<16)|0)+(r.charCodeAt(t+3|0)<<24)|0},t.string_of_char=function(r){return String.fromCharCode(r)},t.get=function(r,t){if(t<0||t>=r.length)throw[e.invalid_argument,"index out of bounds"];return r.charCodeAt(t)}},function(r,t,n){"use strict";var e=n(7),a=n(1),i=[function(r){return r},function(r){return 2!==r.length&&a.failwith("Array does not have 2 elements for vec2"),r},function(r){return e.caml_array_get(r,0)},function(r){return e.caml_array_get(r,1)},function(r,t,n){return e.caml_array_set(r,0,t),e.caml_array_set(r,1,n)},function(r,t){return[r,t]},function(){return[0,0]},function(r){return"vec2("+a.string_of_float(e.caml_array_get(r,0))+","+a.string_of_float(e.caml_array_get(r,1))+")"}],u=[function(r){return r},function(r,t,n){return[r,t,n]},function(r,t){return[e.caml_array_get(r,0),e.caml_array_get(r,1),t]},function(r){return 3!==r.length&&a.failwith("Array does not have 3 elements for vec3"),r},function(r){return e.caml_array_get(r,0)},function(r){return e.caml_array_get(r,1)},function(r){return e.caml_array_get(r,2)},function(r,t){return e.caml_array_set(r,0,t)},function(r,t){return e.caml_array_set(r,1,t)},function(r,t){return e.caml_array_set(r,2,t)},function(){return[0,0,0]},function(r){var t=Math.sqrt(e.caml_array_get(r,0)*e.caml_array_get(r,0)+e.caml_array_get(r,1)*e.caml_array_get(r,1)+e.caml_array_get(r,2)*e.caml_array_get(r,2));return[e.caml_array_get(r,0)/t,e.caml_array_get(r,1)/t,e.caml_array_get(r,2)/t]},function(r,t){return[e.caml_array_get(r,0)*e.caml_array_get(t,0)+e.caml_array_get(r,1)*e.caml_array_get(t,1)+e.caml_array_get(r,2)*e.caml_array_get(t,2)]},function(r,t){return[e.caml_array_get(r,1)*e.caml_array_get(t,2)-e.caml_array_get(r,2)*e.caml_array_get(t,1),e.caml_array_get(r,2)*e.caml_array_get(t,0)-e.caml_array_get(r,0)*e.caml_array_get(t,2),e.caml_array_get(r,0)*e.caml_array_get(t,1)-e.caml_array_get(r,1)*e.caml_array_get(t,0)]},function(r){return"vec3("+a.string_of_float(e.caml_array_get(r,0))+","+a.string_of_float(e.caml_array_get(r,1))+","+a.string_of_float(e.caml_array_get(r,2))+")"}],o=[function(r){return r},function(r,t,n,e){return[r,t,n,e]},function(r,t){return[e.caml_array_get(r,0),e.caml_array_get(r,1),e.caml_array_get(r,2),t]},function(){return[0,0,0,0]},function(r){return 4!==r.length&&a.failwith("Array does not have 4 elements for vec4"),r},function(r){return"vec4("+a.string_of_float(e.caml_array_get(r,0))+","+a.string_of_float(e.caml_array_get(r,1))+","+a.string_of_float(e.caml_array_get(r,2))+","+a.string_of_float(e.caml_array_get(r,3))+")"}],c=[function(r){return r},function(r){return 9!==r.length&&a.failwith("Array does not have 9 elements for mat3"),r},function(r,t){return[e.caml_array_get(r,0)*e.caml_array_get(t,0)+e.caml_array_get(r,1)*e.caml_array_get(t,1)+e.caml_array_get(r,2)*e.caml_array_get(t,2),e.caml_array_get(r,3)*e.caml_array_get(t,0)+e.caml_array_get(r,4)*e.caml_array_get(t,1)+e.caml_array_get(r,5)*e.caml_array_get(t,2),e.caml_array_get(r,6)*e.caml_array_get(t,0)+e.caml_array_get(r,7)*e.caml_array_get(t,1)+e.caml_array_get(r,8)*e.caml_array_get(t,2)]},function(r,t){return[e.caml_array_get(r,0)*e.caml_array_get(t,0)+e.caml_array_get(r,1)*e.caml_array_get(t,3)+e.caml_array_get(r,2)*e.caml_array_get(t,6),e.caml_array_get(r,0)*e.caml_array_get(t,1)+e.caml_array_get(r,1)*e.caml_array_get(t,4)+e.caml_array_get(r,2)*e.caml_array_get(t,7),e.caml_array_get(r,0)*e.caml_array_get(t,2)+e.caml_array_get(r,1)*e.caml_array_get(t,5)+e.caml_array_get(r,2)*e.caml_array_get(t,8),e.caml_array_get(r,3)*e.caml_array_get(t,0)+e.caml_array_get(r,4)*e.caml_array_get(t,3)+e.caml_array_get(r,5)*e.caml_array_get(t,6),e.caml_array_get(r,3)*e.caml_array_get(t,1)+e.caml_array_get(r,4)*e.caml_array_get(t,4)+e.caml_array_get(r,5)*e.caml_array_get(t,7),e.caml_array_get(r,3)*e.caml_array_get(t,2)+e.caml_array_get(r,4)*e.caml_array_get(t,5)+e.caml_array_get(r,5)*e.caml_array_get(t,8),e.caml_array_get(r,6)*e.caml_array_get(t,0)+e.caml_array_get(r,7)*e.caml_array_get(t,3)+e.caml_array_get(r,8)*e.caml_array_get(t,6),e.caml_array_get(r,6)*e.caml_array_get(t,1)+e.caml_array_get(r,7)*e.caml_array_get(t,4)+e.caml_array_get(r,8)*e.caml_array_get(t,7),e.caml_array_get(r,6)*e.caml_array_get(t,2)+e.caml_array_get(r,7)*e.caml_array_get(t,5)+e.caml_array_get(r,8)*e.caml_array_get(t,8)]},function(r,t){return[r,0,0,0,t,0,0,0,1]},function(r,t){return[1,0,r,0,1,t,0,0,1]},function(r,t,n,e){return[r,0,n,0,t,e,0,0,1]},function(){return[1,0,0,0,1,0,0,0,1]}],f=[function(r){return r},function(r,t){return[e.caml_array_get(r,0)*e.caml_array_get(t,0)+e.caml_array_get(r,1)*e.caml_array_get(t,4)+e.caml_array_get(r,2)*e.caml_array_get(t,8)+e.caml_array_get(r,3)*e.caml_array_get(t,12),e.caml_array_get(r,0)*e.caml_array_get(t,1)+e.caml_array_get(r,1)*e.caml_array_get(t,5)+e.caml_array_get(r,2)*e.caml_array_get(t,9)+e.caml_array_get(r,3)*e.caml_array_get(t,13),e.caml_array_get(r,0)*e.caml_array_get(t,2)+e.caml_array_get(r,1)*e.caml_array_get(t,6)+e.caml_array_get(r,2)*e.caml_array_get(t,10)+e.caml_array_get(r,3)*e.caml_array_get(t,14),e.caml_array_get(r,0)*e.caml_array_get(t,3)+e.caml_array_get(r,1)*e.caml_array_get(t,7)+e.caml_array_get(r,2)*e.caml_array_get(t,11)+e.caml_array_get(r,3)*e.caml_array_get(t,15),e.caml_array_get(r,4)*e.caml_array_get(t,0)+e.caml_array_get(r,5)*e.caml_array_get(t,4)+e.caml_array_get(r,6)*e.caml_array_get(t,8)+e.caml_array_get(r,7)*e.caml_array_get(t,12),e.caml_array_get(r,4)*e.caml_array_get(t,1)+e.caml_array_get(r,5)*e.caml_array_get(t,5)+e.caml_array_get(r,6)*e.caml_array_get(t,9)+e.caml_array_get(r,7)*e.caml_array_get(t,13),e.caml_array_get(r,4)*e.caml_array_get(t,2)+e.caml_array_get(r,5)*e.caml_array_get(t,6)+e.caml_array_get(r,6)*e.caml_array_get(t,10)+e.caml_array_get(r,7)*e.caml_array_get(t,14),e.caml_array_get(r,4)*e.caml_array_get(t,3)+e.caml_array_get(r,5)*e.caml_array_get(t,7)+e.caml_array_get(r,6)*e.caml_array_get(t,11)+e.caml_array_get(r,7)*e.caml_array_get(t,15),e.caml_array_get(r,8)*e.caml_array_get(t,0)+e.caml_array_get(r,9)*e.caml_array_get(t,3)+e.caml_array_get(r,10)*e.caml_array_get(t,8)+e.caml_array_get(r,11)*e.caml_array_get(t,12),e.caml_array_get(r,8)*e.caml_array_get(t,1)+e.caml_array_get(r,9)*e.caml_array_get(t,4)+e.caml_array_get(r,10)*e.caml_array_get(t,9)+e.caml_array_get(r,11)*e.caml_array_get(t,13),e.caml_array_get(r,8)*e.caml_array_get(t,2)+e.caml_array_get(r,9)*e.caml_array_get(t,5)+e.caml_array_get(r,10)*e.caml_array_get(t,10)+e.caml_array_get(r,11)*e.caml_array_get(t,14),e.caml_array_get(r,8)*e.caml_array_get(t,3)+e.caml_array_get(r,9)*e.caml_array_get(t,5)+e.caml_array_get(r,10)*e.caml_array_get(t,11)+e.caml_array_get(r,11)*e.caml_array_get(t,15),e.caml_array_get(r,12)*e.caml_array_get(t,0)+e.caml_array_get(r,13)*e.caml_array_get(t,3)+e.caml_array_get(r,14)*e.caml_array_get(t,8)+e.caml_array_get(r,15)*e.caml_array_get(t,12),e.caml_array_get(r,12)*e.caml_array_get(t,1)+e.caml_array_get(r,13)*e.caml_array_get(t,4)+e.caml_array_get(r,14)*e.caml_array_get(t,9)+e.caml_array_get(r,15)*e.caml_array_get(t,13),e.caml_array_get(r,12)*e.caml_array_get(t,2)+e.caml_array_get(r,13)*e.caml_array_get(t,5)+e.caml_array_get(r,14)*e.caml_array_get(t,10)+e.caml_array_get(r,15)*e.caml_array_get(t,14),e.caml_array_get(r,12)*e.caml_array_get(t,3)+e.caml_array_get(r,13)*e.caml_array_get(t,5)+e.caml_array_get(r,14)*e.caml_array_get(t,11)+e.caml_array_get(r,15)*e.caml_array_get(t,15)]},function(r,t,n){return[r,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1]},function(r,t,n){return[1,0,0,r,0,1,0,t,0,0,1,n,0,0,0,1]},function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}];t.Vec2=i,t.Vec3=u,t.Vec4=o,t.Mat3=c,t.Mat4=f},function(r,t,n){"use strict";var e=n(5);function a(r){return(255&r)<<24|(65280&r)<<8|(16711680&r)>>>8|(4278190080&r)>>>24}var i=Math.imul||function(r,t){return((r>>16)*(t|=0)<<16)+(65535&r)*t|0},u=a;t.div=function(r,t){if(0===t)throw e.division_by_zero;return r/t|0},t.mod_=function(r,t){if(0===t)throw e.division_by_zero;return r%t},t.caml_bswap16=function(r){return(255&r)<<8|(65280&r)>>>8},t.caml_int32_bswap=a,t.caml_nativeint_bswap=u,t.imul=i},function(r,t,n){"use strict";var e=n(11),a=n(119),i=n(16),u=n(56),o=n(35),c=n(21),f=n(26),s=n(25),_=n(5),l=n(118),m=f.create("Pervasives.Exit");function v(r,t){return r+t}function d(r){for(var t=r.length,n=0;;){var e=n;if(e>=t)return v(r,".");var a=c.get(r,e);if(a>=48){if(a>=58)return r;n=e+1|0}else{if(45!==a)return r;n=e+1|0}}}var g=a.stdin,h=a.stdout,y=a.stderr;function p(r,t,n){return a.caml_ml_open_descriptor_out(s.not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function b(){for(var r=a.caml_ml_out_channels_list(0);;){var t=r;if(!t)return 0;try{a.caml_ml_flush(t[0])}catch(r){}r=t[1]}}function w(r,t){return a.caml_ml_output(r,t,0,t.length)}function x(r,t){return a.caml_ml_output(r,t,0,t.length)}function k(r,t,n){return a.caml_ml_open_descriptor_in(s.not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function M(r,t,n,e){for(;;){var a=e,i=n;if(a<=0)return 0;var u=s.not_implemented("caml_ml_input not implemented by bucklescript yet\n");if(!u)throw _.end_of_file;e=a-u|0,n=i+u|0}}function C(r,t,n,e){if(n<0||e<0||n>(t.length-e|0))throw[_.invalid_argument,"really_input"];return M(0,0,n,e)}function S(r){var t=function(r,t,n){for(;;){var e=n,a=t;if(!e)return r;var i=e[0],u=i.length;c.caml_blit_bytes(i,0,r,a-u|0,u),n=e[1],t=a-u|0}};return c.bytes_to_string(function(n,e){for(;;){var i=e,u=n,o=s.not_implemented("caml_ml_input_scan_line not implemented by bucklescript yet\n");if(!o){if(u)return t(c.caml_create_string(i),i,u);throw _.end_of_file}if(o>0){var f=c.caml_create_string(o-1|0);if(s.not_implemented("caml_ml_input not implemented by bucklescript yet\n"),a.caml_ml_input_char(r),u){var l=(i+o|0)-1|0;return t(c.caml_create_string(l),l,[f,u])}return f}var m=c.caml_create_string(0|-o);s.not_implemented("caml_ml_input not implemented by bucklescript yet\n"),e=i-o|0,n=[m,u]}}(0,0))}var P=[b];function A(){return e._1(P[0],0)}var T=Number.MAX_VALUE,D=Number.MIN_VALUE,L=a.caml_ml_flush,N=a.caml_ml_output_char,U=a.caml_ml_output_char,V=a.caml_ml_input_char,z=a.caml_ml_input_char,B=[function(r,t){return s.not_implemented("caml_ml_seek_out_64 not implemented by bucklescript yet\n")},function(){return s.not_implemented("caml_ml_pos_out_64 not implemented by bucklescript yet\n")},function(){return s.not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")},function(r,t){return s.not_implemented("caml_ml_seek_in_64 not implemented by bucklescript yet\n")},function(){return s.not_implemented("caml_ml_pos_in_64 not implemented by bucklescript yet\n")},function(){return s.not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")}];t.invalid_arg=function(r){throw[_.invalid_argument,r]},t.failwith=function(r){throw[_.failure,r]},t.Exit=m,t.min=function(r,t){return i.caml_lessequal(r,t)?r:t},t.max=function(r,t){return i.caml_greaterequal(r,t)?r:t},t.abs=function(r){return r>=0?r:0|-r},t.max_int=2147483647,t.min_int=-2147483648,t.lnot=function(r){return-1^r},t.infinity=1/0,t.neg_infinity=-1/0,t.nan=NaN,t.max_float=T,t.min_float=D,t.epsilon_float=2.220446049250313e-16,t.$caret=v,t.char_of_int=function(r){if(r<0||r>255)throw[_.invalid_argument,"char_of_int"];return r},t.string_of_bool=function(r){return r?"true":"false"},t.bool_of_string=function(r){switch(r){case"false":return 0;case"true":return 1;default:throw[_.invalid_argument,"bool_of_string"]}},t.string_of_int=function(r){return""+r},t.string_of_float=function(r){return d(o.caml_format_float("%.12g",r))},t.$at=function r(t,n){return t?[t[0],r(t[1],n)]:n},t.stdin=g,t.stdout=h,t.stderr=y,t.print_char=function(r){return a.caml_ml_output_char(h,r)},t.print_string=function(r){return x(h,r)},t.print_bytes=function(r){return w(h,r)},t.print_int=function(r){return x(h,""+r)},t.print_float=function(r){return x(h,d(o.caml_format_float("%.12g",r)))},t.print_endline=function(r){return console.log(r),0},t.print_newline=function(){return a.caml_ml_output_char(h,10),a.caml_ml_flush(h)},t.prerr_char=function(r){return a.caml_ml_output_char(y,r)},t.prerr_string=function(r){return x(y,r)},t.prerr_bytes=function(r){return w(y,r)},t.prerr_int=function(r){return x(y,""+r)},t.prerr_float=function(r){return x(y,d(o.caml_format_float("%.12g",r)))},t.prerr_endline=function(r){return console.error(r),0},t.prerr_newline=function(){return a.caml_ml_output_char(y,10),a.caml_ml_flush(y)},t.read_line=function(){return a.caml_ml_flush(h),S(g)},t.read_int=function(){return o.caml_int_of_string((a.caml_ml_flush(h),S(g)))},t.read_float=function(){return o.caml_float_of_string((a.caml_ml_flush(h),S(g)))},t.open_out=function(r){return p()},t.open_out_bin=function(r){return p()},t.open_out_gen=p,t.flush=L,t.flush_all=b,t.output_char=N,t.output_string=x,t.output_bytes=w,t.output=function(r,t,n,e){if(n<0||e<0||n>(t.length-e|0))throw[_.invalid_argument,"output"];return a.caml_ml_output(r,t,n,e)},t.output_substring=function(r,t,n,e){if(n<0||e<0||n>(t.length-e|0))throw[_.invalid_argument,"output_substring"];return a.caml_ml_output(r,t,n,e)},t.output_byte=U,t.output_binary_int=function(r,t){return s.not_implemented("caml_ml_output_int not implemented by bucklescript yet\n")},t.output_value=function(r,t){return s.not_implemented("caml_output_value not implemented by bucklescript yet\n")},t.seek_out=function(r,t){return s.not_implemented("caml_ml_seek_out not implemented by bucklescript yet\n")},t.pos_out=function(){return s.not_implemented("caml_ml_pos_out not implemented by bucklescript yet\n")},t.out_channel_length=function(){return s.not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")},t.close_out=function(r){return a.caml_ml_flush(r),s.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")},t.close_out_noerr=function(r){try{a.caml_ml_flush(r)}catch(r){}try{return s.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(r){return 0}},t.set_binary_mode_out=function(r,t){return s.not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")},t.open_in=function(r){return k()},t.open_in_bin=function(r){return k()},t.open_in_gen=k,t.input_char=V,t.input_line=S,t.input=function(r,t,n,e){if(n<0||e<0||n>(t.length-e|0))throw[_.invalid_argument,"input"];return s.not_implemented("caml_ml_input not implemented by bucklescript yet\n")},t.really_input=C,t.really_input_string=function(r,t){var n=c.caml_create_string(t);return C(0,n,0,t),c.bytes_to_string(n)},t.input_byte=z,t.input_binary_int=function(){return s.not_implemented("caml_ml_input_int not implemented by bucklescript yet\n")},t.input_value=function(){return s.not_implemented("caml_input_value not implemented by bucklescript yet\n")},t.seek_in=function(r,t){return s.not_implemented("caml_ml_seek_in not implemented by bucklescript yet\n")},t.pos_in=function(){return s.not_implemented("caml_ml_pos_in not implemented by bucklescript yet\n")},t.in_channel_length=function(){return s.not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")},t.close_in=function(){return s.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")},t.close_in_noerr=function(){try{return s.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(r){return 0}},t.set_binary_mode_in=function(r,t){return s.not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")},t.LargeFile=B,t.string_of_format=function(r){return r[1]},t.$caret$caret=function(r,t){return[l.concat_fmt(r[0],t[0]),v(r[1],v("%,",t[1]))]},t.exit=function(r){return A(),u.caml_sys_exit(r)},t.at_exit=function(r){var t=P[0];return P[0]=function(){return e._1(r,0),e._1(t,0)},0},t.valid_float_lexem=d,t.unsafe_really_input=M,t.do_at_exit=A},function(r,t,n){"use strict";var e=n(10),a=n(5);function i(r,t){return r<t?-1:r===t?0:1}function u(r,t){for(;;){var n=t,e=r;if(e===n)return 0;var o=typeof e,c=typeof n;if("string"===o)return e<n?-1:e===n?0:1;var f=+("number"===c);if(0!=+("number"===o))return 0!==f?i(e,n):-1;if(0!==f)return 1;if("boolean"===o||"undefined"===o||null===e)return e===n?0:e<n?-1:1;if("function"===o||"function"===c)throw[a.invalid_argument,"compare: functional value"];var s=0|e.tag,_=0|n.tag;if(250!==s)if(250!==_){if(248===s)return i(e[1],n[1]);if(251===s)throw[a.invalid_argument,"equal: abstract value"];if(s!==_)return s<_?-1:1;var l=0|e.length,m=0|n.length;if(l===m)for(var v=e,d=n,g=0,h=l;;){var y=g;if(y===h)return 0;var p=u(v[y],d[y]);if(0!==p)return p;g=y+1|0}else if(l<m)for(var b=e,w=n,x=0,k=l;;){var M=x;if(M===k)return-1;var C=u(b[M],w[M]);if(0!==C)return C;x=M+1|0}else for(var S=e,P=n,A=0,T=m;;){var D=A;if(D===T)return 1;var L=u(S[D],P[D]);if(0!==L)return L;A=D+1|0}}else t=n[0];else r=e[0]}}function o(r,t){for(;;){var n=t,e=r;if(e===n)return 1;var i=typeof e;if("string"===i||"number"===i||"boolean"===i||"undefined"===i||null===e)return 0;var u=typeof n;if("function"===i||"function"===u)throw[a.invalid_argument,"equal: functional value"];if("number"===u||"undefined"===u||null===n)return 0;var c=0|e.tag,f=0|n.tag;if(250!==c)if(250!==f){if(248===c)return+(e[1]===n[1]);if(251===c)throw[a.invalid_argument,"equal: abstract value"];if(c!==f)return 0;var s=0|e.length;if(s!==(0|n.length))return 0;for(var _=e,l=n,m=0,v=s;;){var d=m;if(d===v)return 1;if(!o(_[d],l[d]))return 0;m=d+1|0}}else t=n[0];else r=e[0]}}var c=i,f=i;t.caml_obj_block=function(r,t){var n=new Array(t);return n.tag=r,n},t.caml_obj_dup=function(r){for(var t=0|r.length,n=new Array(t),e=0,a=t-1|0;e<=a;++e)n[e]=r[e];return n.tag=0|r.tag,n},t.caml_obj_truncate=function(r,t){var n=0|r.length;if(t<=0||t>n)throw[a.invalid_argument,"Obj.truncate"];if(n!==t){for(var e=t,i=n-1|0;e<=i;++e)r[e]=0;return r.length=t,0}return 0},t.caml_lazy_make_forward=function(r){return e.__(250,[r])},t.caml_update_dummy=function(r,t){for(var n=0,e=(0|t.length)-1|0;n<=e;++n)r[n]=t[n];var a=0|t.tag;return 0!==a?(r.tag=a,0):0},t.caml_int_compare=i,t.caml_int32_compare=c,t.caml_nativeint_compare=f,t.caml_compare=u,t.caml_equal=o,t.caml_notequal=function(r,t){return 1-o(r,t)},t.caml_greaterequal=function(r,t){return+(u(r,t)>=0)},t.caml_greaterthan=function(r,t){return+(u(r,t)>0)},t.caml_lessthan=function(r,t){return+(u(r,t)<0)},t.caml_lessequal=function(r,t){return+(u(r,t)<=0)}},function(r,t,n){"use strict";var e=n(5);t.caml_array_sub=function(r,t,n){for(var e=new Array(n),a=0,i=t;a<n;)e[a]=r[i],a=a+1|0,i=i+1|0;return e},t.caml_array_concat=function(r){var t=function(r,t){for(;;){var n=t,e=r;if(!n)return e;t=n[1],r=n[0].length+e|0}}(0,r),n=new Array(t);return function(r,t,n){for(;;){var e=n,a=t;if(!e)return 0;for(var i=e[0],u=i.length,o=a,c=0;c<u;)r[o]=i[c],o=o+1|0,c=c+1|0;n=e[1],t=o}}(n,0,r),n},t.caml_make_vect=function(r,t){for(var n=new Array(r),e=0,a=r-1|0;e<=a;++e)n[e]=t;return n},t.caml_array_blit=function(r,t,n,e,a){if(e<=t){for(var i=0,u=a-1|0;i<=u;++i)n[i+e|0]=r[i+t|0];return 0}for(var o=a-1|0;o>=0;--o)n[o+e|0]=r[o+t|0];return 0},t.caml_array_get=function(r,t){if(t<0||t>=r.length)throw[e.invalid_argument,"index out of bounds"];return r[t]},t.caml_array_set=function(r,t,n){if(t<0||t>=r.length)throw[e.invalid_argument,"index out of bounds"];return r[t]=n,0}},function(r,t,n){"use strict";var e=n(6),a=n(2);function i(r,t){return r<t?-1:r===t?0:1}function u(r,t){for(;;){var n=t,e=r;if(e===n)return 0;var o=typeof e,c=typeof n;if("string"===o)return e<n?-1:e===n?0:1;var f=+("number"===c);if(0!=+("number"===o))return 0!==f?i(e,n):-1;if(0!==f)return 1;if("boolean"===o||"undefined"===o||null===e)return e===n?0:e<n?-1:1;if("function"===o||"function"===c)throw[a.invalid_argument,"compare: functional value"];var s=0|e.tag,_=0|n.tag;if(250!==s)if(250!==_){if(248===s)return i(e[1],n[1]);if(251===s)throw[a.invalid_argument,"equal: abstract value"];if(s!==_)return s<_?-1:1;var l=0|e.length,m=0|n.length;if(l===m)for(var v=e,d=n,g=0,h=l;;){var y=g;if(y===h)return 0;var p=u(v[y],d[y]);if(0!==p)return p;g=y+1|0}else if(l<m)for(var b=e,w=n,x=0,k=l;;){var M=x;if(M===k)return-1;var C=u(b[M],w[M]);if(0!==C)return C;x=M+1|0}else for(var S=e,P=n,A=0,T=m;;){var D=A;if(D===T)return 1;var L=u(S[D],P[D]);if(0!==L)return L;A=D+1|0}}else t=n[0];else r=e[0]}}function o(r,t){for(;;){var n=t,e=r;if(e===n)return 1;var i=typeof e;if("string"===i||"number"===i||"boolean"===i||"undefined"===i||null===e)return 0;var u=typeof n;if("function"===i||"function"===u)throw[a.invalid_argument,"equal: functional value"];if("number"===u||"undefined"===u||null===n)return 0;var c=0|e.tag,f=0|n.tag;if(250!==c)if(250!==f){if(248===c)return+(e[1]===n[1]);if(251===c)throw[a.invalid_argument,"equal: abstract value"];if(c!==f)return 0;var s=0|e.length;if(s!==(0|n.length))return 0;for(var _=e,l=n,m=0,v=s;;){var d=m;if(d===v)return 1;if(!o(_[d],l[d]))return 0;m=d+1|0}}else t=n[0];else r=e[0]}}var c=i,f=i;t.caml_obj_block=function(r,t){var n=new Array(t);return n.tag=r,n},t.caml_obj_dup=function(r){for(var t=0|r.length,n=new Array(t),e=0,a=t-1|0;e<=a;++e)n[e]=r[e];return n.tag=0|r.tag,n},t.caml_obj_truncate=function(r,t){var n=0|r.length;if(t<=0||t>n)throw[a.invalid_argument,"Obj.truncate"];if(n!==t){for(var e=t,i=n-1|0;e<=i;++e)r[e]=0;return r.length=t,0}return 0},t.caml_lazy_make_forward=function(r){return e.__(250,[r])},t.caml_update_dummy=function(r,t){for(var n=0,e=(0|t.length)-1|0;n<=e;++n)r[n]=t[n];var a=0|t.tag;return 0!==a?(r.tag=a,0):0},t.caml_int_compare=i,t.caml_int32_compare=c,t.caml_nativeint_compare=f,t.caml_compare=u,t.caml_equal=o,t.caml_notequal=function(r,t){return 1-o(r,t)},t.caml_greaterequal=function(r,t){return+(u(r,t)>=0)},t.caml_greaterthan=function(r,t){return+(u(r,t)>0)},t.caml_lessthan=function(r,t){return+(u(r,t)<0)},t.caml_lessequal=function(r,t){return+(u(r,t)<=0)}},function(r,t,n){"use strict";var e=n(13),a=n(22),i=n(7),u=n(52),o=n(1),c=[a.copy,function(r,t){return i.caml_array_set(r,0,(i.caml_array_get(r,0)+t)%360)},function(r,t){return i.caml_array_set(r,2,o.min(i.caml_array_get(r,2)+t,1))},function(r,t){return i.caml_array_set(r,1,o.min(i.caml_array_get(r,1)+t,1))},function(r,t){return i.caml_array_set(r,2,t)},function(r){var t,n=i.caml_array_get(r,0),e=i.caml_array_get(r,1),a=i.caml_array_get(r,2),u=e,o=n,c=o>u?o>a?u>a?[a,o,0]:[u,o,0]:[u,a,2]:o>a?[a,u,1]:u>a?[o,u,1]:[o,a,2],f=c[1],s=c[0],_=(s+f)/2,l=s===f?0:_<.5?(f-s)/(f+s):(f-s)/(2-f-s);if(0===l)t=0;else switch(c[2]){case 0:t=(u-a)/(f-s)*60;break;case 1:t=60*(2+(a-o)/(f-s));break;case 2:t=60*(4+(o-u)/(f-s))}return[0!=+(t<0)?t+360:t,l,_]},function(r){var t=i.caml_array_get(r,0),n=i.caml_array_get(r,1),e=i.caml_array_get(r,2),a=n;if(0===a)return[e,e,e];var u=e<.5?e*(1+a):e+a-e*a,o=2*e-u,c=t/360,f=function(r){return r<0?r+1:r>1?r-1:r},s=f(c+.333),_=f(c),l=f(c-.333),m=function(r){var t=6*r;return t<1?o+(u-o)*t:2*r<1?u:3*r<2?o+(u-o)*(.666-r)*6:o};return[m(s),m(_),m(l)]}];t.make=function(r,t,n){return[r,t,n]},t.from255=function(r,t,n){return[r/255,t/255,n/255]},t.fromFloats=function(r,t,n){return[r,t,n]},t.fromArray=function(r){return 3!==r.length&&(console.log(r),o.failwith("Color array needs 3 elements")),r},t.toArray=function(r){return r},t.toVec3=function(r){return e.Vec3[3](r)},t.toGlsl=function(r){return"vec3("+o.string_of_float(i.caml_array_get(r,0))+","+o.string_of_float(i.caml_array_get(r,1))+","+o.string_of_float(i.caml_array_get(r,2))+")"},t.black=function(){return[0,0,0]},t.white=function(){return[1,1,1]},t.compare=function(r,t){var n=u.caml_float_compare(i.caml_array_get(r,0),i.caml_array_get(t,0));if(0!==n)return n;var e=u.caml_float_compare(i.caml_array_get(r,1),i.caml_array_get(t,1));return 0!==e?e:u.caml_float_compare(i.caml_array_get(r,2),i.caml_array_get(t,2))},t.Hsl=c},function(r,t,n){"use strict";var e=n(8),a=n(38),i=n(9),u=n(12);function o(r){var t=r-9|0;return t>4||t<0?23!==t?0:1:2!==t?1:0}var c=u.caml_string_compare,f=a.fill,s=a.blit_string;t.make=function(r,t){return u.bytes_to_string(a.make(r,t))},t.init=function(r,t){return u.bytes_to_string(a.init(r,t))},t.copy=function(r){return u.bytes_to_string(a.copy(u.bytes_of_string(r)))},t.sub=function(r,t,n){return u.bytes_to_string(a.sub(u.bytes_of_string(r),t,n))},t.fill=f,t.blit=s,t.concat=function(r,t){if(t){var n=t[0],a=[0],o=[0];e.iter(function(r){return a[0]=a[0]+1|0,o[0]=o[0]+r.length|0,0},t);var c=u.caml_create_string(o[0]+i.imul(r.length,a[0]-1|0)|0);u.caml_blit_string(n,0,c,0,n.length);var f=[n.length];return e.iter(function(t){return u.caml_blit_string(r,0,c,f[0],r.length),f[0]=f[0]+r.length|0,u.caml_blit_string(t,0,c,f[0],t.length),f[0]=f[0]+t.length|0,0},t[1]),u.bytes_to_string(c)}return""},t.iter=function(r,t){return a.iter(r,u.bytes_of_string(t))},t.iteri=function(r,t){return a.iteri(r,u.bytes_of_string(t))},t.map=function(r,t){return u.bytes_to_string(a.map(r,u.bytes_of_string(t)))},t.mapi=function(r,t){return u.bytes_to_string(a.mapi(r,u.bytes_of_string(t)))},t.trim=function(r){return""===r||!o(r.charCodeAt(0))&&!o(r.charCodeAt(r.length-1|0))?r:u.bytes_to_string(a.trim(u.bytes_of_string(r)))},t.escaped=function(r){return function(t){for(;;){var n=t;if(n>=r.length)return 0;var e=r.charCodeAt(n);if(!(e>=32))return 1;var a=e-34|0;if(a>58||a<0){if(a>=93)return 1;t=n+1|0}else{if(a>57||a<1)return 1;t=n+1|0}}}(0)?u.bytes_to_string(a.escaped(u.bytes_of_string(r))):r},t.index=function(r,t){return a.index(u.bytes_of_string(r),t)},t.rindex=function(r,t){return a.rindex(u.bytes_of_string(r),t)},t.index_from=function(r,t,n){return a.index_from(u.bytes_of_string(r),t,n)},t.rindex_from=function(r,t,n){return a.rindex_from(u.bytes_of_string(r),t,n)},t.contains=function(r,t){return a.contains(u.bytes_of_string(r),t)},t.contains_from=function(r,t,n){return a.contains_from(u.bytes_of_string(r),t,n)},t.rcontains_from=function(r,t,n){return a.rcontains_from(u.bytes_of_string(r),t,n)},t.uppercase=function(r){return u.bytes_to_string(a.uppercase(u.bytes_of_string(r)))},t.lowercase=function(r){return u.bytes_to_string(a.lowercase(u.bytes_of_string(r)))},t.capitalize=function(r){return u.bytes_to_string(a.capitalize(u.bytes_of_string(r)))},t.uncapitalize=function(r){return u.bytes_to_string(a.uncapitalize(u.bytes_of_string(r)))},t.compare=c},function(r,t,n){"use strict";var e=n(5);function a(r,t,n,e,a){if(a>0){if(r===n){var i=r,u=t,o=e,c=a;if(u<o){for(var f=(i.length-o|0)-1|0,s=c-1|0,_=f>s?s:f;_>=0;--_)i[o+_|0]=i[u+_|0];return 0}if(u>o){for(var l=(i.length-u|0)-1|0,m=c-1|0,v=l>m?m:l,d=0;d<=v;++d)i[o+d|0]=i[u+d|0];return 0}return 0}var g=r.length-t|0;if(a<=g){for(var h=0,y=a-1|0;h<=y;++h)n[e+h|0]=r[t+h|0];return 0}for(var p=0,b=g-1|0;p<=b;++p)n[e+p|0]=r[t+p|0];for(var w=g,x=a-1|0;w<=x;++w)n[e+w|0]=0;return 0}return 0}function i(r){var t=r,n=r.length,e="",i=n;if(n<=4096&&n===t.length)return String.fromCharCode.apply(null,t);for(var u=0;i>0;){var o=i<1024?i:1024,c=new Array(o);a(t,u,c,0,o),e+=String.fromCharCode.apply(null,c),i=i-o|0,u=u+o|0}return e}t.bytes_of_string=function(r){for(var t=r.length,n=new Array(t),e=0,a=t-1|0;e<=a;++e)n[e]=r.charCodeAt(e);return n},t.bytes_to_string=i,t.caml_is_printable=function(r){return r>31?+(r<127):0},t.caml_string_of_char_array=function(r){for(var t=r.length,n=new Array(t),e=0,a=t-1|0;e<=a;++e)n[e]=r[e];return i(n)},t.caml_string_get=function(r,t){if(t>=r.length||t<0)throw[e.invalid_argument,"index out of bounds"];return r.charCodeAt(t)},t.caml_string_compare=function(r,t){return r===t?0:r<t?-1:1},t.caml_create_string=function(r){if(r<0)throw[e.invalid_argument,"String.create"];return new Array(r)},t.caml_fill_string=function(r,t,n,e){if(n>0){for(var a=t,i=(n+t|0)-1|0;a<=i;++a)r[a]=e;return 0}return 0},t.caml_blit_string=function(r,t,n,e,a){if(a>0){var i=r.length-t|0;if(a<=i){for(var u=0,o=a-1|0;u<=o;++u)n[e+u|0]=r.charCodeAt(t+u|0);return 0}for(var c=0,f=i-1|0;c<=f;++c)n[e+c|0]=r.charCodeAt(t+c|0);for(var s=i,_=a-1|0;s<=_;++s)n[e+s|0]=0;return 0}return 0},t.caml_blit_bytes=a,t.caml_string_get16=function(r,t){return r.charCodeAt(t)+(r.charCodeAt(t+1|0)<<8)|0},t.caml_string_get32=function(r,t){return((r.charCodeAt(t)+(r.charCodeAt(t+1|0)<<8)|0)+(r.charCodeAt(t+2|0)<<16)|0)+(r.charCodeAt(t+3|0)<<24)|0},t.string_of_char=function(r){return String.fromCharCode(r)},t.get=function(r,t){if(t<0||t>=r.length)throw[e.invalid_argument,"index out of bounds"];return r.charCodeAt(t)}},function(r,t,n){"use strict";var e=n(0),a=n(59),i=n(7),u=n(29),o=n(2);function c(r,t,n){for(var e=i.caml_make_vect(r,[]),a=0,u=r-1|0;a<=u;++a)e[a]=i.caml_make_vect(t,n);return e}function f(r){var t=r.length;return t?i.caml_array_sub(r,0,t):[]}function s(r,t,n,e,a){if(a<0||t<0||t>(r.length-a|0)||e<0||e>(n.length-a|0))throw[o.invalid_argument,"Array.blit"];return i.caml_array_blit(r,t,n,e,a)}var _=u.create("Array.Bottom");function l(r,t){var n=function(n,a,u,o,c,f,_){for(var l=n+a|0,m=o+c|0,v=n,d=i.caml_array_get(t,n),g=o,h=i.caml_array_get(u,o),y=_;;){var p=y,b=h,w=g,x=d,k=v;if(e._2(r,x,b)<=0){i.caml_array_set(f,p,x);var M=k+1|0;if(M<l){y=p+1|0,d=i.caml_array_get(t,M),v=M;continue}return s(u,w,f,p+1|0,m-w|0)}i.caml_array_set(f,p,b);var C=w+1|0;if(!(C<m))return s(t,k,f,p+1|0,l-k|0);y=p+1|0,h=i.caml_array_get(u,C),g=C}},a=function(n,a,u,o){for(var c=0,f=o-1|0;c<=f;++c){for(var s=i.caml_array_get(t,n+c|0),_=(u+c|0)-1|0;_>=u&&e._2(r,i.caml_array_get(a,_),s)>0;)i.caml_array_set(a,_+1|0,i.caml_array_get(a,_)),_=_-1|0;i.caml_array_set(a,_+1|0,s)}return 0},u=function(r,e,i,o){if(o<=5)return a(r,e,i,o);var c=o/2|0,f=o-c|0;return u(r+c|0,e,i+c|0,f),u(r,t,r+f|0,c),n(r+f|0,c,e,i+c|0,f,e,i)},o=t.length;if(o<=5)return a(0,t,0,o);var c=o/2|0,f=o-c|0,_=i.caml_make_vect(f,i.caml_array_get(t,0));return u(c,_,0,f),u(0,t,f,c),n(f,c,_,0,f,t,0)}var m=c,v=i.caml_array_concat,d=l;t.init=function(r,t){if(r){if(r<0)throw[o.invalid_argument,"Array.init"];for(var n=i.caml_make_vect(r,e._1(t,0)),a=1,u=r-1|0;a<=u;++a)n[a]=e._1(t,a);return n}return[]},t.make_matrix=c,t.create_matrix=m,t.append=function(r,t){var n=r.length;return n?t.length?r.concat(t):i.caml_array_sub(r,0,n):f(t)},t.concat=v,t.sub=function(r,t,n){if(n<0||t>(r.length-n|0))throw[o.invalid_argument,"Array.sub"];return i.caml_array_sub(r,t,n)},t.copy=f,t.fill=function(r,t,n,e){if(t<0||n<0||t>(r.length-n|0))throw[o.invalid_argument,"Array.fill"];for(var a=t,i=(t+n|0)-1|0;a<=i;++a)r[a]=e;return 0},t.blit=s,t.to_list=function(r){for(var t=r.length-1|0,n=0;;){var e=n,a=t;if(a<0)return e;n=[r[a],e],t=a-1|0}},t.of_list=function(r){if(!r)return[];for(var t=i.caml_make_vect(function(r,t){for(;;){var n=t,e=r;if(!n)return e;t=n[1],r=e+1|0}}(0,r),r[0]),n=1,e=r[1];;){var a=e,u=n;if(!a)return t;t[u]=a[0],e=a[1],n=u+1|0}},t.iter=function(r,t){for(var n=0,a=t.length-1|0;n<=a;++n)e._1(r,t[n]);return 0},t.map=function(r,t){var n=t.length;if(n){for(var a=i.caml_make_vect(n,e._1(r,t[0])),u=1,o=n-1|0;u<=o;++u)a[u]=e._1(r,t[u]);return a}return[]},t.iteri=function(r,t){for(var n=0,a=t.length-1|0;n<=a;++n)e._2(r,n,t[n]);return 0},t.mapi=function(r,t){var n=t.length;if(n){for(var a=i.caml_make_vect(n,e._2(r,0,t[0])),u=1,o=n-1|0;u<=o;++u)a[u]=e._2(r,u,t[u]);return a}return[]},t.fold_left=function(r,t,n){for(var a=t,i=0,u=n.length-1|0;i<=u;++i)a=e._2(r,a,n[i]);return a},t.fold_right=function(r,t,n){for(var a=n,i=t.length-1|0;i>=0;--i)a=e._2(r,t[i],a);return a},t.sort=function(r,t){for(var n=function(n,a){var u=1+((a+a|0)+a|0)|0,o=u;if((u+2|0)<n)return e._2(r,i.caml_array_get(t,u),i.caml_array_get(t,u+1|0))<0&&(o=u+1|0),e._2(r,i.caml_array_get(t,o),i.caml_array_get(t,u+2|0))<0&&(o=u+2|0),o;if((u+1|0)<n&&e._2(r,i.caml_array_get(t,u),i.caml_array_get(t,u+1|0))<0)return u+1|0;if(u<n)return u;throw[_,a]},u=function(u,o,c){try{for(var f=u,s=o,l=c;;){var m=s,v=n(f,m);if(!(e._2(r,i.caml_array_get(t,v),l)>0))return i.caml_array_set(t,m,l);i.caml_array_set(t,m,i.caml_array_get(t,v)),s=v}}catch(r){var d=a.internalToOCamlException(r);if(d[0]===_)return i.caml_array_set(t,d[1],c);throw d}},c=function(r,e){try{for(var u=r,o=e;;){var c=o,f=n(u,c);i.caml_array_set(t,c,i.caml_array_get(t,f)),o=f}}catch(r){var s=a.internalToOCamlException(r);if(s[0]===_)return s[1];throw s}},f=function(n,a){for(;;){var u=n,c=(u-1|0)/3|0;if(u===c)throw[o.assert_failure,["array.ml",168,4]];if(e._2(r,i.caml_array_get(t,c),a)<0){if(i.caml_array_set(t,u,i.caml_array_get(t,c)),c>0){n=c;continue}return i.caml_array_set(t,0,a)}return i.caml_array_set(t,u,a)}},s=t.length,l=((s+1|0)/3|0)-1|0;l>=0;--l)u(s,l,i.caml_array_get(t,l));for(var m=s-1|0;m>=2;--m){var v=i.caml_array_get(t,m);i.caml_array_set(t,m,i.caml_array_get(t,0)),f(c(m,0),v)}if(s>1){var d=i.caml_array_get(t,1);return i.caml_array_set(t,1,i.caml_array_get(t,0)),i.caml_array_set(t,0,d)}return 0},t.stable_sort=l,t.fast_sort=d},function(r,t,n){"use strict";var e=n(13),a=n(8),i=n(6),u=n(19),o=n(31),c=n(20),f=n(1);function s(r){return r.tag?0:[r[0]]}function _(r){return r.tag?0:[r[0]]}function l(r){return r.tag?0:[r[0]]}function m(r){return[_(r[0]),s(r[1]),r[2],r[3],r[4]]}function v(r,t,n,e,a,o){return[r,t?t[0]:i.__(0,[u.white(0)]),n?n[0]:0,e?e[0]:.6,a?a[0]:12]}function d(r,t){var n,e=f.string_of_int(t),a=r[0];n=a.tag?[["uPointPos"+e,a[0]],0]:0;var i=r[1];return i.tag?[["uPointColor"+e,i[0]],n]:n}function g(r,t){var n,e,a=f.string_of_int(t);return n=r[0].tag?["uniform vec3 uPointPos"+a+";",0]:0,e=r[1].tag?["uniform vec3 uPointColor"+a+";\n",n]:n,c.concat("\n",e)}function h(r,t,n){var a,i=f.string_of_int(t),u=r[0];a=u.tag?"uPointPos"+i:e.Vec3[14](u[0]);var o=r[2],c="number"==typeof o?0!==o?"vPosition":"screenP":o[0],s=r[1],_="pointDir"+i,l="vec3 "+_+" = normalize("+a+" - "+c+");",m="max(dot("+_+", normal), 0.0) * "+(s.tag?"uPointColor"+i:e.Vec3[14](s[0]))+" * "+f.string_of_float(r[3]);if(r[4]){var v="lightDir"+i,d="reflect("+v+", normal)";return[l+"vec3 "+v+" = normalize("+c+" - "+a+");","pow(clamp(dot(normalize("+e.Vec3[14](n[0])+" - "+c+"), "+d+"), 0.0, 1.0), "+f.string_of_int(r[4])+".0) * vec3(1.0, 1.0, 1.0) + "+m]}return[l,m]}var y=[m,v,d,g,h,function(r,t){var n=h(r,0,t);return"vec3 lighting(vec3 normal) {\n"+n[0]+"return pow("+n[1]+", vec3(1.0/2.2));\n}\n"}];function p(r){return[l(r[0]),s(r[1]),r[2],r[3],r[4]]}function b(r,t,n,e,a,o){return[r,t?t[0]:i.__(0,[u.white(0)]),n?n[0]:0,e?e[0]:.4,a?a[0]:16]}function w(r){var t,n=r[0];t=n.tag?[["uDir",n[0]],0]:0;var e=r[1];return e.tag?[["uDirColor",e[0]],0]:t}function x(r){return(r[0].tag?"uniform vec3 uDir;\n":"")+(r[1].tag?"uniform vec3 uDirColor;\n":"")}function k(r){var t,n=r[0];t=n.tag?"uDir":e.Vec3[14](n[0]);var a=r[1];return["","max(dot("+t+", normal), 0.0) * "+(a.tag?"uDirColor":e.Vec3[14](a[0]))+" * "+f.string_of_float(r[3])]}var M=[p,b,w,x,k],C=[function(r){return[p(r[0]),a.map(m,r[1])]},function(r,t,n){return[r,t,n]},function(){return[b(i.__(0,[e.Vec3[1](.4,.3,.3)]),0,0,0,0),[v(i.__(0,[e.Vec3[1](0,-.4,2)]),0,0,0,0),0],o.make(e.Vec3[1](0,.4,4))]},function(r){var t=a.concat(a.mapi(function(r,t){return d(t,r)},r[1]));return a.append(w(r[0]),t)},function(){return 0},function(r){var t=a.fold_left(function(r,t){var n=r[0];return[n+1|0,r[1]+g(t,n)]},[0,""],r[1]);return x(r[0])+t[1]},function(r){var t=a.fold_left(function(t,n){var e=t[0];return[e+1|0,[h(n,e,r[2]),t[1]]]},[0,0],r[1]),n=[k(r[0]),t[1]],e=a.fold_left(function(r,t){return[r[0]+t[0],[t[1],r[1]]]},["",0],n);return"vec3 lighting(vec3 normal) {\n"+e[0]+"return pow("+c.concat(" + ",e[1])+", vec3(1.0/2.2));\n}\n"}];t.lightColorHash=s,t.lightPosHash=_,t.lightDirHash=l,t.PointLight=y,t.Directional=M,t.ProgramLight=C},function(r,t,n){"use strict";var e=n(22),a=n(6),i=n(0),u=n(114),o=n(18),c=n(108),f=n(7),s=n(1),_=n(106),l=n(28),m=n(2),v=[0],d=a.__(246,[function(){return u.State[1](0)}]);function g(r,t){var n,e=r?r[0]:v[0],a=function(r,t){for(;;){var n=r;if(n>=t)return n;if(n<<1<n)return n;r=n<<1}}(16,t);if(e){var i=0|d.tag;n=u.State[3](250===i?d[0]:246===i?_.force_lazy_block(d):d)}else n=0;return[0,f.caml_make_vect(a,0),n,a]}function h(r){r[0]=0;for(var t=0,n=r[1].length-1|0;t<=n;++t)f.caml_array_set(r[1],t,0);return 0}function y(r){var t=r[1].length;return r.length<4||t===r[3]?h(r):(r[0]=0,r[1]=f.caml_make_vect(r[3],0),0)}function p(r){return[r[0],e.copy(r[1]),r[2],r[3]]}function b(r){return r[0]}function w(r,t){var n=t[1],e=n.length,a=e<<1;if(a>=e){var u=f.caml_make_vect(a,0);t[1]=u;for(var o=function(n){if(n){var e=n[0];o(n[2]);var a=i._2(r,t,e);return f.caml_array_set(u,a,[e,n[1],f.caml_array_get(u,a)])}return 0},c=0,s=e-1|0;c<=s;++c)o(f.caml_array_get(n,c));return 0}return 0}function x(r,t){return r.length>=3?c.caml_hash(10,100,r[2],t)&(r[1].length-1|0):l.not_implemented("caml_hash_univ_param not implemented by bucklescript yet\n")%r[1].length}function k(r,t){for(var n=function(t){for(;;){var n=t;if(!n)return 0;i._2(r,n[0],n[1]),t=n[2]}},e=t[1],a=0,u=e.length-1|0;a<=u;++a)n(f.caml_array_get(e,a));return 0}function M(r,t,n){for(var e=function(t,n){for(;;){var e=n,a=t;if(!a)return e;n=i._3(r,a[0],a[1],e),t=a[2]}},a=t[1],u=n,o=0,c=a.length-1|0;o<=c;++o)u=e(f.caml_array_get(a,o),u);return u}function C(r,t){for(;;){var n=t,e=r;if(!n)return e;t=n[2],r=e+1|0}}function S(r){var t=e.fold_left(function(r,t){return s.max(r,C(0,t))},0,r[1]),n=f.caml_make_vect(t+1|0,0);return e.iter(function(r){var t=C(0,r);return f.caml_array_set(n,t,f.caml_array_get(n,t)+1|0)},r[1]),[r[0],r[1].length,t,n]}var P=c.caml_hash;t.create=g,t.clear=h,t.reset=y,t.copy=p,t.add=function(r,t,n){var e=x(r,t),a=[t,n,f.caml_array_get(r[1],e)];return f.caml_array_set(r[1],e,a),r[0]=r[0]+1|0,r[0]>r[1].length<<1?w(x,r):0},t.find=function(r,t){var n=f.caml_array_get(r[1],x(r,t));if(!n)throw m.not_found;if(!o.caml_compare(t,n[0]))return n[1];var e=n[2];if(!e)throw m.not_found;if(!o.caml_compare(t,e[0]))return e[1];var a=e[2];if(!a)throw m.not_found;if(!o.caml_compare(t,a[0]))return a[1];for(var i=t,u=a[2];;){var c=u;if(c){if(o.caml_compare(i,c[0])){u=c[2];continue}return c[1]}throw m.not_found}},t.find_all=function(r,t){var n=function(r){for(;;){var e=r;if(e){var a=e[2];if(o.caml_compare(e[0],t)){r=a;continue}return[e[1],n(a)]}return 0}};return n(f.caml_array_get(r[1],x(r,t)))},t.mem=function(r,t){for(var n=f.caml_array_get(r[1],x(r,t));;){var e=n;if(e){if(o.caml_compare(e[0],t)){n=e[2];continue}return 1}return 0}},t.remove=function(r,t){var n=function(e){if(e){var a=e[2],i=e[0];return o.caml_compare(i,t)?[i,e[1],n(a)]:(r[0]=r[0]-1|0,a)}return 0},e=x(r,t);return f.caml_array_set(r[1],e,n(f.caml_array_get(r[1],e)))},t.replace=function(r,t,n){var e=function(r){if(r){var a=r[2],i=r[0];return o.caml_compare(i,t)?[i,r[1],e(a)]:[t,n,a]}throw m.not_found},a=x(r,t),i=f.caml_array_get(r[1],a);try{return f.caml_array_set(r[1],a,e(i))}catch(e){if(e===m.not_found)return f.caml_array_set(r[1],a,[t,n,i]),r[0]=r[0]+1|0,r[0]>r[1].length<<1?w(x,r):0;throw e}},t.iter=k,t.fold=M,t.length=b,t.randomize=function(){return v[0]=1,0},t.stats=S,t.Make=function(r){var t=r[0],n=function(t,n){return i._1(r[1],n)&(t[1].length-1|0)};return[function(r){return g([0],r)},h,y,p,function(r,t,e){var a=n(r,t),i=[t,e,f.caml_array_get(r[1],a)];return f.caml_array_set(r[1],a,i),r[0]=r[0]+1|0,r[0]>r[1].length<<1?w(n,r):0},function(r,e){var a=function(n){if(n){var u=n[2],o=n[0];return i._2(t,o,e)?(r[0]=r[0]-1|0,u):[o,n[1],a(u)]}return 0},u=n(r,e);return f.caml_array_set(r[1],u,a(f.caml_array_get(r[1],u)))},function(r,e){var a=f.caml_array_get(r[1],n(r,e));if(!a)throw m.not_found;var u=a[2];if(i._2(t,e,a[0]))return a[1];if(!u)throw m.not_found;var o=u[2];if(i._2(t,e,u[0]))return u[1];if(!o)throw m.not_found;if(i._2(t,e,o[0]))return o[1];for(var c=e,s=o[2];;){var _=s;if(!_)throw m.not_found;if(i._2(t,c,_[0]))return _[1];s=_[2]}},function(r,e){var a=function(r){for(;;){var n=r;if(!n)return 0;var u=n[2];if(i._2(t,n[0],e))return[n[1],a(u)];r=u}};return a(f.caml_array_get(r[1],n(r,e)))},function(r,e,a){var u=function(r){if(r){var n=r[2],o=r[0];return i._2(t,o,e)?[e,a,n]:[o,r[1],u(n)]}throw m.not_found},o=n(r,e),c=f.caml_array_get(r[1],o);try{return f.caml_array_set(r[1],o,u(c))}catch(t){if(t===m.not_found)return f.caml_array_set(r[1],o,[e,a,c]),r[0]=r[0]+1|0,r[0]>r[1].length<<1?w(n,r):0;throw t}},function(r,e){for(var a=f.caml_array_get(r[1],n(r,e));;){var u=a;if(!u)return 0;if(i._2(t,u[0],e))return 1;a=u[2]}},k,M,b,S]},t.MakeSeeded=function(r){var t=function(t,n){return i._2(r[1],t[2],n)&(t[1].length-1|0)};return[g,h,y,p,function(r,n,e){var a=t(r,n),i=[n,e,f.caml_array_get(r[1],a)];return f.caml_array_set(r[1],a,i),r[0]=r[0]+1|0,r[0]>r[1].length<<1?w(t,r):0},function(n,e){var a=function(t){if(t){var u=t[2],o=t[0];return i._2(r[0],o,e)?(n[0]=n[0]-1|0,u):[o,t[1],a(u)]}return 0},u=t(n,e);return f.caml_array_set(n[1],u,a(f.caml_array_get(n[1],u)))},function(n,e){var a=f.caml_array_get(n[1],t(n,e));if(!a)throw m.not_found;var u=a[2];if(i._2(r[0],e,a[0]))return a[1];if(!u)throw m.not_found;var o=u[2];if(i._2(r[0],e,u[0]))return u[1];if(!o)throw m.not_found;if(i._2(r[0],e,o[0]))return o[1];for(var c=e,s=o[2];;){var _=s;if(!_)throw m.not_found;if(i._2(r[0],c,_[0]))return _[1];s=_[2]}},function(n,e){var a=function(t){for(;;){var n=t;if(!n)return 0;var u=n[2];if(i._2(r[0],n[0],e))return[n[1],a(u)];t=u}};return a(f.caml_array_get(n[1],t(n,e)))},function(n,e,a){var u=function(t){if(t){var n=t[2],o=t[0];return i._2(r[0],o,e)?[e,a,n]:[o,t[1],u(n)]}throw m.not_found},o=t(n,e),c=f.caml_array_get(n[1],o);try{return f.caml_array_set(n[1],o,u(c))}catch(r){if(r===m.not_found)return f.caml_array_set(n[1],o,[e,a,c]),n[0]=n[0]+1|0,n[0]>n[1].length<<1?w(t,n):0;throw r}},function(n,e){for(var a=f.caml_array_get(n[1],t(n,e));;){var u=a;if(!u)return 0;if(i._2(r[0],u[0],e))return 1;a=u[2]}},k,M,b,S]},t.hash=function(r){return c.caml_hash(10,100,0,r)},t.seeded_hash=function(r,t){return c.caml_hash(10,100,r,t)},t.hash_param=function(r,t,n){return c.caml_hash(r,t,0,n)},t.seeded_hash_param=P},function(r,t,n){"use strict";t.not_implemented=function(r){throw new Error(r)}},function(r,t,n){"use strict";var e=[0];function a(){return e[0]+=1,e[0]}t.caml_set_oo_id=function(r){return r[1]=e[0],e[0]+=1,r},t.get_id=a,t.create=function(r){var t=[r,a()];return t.tag=248,t},t.isCamlExceptionOrOpenVariant=function(r){if(void 0===r)return 0;if(248===r.tag)return 1;var t=r[0];return void 0!==t?+(248===t.tag):0}},function(r,t,n){"use strict";var e=n(11),a=n(16),i=n(15),u=n(5);function o(r){for(var t=0,n=r;;){var e=n,a=t;if(!e)return a;n=e[1],t=a+1|0}}function c(r,t){for(;;){var n=t,e=r;if(!e)return n;t=[e[0],n],r=e[1]}}function f(r){return r?i.$at(r[0],f(r[1])):0}function s(r){return function(t){for(var n=0,a=t;;){var i=a,u=n;if(!i)return c(u,0);var o=i[1],f=i[0];e._1(r,f)?(a=o,n=[f,u]):a=o}}}function _(r,t){for(;;){var n=t,e=r;if(e){if(n){t=n[1],r=e-1|0;continue}throw[u.assert_failure,["list.ml",223,11]]}return n}}function l(r,t){var n=function(t,n){var i=0;if(2!==t)if(3!==t)i=1;else if(n){var u=n[1];if(u){var o=u[1];if(o){var f=o[0],s=u[0],l=n[0];return e._2(r,l,s)<=0?e._2(r,s,f)<=0?[l,[s,[f,0]]]:e._2(r,l,f)<=0?[l,[f,[s,0]]]:[f,[l,[s,0]]]:e._2(r,l,f)<=0?[s,[l,[f,0]]]:e._2(r,s,f)<=0?[s,[f,[l,0]]]:[f,[s,[l,0]]]}i=1}else i=1}else i=1;else if(n){var m=n[1];if(m){var v=m[0],d=n[0];return e._2(r,d,v)<=0?[d,[v,0]]:[v,[d,0]]}i=1}else i=1;if(1===i)for(var g=t>>1,h=t-g|0,y=_(g,n),p=a(g,n),b=a(h,y),w=0;;){var x=w,k=b,M=p;if(M){if(k){var C=k[0],S=M[0];if(e._2(r,S,C)>0){w=[S,x],p=M[1];continue}w=[C,x],b=k[1];continue}return c(M,x)}return c(k,x)}},a=function(t,a){var i=0;if(2!==t)if(3!==t)i=1;else if(a){var u=a[1];if(u){var o=u[1];if(o){var f=o[0],s=u[0],l=a[0];return e._2(r,l,s)>0?e._2(r,s,f)>0?[l,[s,[f,0]]]:e._2(r,l,f)>0?[l,[f,[s,0]]]:[f,[l,[s,0]]]:e._2(r,l,f)>0?[s,[l,[f,0]]]:e._2(r,s,f)>0?[s,[f,[l,0]]]:[f,[s,[l,0]]]}i=1}else i=1}else i=1;else if(a){var m=a[1];if(m){var v=m[0],d=a[0];return e._2(r,d,v)>0?[d,[v,0]]:[v,[d,0]]}i=1}else i=1;if(1===i)for(var g=t>>1,h=t-g|0,y=_(g,a),p=n(g,a),b=n(h,y),w=0;;){var x=w,k=b,M=p;if(M){if(k){var C=k[0],S=M[0];if(e._2(r,S,C)<=0){w=[S,x],p=M[1];continue}w=[C,x],b=k[1];continue}return c(M,x)}return c(k,x)}},i=o(t);return i<2?t:n(i,t)}var m=i.$at,v=f,d=s,g=l,h=l;t.length=o,t.hd=function(r){if(r)return r[0];throw[u.failure,"hd"]},t.tl=function(r){if(r)return r[1];throw[u.failure,"tl"]},t.nth=function(r,t){if(t<0)throw[u.invalid_argument,"List.nth"];for(var n=r,e=t;;){var a=n;if(a){if(e){e=e-1|0,n=a[1];continue}return a[0]}throw[u.failure,"nth"]}},t.rev=function(r){return c(r,0)},t.append=m,t.rev_append=c,t.concat=v,t.flatten=f,t.iter=function(r,t){for(;;){var n=t;if(!n)return 0;e._1(r,n[0]),t=n[1]}},t.iteri=function(r,t){for(var n=0,a=r,i=t;;){var u=i,o=n;if(!u)return 0;e._2(a,o,u[0]),i=u[1],n=o+1|0}},t.map=function r(t,n){return n?[e._1(t,n[0]),r(t,n[1])]:0},t.mapi=function(r,t){return function r(t,n,a){return a?[e._2(n,t,a[0]),r(t+1|0,n,a[1])]:0}(0,r,t)},t.rev_map=function(r,t){for(var n=0,a=t;;){var i=a,u=n;if(!i)return u;a=i[1],n=[e._1(r,i[0]),u]}},t.fold_left=function(r,t,n){for(;;){var a=n,i=t;if(!a)return i;n=a[1],t=e._2(r,i,a[0])}},t.fold_right=function r(t,n,a){return n?e._2(t,n[0],r(t,n[1],a)):a},t.iter2=function(r,t,n){for(;;){var a=n,i=t;if(i){if(a){e._2(r,i[0],a[0]),n=a[1],t=i[1];continue}throw[u.invalid_argument,"List.iter2"]}if(a)throw[u.invalid_argument,"List.iter2"];return 0}},t.map2=function r(t,n,a){if(n){if(a)return[e._2(t,n[0],a[0]),r(t,n[1],a[1])];throw[u.invalid_argument,"List.map2"]}if(a)throw[u.invalid_argument,"List.map2"];return 0},t.rev_map2=function(r,t,n){for(var a=0,i=t,o=n;;){var c=o,f=i,s=a;if(f){if(c){o=c[1],i=f[1],a=[e._2(r,f[0],c[0]),s];continue}throw[u.invalid_argument,"List.rev_map2"]}if(c)throw[u.invalid_argument,"List.rev_map2"];return s}},t.fold_left2=function(r,t,n,a){for(;;){var i=a,o=n,c=t;if(o){if(i){a=i[1],n=o[1],t=e._3(r,c,o[0],i[0]);continue}throw[u.invalid_argument,"List.fold_left2"]}if(i)throw[u.invalid_argument,"List.fold_left2"];return c}},t.fold_right2=function r(t,n,a,i){if(n){if(a)return e._3(t,n[0],a[0],r(t,n[1],a[1],i));throw[u.invalid_argument,"List.fold_right2"]}if(a)throw[u.invalid_argument,"List.fold_right2"];return i},t.for_all=function(r,t){for(;;){var n=t;if(n){if(e._1(r,n[0])){t=n[1];continue}return 0}return 1}},t.exists=function(r,t){for(;;){var n=t;if(!n)return 0;if(e._1(r,n[0]))return 1;t=n[1]}},t.for_all2=function(r,t,n){for(;;){var a=n,i=t;if(i){if(a){if(e._2(r,i[0],a[0])){n=a[1],t=i[1];continue}return 0}throw[u.invalid_argument,"List.for_all2"]}if(a)throw[u.invalid_argument,"List.for_all2"];return 1}},t.exists2=function(r,t,n){for(;;){var a=n,i=t;if(i){if(a){if(e._2(r,i[0],a[0]))return 1;n=a[1],t=i[1];continue}throw[u.invalid_argument,"List.exists2"]}if(a)throw[u.invalid_argument,"List.exists2"];return 0}},t.mem=function(r,t){for(;;){var n=t;if(n){if(a.caml_compare(n[0],r)){t=n[1];continue}return 1}return 0}},t.memq=function(r,t){for(;;){var n=t;if(!n)return 0;if(n[0]===r)return 1;t=n[1]}},t.find=function(r,t){for(;;){var n=t;if(!n)throw u.not_found;var a=n[0];if(e._1(r,a))return a;t=n[1]}},t.filter=d,t.find_all=s,t.partition=function(r,t){for(var n=0,a=0,i=t;;){var u=i,o=a,f=n;if(!u)return[c(f,0),c(o,0)];var s=u[1],_=u[0];e._1(r,_)?(i=s,n=[_,f]):(i=s,a=[_,o])}},t.assoc=function(r,t){for(;;){var n=t;if(n){var e=n[0];if(a.caml_compare(e[0],r)){t=n[1];continue}return e[1]}throw u.not_found}},t.assq=function(r,t){for(;;){var n=t;if(!n)throw u.not_found;var e=n[0];if(e[0]===r)return e[1];t=n[1]}},t.mem_assoc=function(r,t){for(;;){var n=t;if(n){if(a.caml_compare(n[0][0],r)){t=n[1];continue}return 1}return 0}},t.mem_assq=function(r,t){for(;;){var n=t;if(!n)return 0;if(n[0][0]===r)return 1;t=n[1]}},t.remove_assoc=function r(t,n){if(n){var e=n[1],i=n[0];return a.caml_compare(i[0],t)?[i,r(t,e)]:e}return 0},t.remove_assq=function r(t,n){if(n){var e=n[1],a=n[0];return a[0]===t?e:[a,r(t,e)]}return 0},t.split=function r(t){if(t){var n=t[0],e=r(t[1]);return[[n[0],e[0]],[n[1],e[1]]]}return[0,0]},t.combine=function r(t,n){if(t){if(n)return[[t[0],n[0]],r(t[1],n[1])];throw[u.invalid_argument,"List.combine"]}if(n)throw[u.invalid_argument,"List.combine"];return 0},t.sort=g,t.stable_sort=l,t.fast_sort=h,t.sort_uniq=function(r,t){var n=function(t,n){var i=0;if(2!==t)if(3!==t)i=1;else if(n){var u=n[1];if(u){var o=u[1];if(o){var f=o[0],s=u[0],l=n[0],m=e._2(r,l,s);if(m){if(m<0){var v=e._2(r,s,f);if(v){if(v<0)return[l,[s,[f,0]]];var d=e._2(r,l,f);return d?d<0?[l,[f,[s,0]]]:[f,[l,[s,0]]]:[l,[s,0]]}return[l,[s,0]]}var g=e._2(r,l,f);if(g){if(g<0)return[s,[l,[f,0]]];var h=e._2(r,s,f);return h?h<0?[s,[f,[l,0]]]:[f,[s,[l,0]]]:[s,[l,0]]}return[s,[l,0]]}var y=e._2(r,s,f);return y?y<0?[s,[f,0]]:[f,[s,0]]:[s,0]}i=1}else i=1}else i=1;else if(n){var p=n[1];if(p){var b=p[0],w=n[0],x=e._2(r,w,b);return x?x<0?[w,[b,0]]:[b,[w,0]]:[w,0]}i=1}else i=1;if(1===i)for(var k=t>>1,M=t-k|0,C=_(k,n),S=a(k,n),P=a(M,C),A=0;;){var T=A,D=P,L=S;if(L){if(D){var N=D[1],U=D[0],V=L[1],z=L[0],B=e._2(r,z,U);if(B){if(B>0){A=[z,T],S=V;continue}A=[U,T],P=N;continue}A=[z,T],P=N,S=V;continue}return c(L,T)}return c(D,T)}},a=function(t,a){var i=0;if(2!==t)if(3!==t)i=1;else if(a){var u=a[1];if(u){var o=u[1];if(o){var f=o[0],s=u[0],l=a[0],m=e._2(r,l,s);if(m){if(m>0){var v=e._2(r,s,f);if(v){if(v>0)return[l,[s,[f,0]]];var d=e._2(r,l,f);return d?d>0?[l,[f,[s,0]]]:[f,[l,[s,0]]]:[l,[s,0]]}return[l,[s,0]]}var g=e._2(r,l,f);if(g){if(g>0)return[s,[l,[f,0]]];var h=e._2(r,s,f);return h?h>0?[s,[f,[l,0]]]:[f,[s,[l,0]]]:[s,[l,0]]}return[s,[l,0]]}var y=e._2(r,s,f);return y?y>0?[s,[f,0]]:[f,[s,0]]:[s,0]}i=1}else i=1}else i=1;else if(a){var p=a[1];if(p){var b=p[0],w=a[0],x=e._2(r,w,b);return x?x>0?[w,[b,0]]:[b,[w,0]]:[w,0]}i=1}else i=1;if(1===i)for(var k=t>>1,M=t-k|0,C=_(k,a),S=n(k,a),P=n(M,C),A=0;;){var T=A,D=P,L=S;if(L){if(D){var N=D[1],U=D[0],V=L[1],z=L[0],B=e._2(r,z,U);if(B){if(B<0){A=[z,T],S=V;continue}A=[U,T],P=N;continue}A=[z,T],P=N,S=V;continue}return c(L,T)}return c(D,T)}},i=o(t);return i<2?t:n(i,t)},t.merge=function r(t,n,a){if(n){if(a){var i=a[0],u=n[0];return e._2(t,u,i)<=0?[u,r(t,n[1],a)]:[i,r(t,n,a[1])]}return n}return a}},function(r,t,n){"use strict";t.not_implemented=function(r){throw new Error(r)}},function(r,t,n){"use strict";var e=[0];function a(){return e[0]+=1,e[0]}t.caml_set_oo_id=function(r){return r[1]=e[0],e[0]+=1,r},t.get_id=a,t.create=function(r){var t=[r,a()];return t.tag=248,t},t.isCamlExceptionOrOpenVariant=function(r){if(void 0===r)return 0;if(248===r.tag)return 1;var t=r[0];return void 0!==t?+(248===t.tag):0}},function(r,t,n){"use strict";var e=n(0),a=n(9),i=n(42),u=n(61),o=n(2);function c(r){throw[o.failure,r]}function f(r){return r>=65?r>=97?r>=123?-1:r-87|0:r>=91?-1:r-55|0:r>57||r<48?-1:r-48|0}function s(r){switch(r){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function _(r){var t=1,n=2,e=0;"-"===r[e]&&(t=-1,e=e+1|0);var a=r.charCodeAt(e),i=r.charCodeAt(e+1|0);return 48===a&&(i>=89?98!==i?111!==i?120===i&&(n=1,e=e+2|0):(n=0,e=e+2|0):(n=3,e=e+2|0):66!==i?79!==i?i>=88&&(n=1,e=e+2|0):(n=0,e=e+2|0):(n=3,e=e+2|0)),[e,t,n]}function l(r){var t=_(r),n=t[0],e=s(t[2]),a=r.length,i=f(n<a?r.charCodeAt(n):0);if(i<0||i>=e)throw[o.failure,"int_of_string"];var u=t[1]*function(t,n){for(;;){var i=n,u=t;if(i===a)return u;var c=r.charCodeAt(i);if(95!==c){var s=f(c);if(s<0||s>=e)throw[o.failure,"int_of_string"];var _=e*u+s;if(_>4294967295)throw[o.failure,"int_of_string"];n=i+1|0,t=_}else n=i+1|0}}(i,n+1|0),c=0|u;if(10===e&&u!==c)throw[o.failure,"int_of_string"];return c}function m(r){return r>=65&&r<=90||r>=192&&r<=214||r>=216&&r<=222?r+32|0:r}function v(r){var t=r.length;if(t>31)throw[o.invalid_argument,"format_int: format too long"];for(var n=["+","-"," ",0,2,0,0,0,1,-1,"f"],e=0;;){var i=e;if(i>=t)return n;var u=r.charCodeAt(i),c=0;if(u>=69)if(u>=88)if(u>=121)c=1;else switch(u-88|0){case 0:n[4]=1,n[7]=1,e=i+1|0;continue;case 13:case 14:case 15:c=5;break;case 12:case 17:c=4;break;case 23:n[4]=0,e=i+1|0;continue;case 29:n[4]=2,e=i+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:c=1;break;case 32:n[4]=1,e=i+1|0;continue}else{if(!(u>=72)){n[5]=1,n[7]=1,n[10]=String.fromCharCode(m(u)),e=i+1|0;continue}c=1}else{var f=u-32|0;if(f>25||f<0)c=1;else switch(f){case 3:n[3]=1,e=i+1|0;continue;case 0:case 11:c=2;break;case 13:n[0]="-",e=i+1|0;continue;case 14:n[9]=0;for(var s=i+1|0;function(t){return function(){var n=r.charCodeAt(t)-48|0;return+(n>=0&&n<=9)}}(s)();)n[9]=(a.imul(n[9],10)+r.charCodeAt(s)|0)-48|0,s=s+1|0;e=s;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:c=1;break;case 16:n[2]="0",e=i+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:c=3}}switch(c){case 1:e=i+1|0;continue;case 2:n[1]=String.fromCharCode(u),e=i+1|0;continue;case 3:n[6]=0;for(var _=i;function(t){return function(){var n=r.charCodeAt(t)-48|0;return+(n>=0&&n<=9)}}(_)();)n[6]=(a.imul(n[6],10)+r.charCodeAt(_)|0)-48|0,_=_+1|0;e=_;continue;case 4:n[5]=1,n[4]=2,e=i+1|0;continue;case 5:n[5]=1,n[10]=String.fromCharCode(u),e=i+1|0;continue}}}function d(r,t){var n=r[0],e=r[1],a=r[2],i=r[3],u=r[4],o=r[5],c=r[6],f=r[7],s=r[8],_=t.length;o&&(s<0||"-"!==e)&&(_=_+1|0),i&&(u?1===u&&(_=_+2|0):_=_+1|0);var l="";if("+"===n&&" "===a)for(var m=_,v=c-1|0;m<=v;++m)l+=a;if(o&&(s<0?l+="-":"-"!==e&&(l+=e)),i&&0===u&&(l+="0"),i&&1===u&&(l+="0x"),"+"===n&&"0"===a)for(var d=_,g=c-1|0;d<=g;++d)l+=a;if(l=f?l+t.toUpperCase():l+t,"-"===n)for(var h=_,y=c-1|0;h<=y;++h)l+=" ";return l}function g(r,t){if("%d"===r)return String(t);var n=v(r),e=t,a=(e<0?n[5]?(n[8]=-1,-e):e>>>0:e).toString(function(r){switch(n[4]){case 0:return 8;case 1:return 16;case 2:return 10}}());if(n[9]>=0){n[2]=" ";var i=n[9]-a.length|0;i>0&&(a=u.repeat(i,"0")+a)}return d(n,a)}var h=function(r,t){var n=+r;if(r.length>0&&n==n)return n;if(n=+(r=r.replace(/_/g,"")),r.length>0&&n==n||/^[+-]?nan$/i.test(r))return n;if(/^ *0x[0-9a-f_]+p[+-]?[0-9_]+/i.test(r)){var e=r.indexOf("p");e=-1==e?r.indexOf("P"):e;var a=+r.substring(e+1);return(n=+r.substring(0,e))*Math.pow(2,a)}return/^\+?inf(inity)?$/i.test(r)?1/0:/^-inf(inity)?$/i.test(r)?-1/0:void t("float_of_string")},y=g,p=g,b=l,w=l;t.caml_format_float=function(r,t){var n=v(r),e=n[9]<0?6:n[9],a=t<0?(n[8]=-1,-t):t,i="";if(isNaN(a))i="nan",n[2]=" ";else if(isFinite(a))switch(n[10]){case"e":var u=(i=a.toExponential(e)).length;"e"===i[u-3|0]&&(i=i.slice(0,u-1|0)+"0"+i.slice(u-1|0));break;case"f":i=a.toFixed(e);break;case"g":var o=0!==e?e:1,c=(i=a.toExponential(o-1|0)).indexOf("e"),f=0|Number(i.slice(c+1|0));if(f<-4||a>=1e21||a.toFixed().length>o){for(var s=c-1|0;"0"===i[s];)s=s-1|0;"."===i[s]&&(s=s-1|0);var _=(i=i.slice(0,s+1|0)+i.slice(c)).length;"e"===i[_-3|0]&&(i=i.slice(0,_-1|0)+"0"+i.slice(_-1|0))}else{var l=o;if(f<0)l=l-(f+1|0)|0,i=a.toFixed(l);else for(;+((i=a.toFixed(l)).length>(o+1|0));)l=l-1|0;if(0!==l){for(var m=i.length-1|0;"0"===i[m];)m=m-1|0;"."===i[m]&&(m=m-1|0),i=i.slice(0,m+1|0)}}}else i="inf",n[2]=" ";return d(n,i)},t.caml_format_int=g,t.caml_nativeint_format=y,t.caml_int32_format=p,t.caml_float_of_string=function(r){return e._2(h,r,c)},t.caml_int64_format=function(r,t){var n=v(r),e=n[5]&&i.lt(t,[0,0])?(n[8]=-1,i.neg(t)):t,a="";switch(n[4]){case 0:var o=[0,8],c="01234567";if(i.lt(e,[0,0])){var f=i.discard_sign(e),s=i.div_mod(f,o),_=i.add([268435456,0],s[0]),l=s[1];for(a=String.fromCharCode(c.charCodeAt(0|l[1]))+a;i.neq(_,[0,0]);){var m=i.div_mod(_,o);_=m[0],l=m[1],a=String.fromCharCode(c.charCodeAt(0|l[1]))+a}}else{var g=i.div_mod(e,o),h=g[0],y=g[1];for(a=String.fromCharCode(c.charCodeAt(0|y[1]))+a;i.neq(h,[0,0]);){var p=i.div_mod(h,o);h=p[0],y=p[1],a=String.fromCharCode(c.charCodeAt(0|y[1]))+a}}break;case 1:a=i.to_hex(e)+a;break;case 2:var b=[0,10];if(i.lt(e,[0,0])){var w=i.discard_sign(e),x=i.div_mod(w,b),k=i.div_mod(i.add([0,8],x[1]),b),M=i.add(i.add([214748364,3435973836],x[0]),k[0]),C=k[1];for(a=String.fromCharCode("0123456789".charCodeAt(0|C[1]))+a;i.neq(M,[0,0]);){var S=i.div_mod(M,b);M=S[0],C=S[1],a=String.fromCharCode("0123456789".charCodeAt(0|C[1]))+a}}else{var P=i.div_mod(e,b),A=P[0],T=P[1];for(a=String.fromCharCode("0123456789".charCodeAt(0|T[1]))+a;i.neq(A,[0,0]);){var D=i.div_mod(A,b);A=D[0],T=D[1],a=String.fromCharCode("0123456789".charCodeAt(0|T[1]))+a}}}if(n[9]>=0){n[2]=" ";var L=n[9]-a.length|0;L>0&&(a=u.repeat(L,"0")+a)}return d(n,a)},t.caml_int_of_string=l,t.caml_int32_of_string=b,t.caml_int64_of_string=function(r){var t,n=_(r),e=n[2],a=n[0],u=i.of_int32(s(e)),c=i.of_int32(n[1]);switch(e){case 0:t=[536870911,4294967295];break;case 1:t=[268435455,4294967295];break;case 2:t=[429496729,2576980377];break;case 3:t=[2147483647,4294967295]}var l=r.length,m=a<l?r.charCodeAt(a):0,v=i.of_int32(f(m));if(i.lt(v,[0,0])||i.ge(v,u))throw[o.failure,"int64_of_string"];var d=i.mul(c,function(n,e){for(;;){var a=e,c=n;if(a===l)return c;var s=r.charCodeAt(a);if(95!==s){var _=i.of_int32(f(s));if(i.lt(_,[0,0])||i.ge(_,u)||i.gt(c,t))throw[o.failure,"int64_of_string"];e=a+1|0,n=i.add(i.mul(u,c),_)}else e=a+1|0}}(v,a+1|0)),g=i.or_(d,[0,0]);if(i.eq(u,[0,10])&&i.neq(d,g))throw[o.failure,"int64_of_string"];return g},t.caml_nativeint_of_string=w},function(r,t,n){"use strict";t.make=function(r){return[r]}},function(r,t,n){"use strict";var e=n(13),a=e.Vec3[1](0,-.4,2),i=e.Vec3[1](0,.4,4);t.tickDuration=.5,t.tileCols=12,t.tileRows=26,t.blinkTime=.7,t.dropAnimDuration=.8,t.dropDownBeforeTouchDown=.15,t.dropDownBeforeTick=.5,t.pointLight=a,t.camera=i},function(r,t,n){"use strict";var e=n(11),a=n(103),i=n(17),u=n(26),o=n(5);function c(r,t,n){for(var e=i.caml_make_vect(r,[]),a=0,u=r-1|0;a<=u;++a)e[a]=i.caml_make_vect(t,n);return e}function f(r){var t=r.length;return t?i.caml_array_sub(r,0,t):[]}function s(r,t,n,e,a){if(a<0||t<0||t>(r.length-a|0)||e<0||e>(n.length-a|0))throw[o.invalid_argument,"Array.blit"];return i.caml_array_blit(r,t,n,e,a)}var _=u.create("Array.Bottom");function l(r,t){var n=function(n,a,u,o,c,f,_){for(var l=n+a|0,m=o+c|0,v=n,d=i.caml_array_get(t,n),g=o,h=i.caml_array_get(u,o),y=_;;){var p=y,b=h,w=g,x=d,k=v;if(e._2(r,x,b)<=0){i.caml_array_set(f,p,x);var M=k+1|0;if(M<l){y=p+1|0,d=i.caml_array_get(t,M),v=M;continue}return s(u,w,f,p+1|0,m-w|0)}i.caml_array_set(f,p,b);var C=w+1|0;if(!(C<m))return s(t,k,f,p+1|0,l-k|0);y=p+1|0,h=i.caml_array_get(u,C),g=C}},a=function(n,a,u,o){for(var c=0,f=o-1|0;c<=f;++c){for(var s=i.caml_array_get(t,n+c|0),_=(u+c|0)-1|0;_>=u&&e._2(r,i.caml_array_get(a,_),s)>0;)i.caml_array_set(a,_+1|0,i.caml_array_get(a,_)),_=_-1|0;i.caml_array_set(a,_+1|0,s)}return 0},u=function(r,e,i,o){if(o<=5)return a(r,e,i,o);var c=o/2|0,f=o-c|0;return u(r+c|0,e,i+c|0,f),u(r,t,r+f|0,c),n(r+f|0,c,e,i+c|0,f,e,i)},o=t.length;if(o<=5)return a(0,t,0,o);var c=o/2|0,f=o-c|0,_=i.caml_make_vect(f,i.caml_array_get(t,0));return u(c,_,0,f),u(0,t,f,c),n(f,c,_,0,f,t,0)}var m=c,v=i.caml_array_concat,d=l;t.init=function(r,t){if(r){if(r<0)throw[o.invalid_argument,"Array.init"];for(var n=i.caml_make_vect(r,e._1(t,0)),a=1,u=r-1|0;a<=u;++a)n[a]=e._1(t,a);return n}return[]},t.make_matrix=c,t.create_matrix=m,t.append=function(r,t){var n=r.length;return n?t.length?r.concat(t):i.caml_array_sub(r,0,n):f(t)},t.concat=v,t.sub=function(r,t,n){if(n<0||t>(r.length-n|0))throw[o.invalid_argument,"Array.sub"];return i.caml_array_sub(r,t,n)},t.copy=f,t.fill=function(r,t,n,e){if(t<0||n<0||t>(r.length-n|0))throw[o.invalid_argument,"Array.fill"];for(var a=t,i=(t+n|0)-1|0;a<=i;++a)r[a]=e;return 0},t.blit=s,t.to_list=function(r){for(var t=r.length-1|0,n=0;;){var e=n,a=t;if(a<0)return e;n=[r[a],e],t=a-1|0}},t.of_list=function(r){if(!r)return[];for(var t=i.caml_make_vect(function(r,t){for(;;){var n=t,e=r;if(!n)return e;t=n[1],r=e+1|0}}(0,r),r[0]),n=1,e=r[1];;){var a=e,u=n;if(!a)return t;t[u]=a[0],e=a[1],n=u+1|0}},t.iter=function(r,t){for(var n=0,a=t.length-1|0;n<=a;++n)e._1(r,t[n]);return 0},t.map=function(r,t){var n=t.length;if(n){for(var a=i.caml_make_vect(n,e._1(r,t[0])),u=1,o=n-1|0;u<=o;++u)a[u]=e._1(r,t[u]);return a}return[]},t.iteri=function(r,t){for(var n=0,a=t.length-1|0;n<=a;++n)e._2(r,n,t[n]);return 0},t.mapi=function(r,t){var n=t.length;if(n){for(var a=i.caml_make_vect(n,e._2(r,0,t[0])),u=1,o=n-1|0;u<=o;++u)a[u]=e._2(r,u,t[u]);return a}return[]},t.fold_left=function(r,t,n){for(var a=t,i=0,u=n.length-1|0;i<=u;++i)a=e._2(r,a,n[i]);return a},t.fold_right=function(r,t,n){for(var a=n,i=t.length-1|0;i>=0;--i)a=e._2(r,t[i],a);return a},t.sort=function(r,t){for(var n=function(n,a){var u=1+((a+a|0)+a|0)|0,o=u;if((u+2|0)<n)return e._2(r,i.caml_array_get(t,u),i.caml_array_get(t,u+1|0))<0&&(o=u+1|0),e._2(r,i.caml_array_get(t,o),i.caml_array_get(t,u+2|0))<0&&(o=u+2|0),o;if((u+1|0)<n&&e._2(r,i.caml_array_get(t,u),i.caml_array_get(t,u+1|0))<0)return u+1|0;if(u<n)return u;throw[_,a]},u=function(u,o,c){try{for(var f=u,s=o,l=c;;){var m=s,v=n(f,m);if(!(e._2(r,i.caml_array_get(t,v),l)>0))return i.caml_array_set(t,m,l);i.caml_array_set(t,m,i.caml_array_get(t,v)),s=v}}catch(r){var d=a.internalToOCamlException(r);if(d[0]===_)return i.caml_array_set(t,d[1],c);throw d}},c=function(r,e){try{for(var u=r,o=e;;){var c=o,f=n(u,c);i.caml_array_set(t,c,i.caml_array_get(t,f)),o=f}}catch(r){var s=a.internalToOCamlException(r);if(s[0]===_)return s[1];throw s}},f=function(n,a){for(;;){var u=n,c=(u-1|0)/3|0;if(u===c)throw[o.assert_failure,["array.ml",168,4]];if(e._2(r,i.caml_array_get(t,c),a)<0){if(i.caml_array_set(t,u,i.caml_array_get(t,c)),c>0){n=c;continue}return i.caml_array_set(t,0,a)}return i.caml_array_set(t,u,a)}},s=t.length,l=((s+1|0)/3|0)-1|0;l>=0;--l)u(s,l,i.caml_array_get(t,l));for(var m=s-1|0;m>=2;--m){var v=i.caml_array_get(t,m);i.caml_array_set(t,m,i.caml_array_get(t,0)),f(c(m,0),v)}if(s>1){var d=i.caml_array_get(t,1);return i.caml_array_set(t,1,i.caml_array_get(t,0)),i.caml_array_set(t,0,d)}return 0},t.stable_sort=l,t.fast_sort=d},function(r,t,n){"use strict";var e=n(12),a=n(2);t.chr=function(r){if(r<0||r>255)throw[a.invalid_argument,"Char.chr"];return r},t.escaped=function(r){var t=0;if(r>=40){if(92===r)return"\\\\";t=r>=127?1:2}else if(r>=32){if(r>=39)return"\\'";t=2}else if(r>=14)t=1;else switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:t=1;break;case 13:return"\\r"}switch(t){case 1:var n=new Array(4);return n[0]=92,n[1]=48+(r/100|0)|0,n[2]=48+(r/10|0)%10|0,n[3]=48+r%10|0,e.bytes_to_string(n);case 2:var a=new Array(1);return a[0]=r,e.bytes_to_string(a)}},t.lowercase=function(r){return r>=65&&r<=90||r>=192&&r<=214||r>=216&&r<=222?r+32|0:r},t.uppercase=function(r){return r>=97&&r<=122||r>=224&&r<=246||r>=248&&r<=254?r-32|0:r},t.compare=function(r,t){return r-t|0}},function(r,t,n){"use strict";var e=n(11),a=n(14),i=n(39),u=n(55),o=n(5);function c(r){throw[o.failure,r]}function f(r){return r>=65?r>=97?r>=123?-1:r-87|0:r>=91?-1:r-55|0:r>57||r<48?-1:r-48|0}function s(r){switch(r){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function _(r){var t=1,n=2,e=0;"-"===r[e]&&(t=-1,e=e+1|0);var a=r.charCodeAt(e),i=r.charCodeAt(e+1|0);return 48===a&&(i>=89?98!==i?111!==i?120===i&&(n=1,e=e+2|0):(n=0,e=e+2|0):(n=3,e=e+2|0):66!==i?79!==i?i>=88&&(n=1,e=e+2|0):(n=0,e=e+2|0):(n=3,e=e+2|0)),[e,t,n]}function l(r){var t=_(r),n=t[0],e=s(t[2]),a=r.length,i=f(n<a?r.charCodeAt(n):0);if(i<0||i>=e)throw[o.failure,"int_of_string"];var u=t[1]*function(t,n){for(;;){var i=n,u=t;if(i===a)return u;var c=r.charCodeAt(i);if(95!==c){var s=f(c);if(s<0||s>=e)throw[o.failure,"int_of_string"];var _=e*u+s;if(_>4294967295)throw[o.failure,"int_of_string"];n=i+1|0,t=_}else n=i+1|0}}(i,n+1|0),c=0|u;if(10===e&&u!==c)throw[o.failure,"int_of_string"];return c}function m(r){return r>=65&&r<=90||r>=192&&r<=214||r>=216&&r<=222?r+32|0:r}function v(r){var t=r.length;if(t>31)throw[o.invalid_argument,"format_int: format too long"];for(var n=["+","-"," ",0,2,0,0,0,1,-1,"f"],e=0;;){var i=e;if(i>=t)return n;var u=r.charCodeAt(i),c=0;if(u>=69)if(u>=88)if(u>=121)c=1;else switch(u-88|0){case 0:n[4]=1,n[7]=1,e=i+1|0;continue;case 13:case 14:case 15:c=5;break;case 12:case 17:c=4;break;case 23:n[4]=0,e=i+1|0;continue;case 29:n[4]=2,e=i+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:c=1;break;case 32:n[4]=1,e=i+1|0;continue}else{if(!(u>=72)){n[5]=1,n[7]=1,n[10]=String.fromCharCode(m(u)),e=i+1|0;continue}c=1}else{var f=u-32|0;if(f>25||f<0)c=1;else switch(f){case 3:n[3]=1,e=i+1|0;continue;case 0:case 11:c=2;break;case 13:n[0]="-",e=i+1|0;continue;case 14:n[9]=0;for(var s=i+1|0;function(t){return function(){var n=r.charCodeAt(t)-48|0;return+(n>=0&&n<=9)}}(s)();)n[9]=(a.imul(n[9],10)+r.charCodeAt(s)|0)-48|0,s=s+1|0;e=s;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:c=1;break;case 16:n[2]="0",e=i+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:c=3}}switch(c){case 1:e=i+1|0;continue;case 2:n[1]=String.fromCharCode(u),e=i+1|0;continue;case 3:n[6]=0;for(var _=i;function(t){return function(){var n=r.charCodeAt(t)-48|0;return+(n>=0&&n<=9)}}(_)();)n[6]=(a.imul(n[6],10)+r.charCodeAt(_)|0)-48|0,_=_+1|0;e=_;continue;case 4:n[5]=1,n[4]=2,e=i+1|0;continue;case 5:n[5]=1,n[10]=String.fromCharCode(u),e=i+1|0;continue}}}function d(r,t){var n=r[0],e=r[1],a=r[2],i=r[3],u=r[4],o=r[5],c=r[6],f=r[7],s=r[8],_=t.length;o&&(s<0||"-"!==e)&&(_=_+1|0),i&&(u?1===u&&(_=_+2|0):_=_+1|0);var l="";if("+"===n&&" "===a)for(var m=_,v=c-1|0;m<=v;++m)l+=a;if(o&&(s<0?l+="-":"-"!==e&&(l+=e)),i&&0===u&&(l+="0"),i&&1===u&&(l+="0x"),"+"===n&&"0"===a)for(var d=_,g=c-1|0;d<=g;++d)l+=a;if(l=f?l+t.toUpperCase():l+t,"-"===n)for(var h=_,y=c-1|0;h<=y;++h)l+=" ";return l}function g(r,t){if("%d"===r)return String(t);var n=v(r),e=t,a=(e<0?n[5]?(n[8]=-1,-e):e>>>0:e).toString(function(r){switch(n[4]){case 0:return 8;case 1:return 16;case 2:return 10}}());if(n[9]>=0){n[2]=" ";var i=n[9]-a.length|0;i>0&&(a=u.repeat(i,"0")+a)}return d(n,a)}var h=function(r,t){var n=+r;if(r.length>0&&n==n)return n;if(n=+(r=r.replace(/_/g,"")),r.length>0&&n==n||/^[+-]?nan$/i.test(r))return n;if(/^ *0x[0-9a-f_]+p[+-]?[0-9_]+/i.test(r)){var e=r.indexOf("p");e=-1==e?r.indexOf("P"):e;var a=+r.substring(e+1);return(n=+r.substring(0,e))*Math.pow(2,a)}return/^\+?inf(inity)?$/i.test(r)?1/0:/^-inf(inity)?$/i.test(r)?-1/0:void t("float_of_string")},y=g,p=g,b=l,w=l;t.caml_format_float=function(r,t){var n=v(r),e=n[9]<0?6:n[9],a=t<0?(n[8]=-1,-t):t,i="";if(isNaN(a))i="nan",n[2]=" ";else if(isFinite(a))switch(n[10]){case"e":var u=(i=a.toExponential(e)).length;"e"===i[u-3|0]&&(i=i.slice(0,u-1|0)+"0"+i.slice(u-1|0));break;case"f":i=a.toFixed(e);break;case"g":var o=0!==e?e:1,c=(i=a.toExponential(o-1|0)).indexOf("e"),f=0|Number(i.slice(c+1|0));if(f<-4||a>=1e21||a.toFixed().length>o){for(var s=c-1|0;"0"===i[s];)s=s-1|0;"."===i[s]&&(s=s-1|0);var _=(i=i.slice(0,s+1|0)+i.slice(c)).length;"e"===i[_-3|0]&&(i=i.slice(0,_-1|0)+"0"+i.slice(_-1|0))}else{var l=o;if(f<0)l=l-(f+1|0)|0,i=a.toFixed(l);else for(;+((i=a.toFixed(l)).length>(o+1|0));)l=l-1|0;if(0!==l){for(var m=i.length-1|0;"0"===i[m];)m=m-1|0;"."===i[m]&&(m=m-1|0),i=i.slice(0,m+1|0)}}}else i="inf",n[2]=" ";return d(n,i)},t.caml_format_int=g,t.caml_nativeint_format=y,t.caml_int32_format=p,t.caml_float_of_string=function(r){return e._2(h,r,c)},t.caml_int64_format=function(r,t){var n=v(r),e=n[5]&&i.lt(t,[0,0])?(n[8]=-1,i.neg(t)):t,a="";switch(n[4]){case 0:var o=[0,8],c="01234567";if(i.lt(e,[0,0])){var f=i.discard_sign(e),s=i.div_mod(f,o),_=i.add([268435456,0],s[0]),l=s[1];for(a=String.fromCharCode(c.charCodeAt(0|l[1]))+a;i.neq(_,[0,0]);){var m=i.div_mod(_,o);_=m[0],l=m[1],a=String.fromCharCode(c.charCodeAt(0|l[1]))+a}}else{var g=i.div_mod(e,o),h=g[0],y=g[1];for(a=String.fromCharCode(c.charCodeAt(0|y[1]))+a;i.neq(h,[0,0]);){var p=i.div_mod(h,o);h=p[0],y=p[1],a=String.fromCharCode(c.charCodeAt(0|y[1]))+a}}break;case 1:a=i.to_hex(e)+a;break;case 2:var b=[0,10];if(i.lt(e,[0,0])){var w=i.discard_sign(e),x=i.div_mod(w,b),k=i.div_mod(i.add([0,8],x[1]),b),M=i.add(i.add([214748364,3435973836],x[0]),k[0]),C=k[1];for(a=String.fromCharCode("0123456789".charCodeAt(0|C[1]))+a;i.neq(M,[0,0]);){var S=i.div_mod(M,b);M=S[0],C=S[1],a=String.fromCharCode("0123456789".charCodeAt(0|C[1]))+a}}else{var P=i.div_mod(e,b),A=P[0],T=P[1];for(a=String.fromCharCode("0123456789".charCodeAt(0|T[1]))+a;i.neq(A,[0,0]);){var D=i.div_mod(A,b);A=D[0],T=D[1],a=String.fromCharCode("0123456789".charCodeAt(0|T[1]))+a}}}if(n[9]>=0){n[2]=" ";var L=n[9]-a.length|0;L>0&&(a=u.repeat(L,"0")+a)}return d(n,a)},t.caml_int_of_string=l,t.caml_int32_of_string=b,t.caml_int64_of_string=function(r){var t,n=_(r),e=n[2],a=n[0],u=i.of_int32(s(e)),c=i.of_int32(n[1]);switch(e){case 0:t=[536870911,4294967295];break;case 1:t=[268435455,4294967295];break;case 2:t=[429496729,2576980377];break;case 3:t=[2147483647,4294967295]}var l=r.length,m=a<l?r.charCodeAt(a):0,v=i.of_int32(f(m));if(i.lt(v,[0,0])||i.ge(v,u))throw[o.failure,"int64_of_string"];var d=i.mul(c,function(n,e){for(;;){var a=e,c=n;if(a===l)return c;var s=r.charCodeAt(a);if(95!==s){var _=i.of_int32(f(s));if(i.lt(_,[0,0])||i.ge(_,u)||i.gt(c,t))throw[o.failure,"int64_of_string"];e=a+1|0,n=i.add(i.mul(u,c),_)}else e=a+1|0}}(v,a+1|0)),g=i.or_(d,[0,0]);if(i.eq(u,[0,10])&&i.neq(d,g))throw[o.failure,"int64_of_string"];return g},t.caml_nativeint_of_string=w},function(r,t){var n,e,a=r.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function o(r){if(n===setTimeout)return setTimeout(r,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(r,0);try{return n(r,0)}catch(t){try{return n.call(null,r,0)}catch(t){return n.call(this,r,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(r){n=i}try{e="function"==typeof clearTimeout?clearTimeout:u}catch(r){e=u}}();var c,f=[],s=!1,_=-1;function l(){s&&c&&(s=!1,c.length?f=c.concat(f):_=-1,f.length&&m())}function m(){if(!s){var r=o(l);s=!0;for(var t=f.length;t;){for(c=f,f=[];++_<t;)c&&c[_].run();_=-1,t=f.length}c=null,s=!1,function(r){if(e===clearTimeout)return clearTimeout(r);if((e===u||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(r);try{e(r)}catch(t){try{return e.call(null,r)}catch(t){return e.call(this,r)}}}(r)}}function v(r,t){this.fun=r,this.array=t}function d(){}a.nextTick=function(r){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new v(r,t)),1!==f.length||s||o(m)},v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=d,a.addListener=d,a.once=d,a.off=d,a.removeListener=d,a.removeAllListeners=d,a.emit=d,a.prependListener=d,a.prependOnceListener=d,a.listeners=function(r){return[]},a.binding=function(r){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(r){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(r,t,n){"use strict";var e=n(0),a=n(24);t.Make=function(r){var t=a.create(0,r[2]);return[t,function(n){var i=e._1(r[0],n);if(a.mem(t,i))return a.find(t,i);var u=e._1(r[1],n);return a.add(t,i,u),u}]}},function(r,t,n){"use strict";var e=n(34),a=n(8),i=n(0),u=n(18),o=n(9),c=n(1),f=n(12),s=n(2),_=[];function l(r){var t=r.length,n=f.caml_create_string(t);return f.caml_blit_bytes(r,0,n,0,t),n}function m(r,t,n){if(t<0||n<0||t>(r.length-n|0))throw[s.invalid_argument,"String.sub / Bytes.sub"];var e=f.caml_create_string(n);return f.caml_blit_bytes(r,t,e,0,n),e}function v(r){var t=r-9|0;return t>4||t<0?23!==t?0:1:2!==t?1:0}function d(r,t){var n=t.length;if(n){for(var e=f.caml_create_string(n),a=0,u=n-1|0;a<=u;++a)e[a]=i._1(r,t[a]);return e}return t}function g(r,t){if(t.length){var n=l(t);return n[0]=i._1(r,t[0]),n}return t}function h(r,t,n,e){for(;;){var a=n;if(a>=t)throw s.not_found;if(r[a]===e)return a;n=a+1|0}}function y(r,t,n){for(;;){var e=t;if(e<0)throw s.not_found;if(r[e]===n)return e;t=e-1|0}}function p(r,t,n){var e=r.length;if(t<0||t>e)throw[s.invalid_argument,"String.contains_from / Bytes.contains_from"];try{return h(r,e,t,n),1}catch(r){if(r===s.not_found)return 0;throw r}}var b=u.caml_compare,w=f.bytes_to_string,x=f.bytes_of_string;t.make=function(r,t){var n=f.caml_create_string(r);return f.caml_fill_string(n,0,r,t),n},t.init=function(r,t){for(var n=f.caml_create_string(r),e=0,a=r-1|0;e<=a;++e)n[e]=i._1(t,e);return n},t.empty=_,t.copy=l,t.of_string=function(r){return l(f.bytes_of_string(r))},t.to_string=function(r){return f.bytes_to_string(l(r))},t.sub=m,t.sub_string=function(r,t,n){return f.bytes_to_string(m(r,t,n))},t.extend=function(r,t,n){var e=(r.length+t|0)+n|0,a=f.caml_create_string(e),i=t<0?[0|-t,0]:[0,t],u=i[1],o=i[0],s=c.min(r.length-o|0,e-u|0);return s>0&&f.caml_blit_bytes(r,o,a,u,s),a},t.fill=function(r,t,n,e){if(t<0||n<0||t>(r.length-n|0))throw[s.invalid_argument,"String.fill / Bytes.fill"];return f.caml_fill_string(r,t,n,e)},t.blit=function(r,t,n,e,a){if(a<0||t<0||t>(r.length-a|0)||e<0||e>(n.length-a|0))throw[s.invalid_argument,"Bytes.blit"];return f.caml_blit_bytes(r,t,n,e,a)},t.blit_string=function(r,t,n,e,a){if(a<0||t<0||t>(r.length-a|0)||e<0||e>(n.length-a|0))throw[s.invalid_argument,"String.blit / Bytes.blit_string"];return f.caml_blit_string(r,t,n,e,a)},t.concat=function(r,t){if(t){var n=t[0],e=[0],i=[0];a.iter(function(r){return e[0]=e[0]+1|0,i[0]=i[0]+r.length|0,0},t);var u=f.caml_create_string(i[0]+o.imul(r.length,e[0]-1|0)|0);f.caml_blit_bytes(n,0,u,0,n.length);var c=[n.length];return a.iter(function(t){return f.caml_blit_bytes(r,0,u,c[0],r.length),c[0]=c[0]+r.length|0,f.caml_blit_bytes(t,0,u,c[0],t.length),c[0]=c[0]+t.length|0,0},t[1]),u}return _},t.cat=function(r,t){return r.concat(t)},t.iter=function(r,t){for(var n=0,e=t.length-1|0;n<=e;++n)i._1(r,t[n]);return 0},t.iteri=function(r,t){for(var n=0,e=t.length-1|0;n<=e;++n)i._2(r,n,t[n]);return 0},t.map=d,t.mapi=function(r,t){var n=t.length;if(n){for(var e=f.caml_create_string(n),a=0,u=n-1|0;a<=u;++a)e[a]=i._2(r,a,t[a]);return e}return t},t.trim=function(r){for(var t=r.length,n=0;n<t&&v(r[n]);)n=n+1|0;for(var e=t-1|0;e>=n&&v(r[e]);)e=e-1|0;return e>=n?m(r,n,1+(e-n|0)|0):_},t.escaped=function(r){for(var t=0,n=0,e=r.length-1|0;n<=e;++n){var a,i=r[n];if(i>=32){var u=i-34|0;a=u>58||u<0?u>=93?4:1:u>57||u<1?2:1}else a=i>=11?13!==i?4:2:i>=8?2:4;t=t+a|0}if(t===r.length)return l(r);var o=f.caml_create_string(t);t=0;for(var c=0,s=r.length-1|0;c<=s;++c){var _=r[c],m=0;if(_>=35)92!==_?_>=127?m=1:o[t]=_:m=2;else if(_>=32)_>=34?m=2:o[t]=_;else if(_>=14)m=1;else switch(_){case 8:o[t]=92,o[t=t+1|0]=98;break;case 9:o[t]=92,o[t=t+1|0]=116;break;case 10:o[t]=92,o[t=t+1|0]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:m=1;break;case 13:o[t]=92,o[t=t+1|0]=114}switch(m){case 1:o[t]=92,o[t=t+1|0]=48+(_/100|0)|0,o[t=t+1|0]=48+(_/10|0)%10|0,o[t=t+1|0]=48+_%10|0;break;case 2:o[t]=92,o[t=t+1|0]=_}t=t+1|0}return o},t.index=function(r,t){return h(r,r.length,0,t)},t.rindex=function(r,t){return y(r,r.length-1|0,t)},t.index_from=function(r,t,n){var e=r.length;if(t<0||t>e)throw[s.invalid_argument,"String.index_from / Bytes.index_from"];return h(r,e,t,n)},t.rindex_from=function(r,t,n){if(t<-1||t>=r.length)throw[s.invalid_argument,"String.rindex_from / Bytes.rindex_from"];return y(r,t,n)},t.contains=function(r,t){return p(r,0,t)},t.contains_from=p,t.rcontains_from=function(r,t,n){if(t<0||t>=r.length)throw[s.invalid_argument,"String.rcontains_from / Bytes.rcontains_from"];try{return y(r,t,n),1}catch(r){if(r===s.not_found)return 0;throw r}},t.uppercase=function(r){return d(e.uppercase,r)},t.lowercase=function(r){return d(e.lowercase,r)},t.capitalize=function(r){return g(e.uppercase,r)},t.uncapitalize=function(r){return g(e.lowercase,r)},t.compare=b,t.unsafe_to_string=w,t.unsafe_of_string=x},function(r,t,n){"use strict";var e=n(16),a=n(14),i=n(55),u=n(5),o=[-2147483648,0],c=[134217727,1],f=[0,1],s=[0,0],_=[-1,4294967295];function l(r){return+(0!=(2147483648&r))}function m(r,t){var n=t[1],e=r[1],a=e+n&4294967295,i=l(e)&&(l(n)||!l(a))||l(n)&&!l(a)?1:0;return[r[0]+t[0]+i&4294967295,a>>>0]}function v(r){return[-1^r[0],(-1^r[1])>>>0]}function d(r,t){return r[0]===t[0]?+(r[1]===t[1]):0}function g(r){return d(r,o)?o:m(v(r),f)}function h(r,t){if(t){var n=r[1];return t>=32?[n<<(t-32|0),0]:[n>>>(32-t|0)|r[0]<<t,n<<t>>>0]}return r}function y(r,t){if(t){var n=r[0];return t<32?[n>>t,(n<<(32-t|0)|r[1]>>>t)>>>0]:[n>=0?0:-1,n>>(t-32|0)>>>0]}return r}function p(r){return 0!==r[0]||0!==r[1]?0:1}function b(r,t){for(;;){var n,e=t,a=r,i=0,u=a[0],c=0,f=0,_=0;if(0!==u)_=4;else{if(0===a[1])return s;_=4}if(4===_)if(0!==e[0])f=3;else{if(0===e[1])return s;f=3}if(3===f&&(-2147483648!==u?c=2:0!==a[1]?c=2:(n=e[1],i=1)),2===c){var l=e[0],m=a[1],v=0;if(-2147483648!==l?v=3:0!==e[1]?v=3:(n=m,i=1),3===v){var d=e[1];if(u<0){if(l<0){t=g(e),r=g(a);continue}return g(b(g(a),e))}if(l<0)return g(b(a,g(e)));var h=65535&u,y=m>>>16,p=65535&m,w=65535&l,x=d>>>16,k=65535&d,M=0,C=0,S=0,P=p*k;return M=(C=(C=(S=(P>>>16)+y*k)>>>16)+((S=(65535&S)+p*x)>>>16)+h*k)>>>16,M+=(C=(65535&C)+y*x)>>>16,M+=(C=(65535&C)+p*w)>>>16,[(C&=65535)|(M=M+((u>>>16)*k+h*x+y*w+p*(l>>>16))&65535)<<16,(65535&P|(65535&S)<<16)>>>0]}}if(1===i)return 0==(1&n)?s:o}}function w(r,t){var n=t[0],e=r[0];return e>n?1:e<n?0:+(r[1]>=t[1])}function x(r,t){return r[0]>t[0]?1:r[0]<t[0]?0:+(r[1]>t[1])}function k(r){return 4294967296*r[0]+r[1]}var M=Math.pow(2,32),C=Math.pow(2,63),S=-Math.pow(2,63);function P(r){return isNaN(r)||!isFinite(r)?s:r<=S?o:r+1>=C?c:r<0?g(P(-r)):[r/M|0,(r%M|0)>>>0]}function A(r,t){for(;;){var n=t,e=r,a=e[0],i=0,c=0;if(0!==n[0])c=2;else{if(0===n[1])throw u.division_by_zero;c=2}if(2===c)if(-2147483648!==a)if(0!==a)i=1;else{if(0===e[1])return s;i=1}else if(0!==e[1])i=1;else{if(d(n,f)||d(n,_))return e;if(d(n,o))return f;var l=n[0],v=h(A(y(e,1),n),1),M=0;if(0!==v[0])M=3;else{if(0===v[1])return l<0?f:g(f);M=3}if(3===M)return m(v,A(m(e,g(b(n,v))),n))}if(1===i){var C=n[0],S=0;if(-2147483648!==C)S=2;else{if(0===n[1])return s;S=2}if(2===S){if(a<0){if(C<0){t=g(n),r=g(e);continue}return g(A(g(e),n))}if(C<0)return g(A(e,g(n)));for(var T=s,D=e;w(D,n);){for(var L=Math.max(1,Math.floor(k(D)/k(n))),N=Math.ceil(Math.log(L)/Math.LN2),U=N<=48?1:Math.pow(2,N-48),V=P(L),z=b(V,n);z[0]<0||x(z,D);)z=b(V=P(L-=U),n);p(V)&&(V=f),T=m(T,V),D=m(D,g(z))}return T}}}}t.min_int=o,t.max_int=c,t.one=f,t.zero=s,t.not=v,t.of_int32=function(r){return[r<0?-1:0,r>>>0]},t.to_int32=function(r){return 0|r[1]},t.add=m,t.neg=g,t.sub=function(r,t){return m(r,g(t))},t.lsl_=h,t.lsr_=function(r,t){if(t){var n=r[0],e=t-32|0;return e?e>0?[0,n>>>e>>>0]:[n>>>t,(n<<(0|-e)|r[1]>>>t)>>>0]:[0,n>>>0]}return r},t.asr_=y,t.is_zero=p,t.mul=b,t.xor=function(r,t){return[r[0]^t[0],(r[1]^t[1])>>>0]},t.or_=function(r,t){return[r[0]|t[0],(r[1]|t[1])>>>0]},t.and_=function(r,t){return[r[0]&t[0],(r[1]&t[1])>>>0]},t.swap=function(r){return[a.caml_int32_bswap(r[1]),a.caml_int32_bswap(r[0])>>>0]},t.ge=w,t.eq=d,t.neq=function(r,t){return 1-d(r,t)},t.lt=function(r,t){return 1-w(r,t)},t.gt=x,t.le=function(r,t){return 1-x(r,t)},t.to_float=k,t.of_float=P,t.div=A,t.mod_=function(r,t){return m(r,g(b(A(r,t),t)))},t.div_mod=function(r,t){var n=A(r,t);return[n,m(r,g(b(n,t)))]},t.compare=function(r,t){return e.caml_nativeint_compare(r[0],t[0])||e.caml_nativeint_compare(r[1],t[1])},t.to_hex=function(r){var t=function(r){return(r>>>0).toString(16)},n=r[0],e=r[1],a=0;if(0!==n)a=1;else{if(0===e)return"0";a=1}if(1===a){if(0!==e){if(0!==n){var u=t(r[1]),o=8-u.length|0;return o<=0?t(r[0])+u:t(r[0])+(i.repeat(o,"0")+u)}return t(r[1])}return t(r[0])+"00000000"}},t.discard_sign=function(r){return[2147483647&r[0],r[1]]},t.float_of_bits=function(r){var t=new Int32Array([r[1],r[0]]);return new Float64Array(t.buffer)[0]},t.bits_of_float=function(r){var t=new Float64Array([r]),n=new Int32Array(t.buffer);return[n[1],n[0]>>>0]},t.get64=function(r,t){return[r.charCodeAt(t+4|0)<<32|r.charCodeAt(t+5|0)<<40|r.charCodeAt(t+6|0)<<48|r.charCodeAt(t+7|0)<<56,(r.charCodeAt(t)|r.charCodeAt(t+1|0)<<8|r.charCodeAt(t+2|0)<<16|r.charCodeAt(t+3|0)<<24)>>>0]}},function(r,t,n){"use strict";t.triangles=4,t.triangle_strip=5,t.texture0=33984,t.texture1=33985,t.texture2=33986,t.texture_2d=3553,t.blend=3042,t.texture_wrap_s=10242,t.texture_wrap_t=10243,t.clamp_to_edge=33071,t.src_alpha=770,t.one_minus_src_alpha=771,t.dst_alpha=772,t.depth_test=2929,t.rgb=6407,t.rgba=6408,t.triangle_fan=6,t.array_buffer=34962,t.element_array_buffer=34963,t.array_buffer_binding=34964,t.element_array_buffer_binding=34965,t.stream_draw=35040,t.static_draw=35044,t.dynamic_draw=35048,t.buffer_size=34660,t.buffer_usage=34661,t.float_=5126,t.unsigned_int=5125,t.current_vertex_attrib=34342,t.fragment_shader=35632,t.vertex_shader=35633,t.max_vertex_attribs=34921,t.max_vertex_uniform_vectors=36347,t.max_varying_vectors=36348,t.max_combined_texture_image_units=35661,t.max_vertex_texture_image_units=35660,t.max_texture_image_units=34930,t.max_fragment_uniform_vectors=36349,t.shader_type=35663,t.delete_status=35712,t.link_status=35714,t.validate_status=35715,t.attached_shaders=35717,t.active_uniforms=35718,t.active_attributes=35721,t.shading_language_version=35724,t.current_program=35725,t.compile_status=35713,t.vendor=7936,t.renderer=7937,t.version=7938,t.float_vec2=35664,t.float_vec3=35665,t.float_vec4=35666,t.int_vec2=35667,t.int_vec3=35668,t.int_vec4=35669,t.bool_=35670,t.bool_vec2=35671,t.bool_vec3=35672,t.bool_vec4=35673,t.float_mat2=35674,t.float_mat3=35675,t.float_mat4=35676,t.sampler_2d=35678,t.sampler_cube=35680,t.unpack_flip_y_webgl=37440,t.unpack_premultiply_alpha_webgl=37441,t.context_lost_webgl=37442,t.unpack_colorspace_conversion_webgl=37443,t.browser_default_webgl=37444,t.vertex_attrib_array_enabled=34338,t.vertex_attrib_array_size=34339,t.vertex_attrib_array_stride=34340,t.vertex_attrib_array_type=34341,t.vertex_attrib_array_normalized=34922,t.vertex_attrib_array_pointer=34373,t.vertex_attrib_array_buffer_binding=34975,t.depth_buffer_bit=256,t.stencil_buffer_bit=1024,t.color_buffer_bit=16384,t.unsigned_short=5123,t.unsigned_byte=5121,t.texture_mag_filter=10240,t.texture_min_filter=10241,t.nearest=9728,t.linear=9729,t.nearest_mipmap_nearest=9984,t.linear_mipmap_nearest=9985,t.nearest_mipmap_linear=9986,t.linear_mipmap_linear=9987},function(r,t,n){"use strict";var e=n(8),a=n(0),i=n(120),u=n(64),o=n(9),c=n(58),f=n(1),s=n(40),_=n(2),l=window,m=[l],v=function(){return new(window.AudioContext||window.webkitAudioContext)},d=[function(r){return r},function(){return u.mat4.create()},function(r){return u.mat4.identity(r),0},function(r,t,n){return u.mat4.translate(r,t,n),0},function(r,t,n){return u.mat4.scale(r,t,n),0},function(r,t,n,e){return u.mat4.rotate(r,t,n,e),0},function(r,t,n,e,a,i,o){return u.mat4.ortho(r,t,n,e,a,i,o),0}],g=["web",[function(r,t){var n=new XMLHttpRequest;return n.open("GET",r,!1),n.onreadystatechange=function(){return 4!==n.readyState||200!==n.status&&0!==n.status?0:a._1(t,n.responseText)},n.send(null),0}],[function(r){return r[0].width/window.devicePixelRatio|0},function(r){return r[0].height/window.devicePixelRatio|0},function(r){return 0|r[0].width},function(r){return 0|r[0].height},function(){return window.devicePixelRatio},function(){var r=document.createElement("canvas");return r.style.backgroundColor="black",document.body.appendChild(r),[r,a._1(v,0)]},function(r,t,n){var e=r[0];return e.width=t*window.devicePixelRatio|0,e.height=n*window.devicePixelRatio|0,e.style.width=f.string_of_int(t)+"px",e.style.height=f.string_of_int(n)+"px",0},function(r){return r[0].getContext("webgl",{preserveDrawingBuffer:1,antialias:1})}],[function(r,t,n){var e=r[1],a=new XMLHttpRequest;return a.responseType="arraybuffer",a.open("GET",t,!0),a.onreadystatechange=function(){return 4!==a.readyState||200!==a.status&&0!==a.status?0:(e.decodeAudioData(a.response,n),0)},a.send(null),0},function(r,t,n,e){var a=r[1],i=a.createBufferSource(),u=a.createGain();return u.gain.value=n,i.buffer=t,i.connect(u),u.connect(a.destination),i.start(0),i.loop=c.to_js_boolean(e),0}],[i.keycodeMap],function(r,t,n,u,o,c,f,s,m){var v=r[0];if(t){var d=t[0];v.addEventListener("mousedown",function(r){var t,n=r.button;if(n>2||n<0)throw[_.assert_failure,["reasongl.re",241,19]];t=n;var e=v.getBoundingClientRect(),i=r.clientX-e.left|0,u=r.clientY-e.top|0;return a._4(d,t,0,i,u)})}if(n){var g=n[0];v.addEventListener("mouseup",function(r){var t,n=r.button;if(n>2||n<0)throw[_.assert_failure,["reasongl.re",263,19]];t=n;var e=v.getBoundingClientRect(),i=r.clientX-e.left|0,u=r.clientY-e.top|0;return a._4(g,t,1,i,u)})}if(u){var h=u[0];v.addEventListener("mousemove",function(r){var t=v.getBoundingClientRect(),n=r.clientX-t.left|0,e=r.clientY-t.top|0;return a._2(h,n,e)})}var y=[0];if(o){var p=o[0];l.addEventListener("keydown",function(r){var t=r.which,n=e.fold_left(function(r,n){return r?1:+(n===t)},0,y[0]);return n||(y[0]=[t,y[0]]),a._2(p,i.keycodeMap(t),n)})}if(c){var b=c[0];l.addEventListener("keyup",function(r){var t=r.which;return y[0]=e.filter(function(r){return+(r!==t)})(y[0]),a._1(b,i.keycodeMap(t))})}if(f){var w=f[0];l.addEventListener("resize",function(){return a._1(w,0)})}var x=function(r,t){var n=Date.now();return a._1(s,n-r),v.__hiddenrafid=window.requestAnimationFrame(function(r){return x(n,r)}),0},k=Date.now();return v.__hiddenrafid=window.requestAnimationFrame(function(r){return x(k,r)}),0},function(r,t,n,e,a){return r.clearColor(t,n,e,a),0},function(r){return r.createProgram()},function(r,t){return r.createShader(t)},function(r,t,n){return r.attachShader(t,n),0},function(r,t){return r.deleteShader(t),0},function(r,t,n){return r.shaderSource(t,"#version 100 \n precision highp float; \n"+n),0},function(r,t){return r.compileShader(t),0},function(r,t){return r.linkProgram(t),0},function(r,t){return r.useProgram(t),0},function(r){return r.createBuffer()},function(r,t,n){return r.bindBuffer(t,n),0},function(r){return r.createTexture()},function(r,t){return r.activeTexture(t),0},function(r,t,n){return r.bindTexture(t,n),0},function(r,t,n,e){return r.texParameteri(t,n,e),0},function(r,t){return r.enable(t),0},function(r,t){return r.disable(t),0},function(r,t,n){return r.blendFunc(t,n),0},[function(r,t){switch(r){case 0:return new Float64Array(t);case 1:return new Float32Array(t);case 2:return new Int16Array(t);case 3:return new Uint16Array(t);case 4:return new Int8Array(t);case 5:case 6:return new Uint8Array(t);case 8:throw[_.assert_failure,["reasongl.re",457,17]];case 7:case 9:return new Int32Array(t)}},function(r,t){switch(r){case 0:return new Float64Array(t);case 1:return new Float32Array(t);case 2:return new Int16Array(t);case 3:return new Uint16Array(t);case 4:return new Int8Array(t);case 5:case 6:return new Uint8Array(t);case 8:throw[_.assert_failure,["reasongl.re",470,17]];case 7:case 9:return new Int32Array(t)}},function(r){return r.length},function(r,t){return r.set(t),0},function(r,t,n,e){return t.set(r,n),0},function(r,t){return r[t]},function(r,t){return r[t]},function(r,t,n){return r[t]=n,0},function(r,t,n){return r[t]=n,0},function(r,t,n){return r.subarray(t,t+n|0)}],function(r,t,n,e,a,i,u,o,c,f){return r.texSubImage2D(t,n,e,a,i,u,o,c,f),0},function(r,t,n,e,a){var i=new Uint8Array(o.imul(e,a)<<2);return r.readPixels(t,n,e,a,s.rgba,s.unsigned_byte,i),i},function(r){return r.width},function(r){return r.height},function(r,t,n,e){var i=new Image;return i.src=r,i.addEventListener("load",function(){return a._1(n,[i])}),0},function(r,t,n,e){return r.texImage2D(t,n,s.rgba,s.rgba,s.unsigned_byte,e),0},function(r,t,n){return r.uniform1i(t,n),0},function(r,t,n){return r.uniform1f(t,n),0},function(r,t,n,e){return r.uniform2f(t,n,e),0},function(r,t,n,e,a){return r.uniform3f(t,n,e,a),0},function(r,t,n,e,a,i){return r.uniform4f(t,n,e,a,i),0},function(r,t,n,e,a,i,u){return r.texImage2D(t,n,s.rgba,e,a,i,s.rgba,s.unsigned_byte,u),0},function(r,t,n,e){return r.bufferData(t,n,e),0},function(r,t,n,e,a){return r.viewport(t,n,e,a),0},function(r,t){return r.clear(t),0},function(r,t,n){return r.getUniformLocation(t,n)},function(r,t,n){return r.getAttribLocation(t,n)},function(r,t){return r.enableVertexAttribArray(t),0},function(r,t,n,e,a,i,u){var o=!!a;return r.vertexAttribPointer(t,n,e,o,i,u),0},function(r,t,n){return r.vertexAttribDivisor(t,n),0},d,function(r,t,n){return r.uniformMatrix4fv(t,!1,n),0},function(r,t,n){switch(n){case 0:return r.getProgramParameter(t,r.DELETE_STATUS)?1:0;case 1:return r.getProgramParameter(t,r.LINK_STATUS)?1:0;case 2:return r.getProgramParameter(t,r.VALIDATE_STATUS)?1:0}},function(r,t,n){switch(n){case 0:return r.getShaderParameter(t,r.DELETE_STATUS)?1:0;case 1:return r.getShaderParameter(t,r.COMPILE_STATUS)?1:0;case 2:return r.getShaderParameter(t,r.SHADER_TYPE)}},function(r,t){return r.getShaderInfoLog(t)},function(r,t){return r.getProgramInfoLog(t)},function(r,t){return r.getShaderSource(t)},function(r,t,n,e){return r.drawArrays(t,n,e),0},function(r,t,n,e,a){return r.drawElements(t,n,e,a),0},function(r,t,n,e,a,i){return r.drawElementsInstanced(t,n,e,a,i),0}];t.Document=m,t.createCanvas=function(){return document.createElement("canvas")},t.makeAudioContext=v,t.Gl=g},function(r,t,n){"use strict";var e=n(18),a=n(9),i=n(61),u=n(2),o=[-2147483648,0],c=[134217727,1],f=[0,1],s=[0,0],_=[-1,4294967295];function l(r){return+(0!=(2147483648&r))}function m(r,t){var n=t[1],e=r[1],a=e+n&4294967295,i=l(e)&&(l(n)||!l(a))||l(n)&&!l(a)?1:0;return[r[0]+t[0]+i&4294967295,a>>>0]}function v(r){return[-1^r[0],(-1^r[1])>>>0]}function d(r,t){return r[0]===t[0]?+(r[1]===t[1]):0}function g(r){return d(r,o)?o:m(v(r),f)}function h(r,t){if(t){var n=r[1];return t>=32?[n<<(t-32|0),0]:[n>>>(32-t|0)|r[0]<<t,n<<t>>>0]}return r}function y(r,t){if(t){var n=r[0];return t<32?[n>>t,(n<<(32-t|0)|r[1]>>>t)>>>0]:[n>=0?0:-1,n>>(t-32|0)>>>0]}return r}function p(r){return 0!==r[0]||0!==r[1]?0:1}function b(r,t){for(;;){var n,e=t,a=r,i=0,u=a[0],c=0,f=0,_=0;if(0!==u)_=4;else{if(0===a[1])return s;_=4}if(4===_)if(0!==e[0])f=3;else{if(0===e[1])return s;f=3}if(3===f&&(-2147483648!==u?c=2:0!==a[1]?c=2:(n=e[1],i=1)),2===c){var l=e[0],m=a[1],v=0;if(-2147483648!==l?v=3:0!==e[1]?v=3:(n=m,i=1),3===v){var d=e[1];if(u<0){if(l<0){t=g(e),r=g(a);continue}return g(b(g(a),e))}if(l<0)return g(b(a,g(e)));var h=65535&u,y=m>>>16,p=65535&m,w=65535&l,x=d>>>16,k=65535&d,M=0,C=0,S=0,P=p*k;return M=(C=(C=(S=(P>>>16)+y*k)>>>16)+((S=(65535&S)+p*x)>>>16)+h*k)>>>16,M+=(C=(65535&C)+y*x)>>>16,M+=(C=(65535&C)+p*w)>>>16,[(C&=65535)|(M=M+((u>>>16)*k+h*x+y*w+p*(l>>>16))&65535)<<16,(65535&P|(65535&S)<<16)>>>0]}}if(1===i)return 0==(1&n)?s:o}}function w(r,t){var n=t[0],e=r[0];return e>n?1:e<n?0:+(r[1]>=t[1])}function x(r,t){return r[0]>t[0]?1:r[0]<t[0]?0:+(r[1]>t[1])}function k(r){return 4294967296*r[0]+r[1]}var M=Math.pow(2,32),C=Math.pow(2,63),S=-Math.pow(2,63);function P(r){return isNaN(r)||!isFinite(r)?s:r<=S?o:r+1>=C?c:r<0?g(P(-r)):[r/M|0,(r%M|0)>>>0]}function A(r,t){for(;;){var n=t,e=r,a=e[0],i=0,c=0;if(0!==n[0])c=2;else{if(0===n[1])throw u.division_by_zero;c=2}if(2===c)if(-2147483648!==a)if(0!==a)i=1;else{if(0===e[1])return s;i=1}else if(0!==e[1])i=1;else{if(d(n,f)||d(n,_))return e;if(d(n,o))return f;var l=n[0],v=h(A(y(e,1),n),1),M=0;if(0!==v[0])M=3;else{if(0===v[1])return l<0?f:g(f);M=3}if(3===M)return m(v,A(m(e,g(b(n,v))),n))}if(1===i){var C=n[0],S=0;if(-2147483648!==C)S=2;else{if(0===n[1])return s;S=2}if(2===S){if(a<0){if(C<0){t=g(n),r=g(e);continue}return g(A(g(e),n))}if(C<0)return g(A(e,g(n)));for(var T=s,D=e;w(D,n);){for(var L=Math.max(1,Math.floor(k(D)/k(n))),N=Math.ceil(Math.log(L)/Math.LN2),U=N<=48?1:Math.pow(2,N-48),V=P(L),z=b(V,n);z[0]<0||x(z,D);)z=b(V=P(L-=U),n);p(V)&&(V=f),T=m(T,V),D=m(D,g(z))}return T}}}}t.min_int=o,t.max_int=c,t.one=f,t.zero=s,t.not=v,t.of_int32=function(r){return[r<0?-1:0,r>>>0]},t.to_int32=function(r){return 0|r[1]},t.add=m,t.neg=g,t.sub=function(r,t){return m(r,g(t))},t.lsl_=h,t.lsr_=function(r,t){if(t){var n=r[0],e=t-32|0;return e?e>0?[0,n>>>e>>>0]:[n>>>t,(n<<(0|-e)|r[1]>>>t)>>>0]:[0,n>>>0]}return r},t.asr_=y,t.is_zero=p,t.mul=b,t.xor=function(r,t){return[r[0]^t[0],(r[1]^t[1])>>>0]},t.or_=function(r,t){return[r[0]|t[0],(r[1]|t[1])>>>0]},t.and_=function(r,t){return[r[0]&t[0],(r[1]&t[1])>>>0]},t.swap=function(r){return[a.caml_int32_bswap(r[1]),a.caml_int32_bswap(r[0])>>>0]},t.ge=w,t.eq=d,t.neq=function(r,t){return 1-d(r,t)},t.lt=function(r,t){return 1-w(r,t)},t.gt=x,t.le=function(r,t){return 1-x(r,t)},t.to_float=k,t.of_float=P,t.div=A,t.mod_=function(r,t){return m(r,g(b(A(r,t),t)))},t.div_mod=function(r,t){var n=A(r,t);return[n,m(r,g(b(n,t)))]},t.compare=function(r,t){return e.caml_nativeint_compare(r[0],t[0])||e.caml_nativeint_compare(r[1],t[1])},t.to_hex=function(r){var t=function(r){return(r>>>0).toString(16)},n=r[0],e=r[1],a=0;if(0!==n)a=1;else{if(0===e)return"0";a=1}if(1===a){if(0!==e){if(0!==n){var u=t(r[1]),o=8-u.length|0;return o<=0?t(r[0])+u:t(r[0])+(i.repeat(o,"0")+u)}return t(r[1])}return t(r[0])+"00000000"}},t.discard_sign=function(r){return[2147483647&r[0],r[1]]},t.float_of_bits=function(r){var t=new Int32Array([r[1],r[0]]);return new Float64Array(t.buffer)[0]},t.bits_of_float=function(r){var t=new Float64Array([r]),n=new Int32Array(t.buffer);return[n[1],n[0]>>>0]},t.get64=function(r,t){return[r.charCodeAt(t+4|0)<<32|r.charCodeAt(t+5|0)<<40|r.charCodeAt(t+6|0)<<48|r.charCodeAt(t+7|0)<<56,(r.charCodeAt(t)|r.charCodeAt(t+1|0)<<8|r.charCodeAt(t+2|0)<<16|r.charCodeAt(t+3|0)<<24)>>>0]}},function(r,t,n){"use strict";var e=n(3),a=n(6),i=n(4),u="\n    precision mediump float;\n    attribute vec2 position;\n    uniform mat3 layout;\n    uniform mat3 origMat;\n    varying vec2 vPosition;\n    varying vec2 origPos;\n    varying vec2 texMax;\n    varying vec2 texMin;\n    uniform vec2 pixelSize;\n    varying vec2 pSize;\n    void main() {\n        vPosition = position;\n        vec2 pos = (vec3(position, 1.0) * layout).xy;\n        origPos = (vec3(position, 1.0) * origMat).xy;\n        // Max right and bottom\n        texMax = (vec3(1.0, -1.0, 1.0) * origMat).xy;\n        // Min left and top\n        texMin = (vec3(-1.0, 1.0, 1.0) * origMat).xy;\n        float aspect = pixelSize.x / pixelSize.y;\n        pSize = vec2(texMax.x / 300.0, texMin.y / 300.0 * aspect);\n        gl_Position = vec4(pos, 0.0, 1.0);\n    }\n",o="\n    precision mediump float;\n    varying vec2 vPosition;\n    varying vec2 origPos;\n    varying vec2 texMax;\n    varying vec2 texMin;\n\n    uniform float pDistance;\n    uniform vec2 pixelSize;\n    varying vec2 pSize;\n\n    uniform sampler2D orig;\n\n    float blurred(vec2 point, float pHeight, float pWidth) {\n        // Something like circular box blur\n        // should approximate bokeh effect\n        // https://en.wikipedia.org/wiki/Gaussian_blur\n        // [ 0   .8  1   .8  0  ]\n        // [ .8  1   1   1   .8 ]\n        // [ 1   1  -1-  1   1  ]\n        // [ .8  1   1   1   .8 ]\n        // [ 0   .8  1   .8  0  ]\n        float maxLeft = texMin.x - point.x;\n        float maxBottom = texMax.y - point.y;\n        float maxRight = texMax.x - point.x;\n        float maxTop = texMin.y - point.y;\n        return (\n            texture2D(orig, point + vec2(max(maxLeft, -pWidth), max(maxBottom, -pHeight*2.0))).x * 0.8 +\n            texture2D(orig, point + vec2(0.0, max(maxBottom, -pHeight*2.0))).x +\n            texture2D(orig, point + vec2(min(maxRight, pWidth), max(maxBottom, -pHeight*2.0))).x * 0.8 +\n\n            texture2D(orig, point + vec2(max(maxLeft, -pWidth*2.0), max(maxBottom, -pHeight))).x * 0.8 +\n            texture2D(orig, point + vec2(max(maxLeft, -pWidth), max(maxBottom, -pHeight))).x +\n            texture2D(orig, point + vec2(0.0, max(maxBottom, -pHeight))).x +\n            texture2D(orig, point + vec2(min(maxRight, pWidth), max(maxBottom, -pHeight))).x +\n            texture2D(orig, point + vec2(min(maxRight, pWidth*2.0), max(maxBottom, -pHeight))).x * 0.8 +\n\n            texture2D(orig, point + vec2(max(maxLeft, -pWidth*2.0), 0.0)).x +\n            texture2D(orig, point + vec2(max(maxLeft, -pWidth), 0.0)).x +\n            texture2D(orig, point + vec2(0.0, 0.0)).x +\n            texture2D(orig, point + vec2(min(maxRight, pWidth), 0.0)).x +\n            texture2D(orig, point + vec2(min(maxRight, pWidth*2.0), 0.0)).x +\n\n            texture2D(orig, point + vec2(max(maxLeft, -pWidth*2.0), min(maxTop, pHeight))).x * 0.8 +\n            texture2D(orig, point + vec2(max(maxLeft, -pWidth), min(maxTop, pHeight))).x +\n            texture2D(orig, point + vec2(0.0, min(maxTop, pHeight))).x +\n            texture2D(orig, point + vec2(min(maxRight, pWidth), min(maxTop, pHeight))).x +\n            texture2D(orig, point + vec2(min(maxRight, pWidth*2.0), min(maxTop, pHeight))).x * 0.8 +\n\n            texture2D(orig, point + vec2(max(maxLeft, -pWidth), min(maxTop, pHeight*2.0))).x * 0.8 +\n            texture2D(orig, point + vec2(0.0, min(maxTop, pHeight*2.0))).x +\n            texture2D(orig, point + vec2(min(maxRight, pWidth), min(maxTop, pHeight*2.0))).x * 0.8\n        ) / (13.0 + 0.8 * 8.0);\n    }\n\n    void main() {\n        float pHeight = pSize.y * pDistance;\n        float pWidth = pSize.x * pDistance;\n        float b = blurred(origPos, pHeight, pWidth);\n        gl_FragColor = vec4(b, b, b, 1.0);\n\n        /*\n        float maxLeft = texMin.x - origPos.x;\n        float maxBottom = texMax.y - origPos.y;\n        float maxRight = texMax.x - origPos.x;\n        float maxTop = texMin.y - origPos.y;\n        gl_FragColor = vec4(maxLeft, maxBottom*-1., maxRight, 1.0);\n        */\n        //gl_FragColor = vec4(texture2D(orig, origPos).x, 1.0, 0.0, 1.0);\n    }\n",c=[0];t.blurVertex=u,t.blurFragment=o,t.blurProgram=c,t.makeNode=function(r,t,n,f,s){var _,l=c[0];if(l)_=l[0];else{var m=i.makeProgram(e.Shader[0](u),e.Shader[0](o),0,[[["pDistance",0],0]],0,[[["orig",1],0]],e.VertexBuffer[3](0),[i.defaultVo(0)],0,[1],0,0,0,0);c[0]=[m],_=m}var v=i.makeNode(0,["blur1"],0,0,[_],0,0,[[["orig",i.SceneTex[0](0,0,r)],0]],0,0,[[["pDistance",i.UFloat[0](f)],0]],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[[r,0]],[a.__(2,[n])],0,0,0);return i.makeNode(0,["blur2"],0,0,[_],0,0,[[["orig",i.SceneTex[0](0,0,v)],0]],0,0,[[["pDistance",i.UFloat[0](s)],0]],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[[v,0]],[a.__(2,[t])],0,0,0)}},function(r,t,n){"use strict";var e=n(11),a=n(75),i=n(15);function u(r,t,n){return"\n        float cols = "+i.string_of_float(r)+";\n        float rows = "+i.string_of_float(t)+";\n        float cols2 = cols * 2.0;\n        float rows2 = rows * 2.0;\n        point.x = mod(point.x, 1.0 / cols) - 1.0 / cols2;\n        point.y = mod(point.y, 1.0 / rows) - 1.0 / rows2;\n        float boxWidth = 1.0 / cols2;\n        float boxHeight = 1.0 / rows2;\n        float boxDepth = 0.005;\n        float box = length(max(abs(point) - vec3(boxWidth, boxHeight, boxDepth), vec3(0.0, 0.0, 0.0)));\n        // Octahedron towards z\n        /*\n        float rot = 20.0;\n        mat3 xrot = mat3(\n            1.0, 0.0, 0.0,\n            0.0, cos(rot), -sin(rot),\n            0.0, sin(rot), cos(rot)\n        );\n        point = point * xrot;\n        */\n        float d = 0.0;\n        // Dont know too much of what I'm doing here..\n        // sdpyramid from https://www.shadertoy.com/view/Xds3zN with some modifications\n        vec3 octa = vec3(0.5 * boxHeight / boxWidth, 0.5, 0.24);\n        d = max( d, abs( dot(point, vec3( -octa.x, 0, octa.z )) ));\n        d = max( d, abs( dot(point, vec3(  octa.x, 0, octa.z )) ));\n        d = max( d, abs( dot(point, vec3(  0, -octa.y, octa.z )) ));\n        d = max( d, abs( dot(point, vec3(  0, octa.y, octa.z )) ));\n        // Some spacing added, maybe this should be calibrated to a pixel\n        float o = d - octa.z / (rows + "+i.string_of_float(n)+");\n        // Intersection\n        //return o;\n        return max(o, box);\n    "}var o=[function(r){return[r[0],r[1],r[2],a.makeHash(r[3])]},function(r){return a.makeProgram(r[3])},3],c=n(37).Make(o);t.sdfDist=u,t.StoreSpec=o,t.Programs=c,t.makeNode=function(r,t,n,i,o,f,s,_,l,m,v){var d=m?m[0]:1.3,g=r/t,h=_?0:1,y=a.make(u(r,t,d),h,_,n,0,0,f,0,o,0,0,0),p=[r,t,d,y],b=e._1(c[1],p);return a.makeNode(y,s,["sdfTiles"],[g],i,l,0,[b],0)}},function(r,t,n){"use strict";var e=n(3),a=n(8),i=n(6),u=n(0),o=n(24),c=n(77),f=n(46);function s(r,t){if(o.mem(r[2],t))return o.find(r[2],t);var n=e.Texture[0](0,3,0);return o.add(r[2],t,n),n}function _(r,t,n){if(o.mem(r[0],t))return u._2(n,o.find(r[0],t),o.find(r[1],t));if(o.mem(r[3],t)){var _=o.find(r[4],t);return o.replace(r[4],t,[n,_])}return o.add(r[3],t,1),o.add(r[4],t,[n,0]),c.request(t,"sheet0",function(n){var c=f.parse(n[0]),_=s(r,t);e.Texture[1](_,i.__(0,[n[1]])),o.add(r[0],t,c),o.add(r[1],t,n[1]);var l=o.find(r[4],t);return o.remove(r[4],t),a.iter(function(r){return u._2(r,c,n[1])},l)})}t.make=function(r,t){var n=r?r[0]:2;return[o.create(0,n),o.create(0,n),o.create(0,n),o.create(0,n),o.create(0,n)]},t.getTexture=s,t.request=_,t.requestMultiple=function(r,t,n){var e=[a.length(t)];return a.iter(function(t){return _(r,t,function(t,a){return e[0]=e[0]-1|0,e[0]?0:u._1(n,r)})},t)}},function(r,t,n){"use strict";var e=n(8),a=n(6),i=n(7),u=n(9),o=n(1),c=n(78);function f(r,t){var n=c.readUInt8(r,t+2|0);return[c.readInt16LE(r,t),+(1==(n>>7&1)),+(1==(n>>6&1)),+(1==(n>>5&1)),+(1==(n>>4&1)),+(1==(n>>3&1)),c.readUInt8(r,t+3|0),c.readUInt16LE(r,t+4|0),c.readUInt8(r,t+6|0),[c.readInt8(r,t+7|0),c.readInt8(r,t+8|0),c.readInt8(r,t+9|0),c.readInt8(r,t+10|0)],[c.readInt8(r,t+11|0),c.readInt8(r,t+12|0)],c.readUInt8(r,t+13|0),c.readStringNT(r,t+14|0)]}function s(r,t){var n=c.readUInt16LE(r,t),e=c.readUInt16LE(r,t+2|0);return[n,e,2/n,2/e,c.readUInt16LE(r,t+4|0),c.readUInt16LE(r,t+6|0),c.readUInt16LE(r,t+8|0),0,c.readUInt8(r,t+11|0),c.readUInt8(r,t+12|0),c.readUInt8(r,t+12|0),c.readUInt8(r,t+13|0)]}function _(r,t,n){var a=c.readStringNT(r,t),i=a.length+1|0,o=u.div(n,i);return e.rev(function(n,e){for(;;){var f=e,s=n;if(s>=o)return f;e=[c.readStringSlice(r,t+u.imul(s,i)|0,(t+u.imul(s,i)|0)+a.length|0),f],n=s+1|0}}(0,0))}function l(r,t,n){return e.rev(function(e,a){for(;;){var i=a,o=e;if(o>=(n/20|0))return i;var f=u.imul(o,20);a=[[c.readUInt32LE(r,(t+0|0)+f|0),c.readUInt16LE(r,(t+4|0)+f|0),c.readUInt16LE(r,(t+6|0)+f|0),c.readUInt16LE(r,(t+8|0)+f|0),c.readUInt16LE(r,(t+10|0)+f|0),c.readInt16LE(r,(t+12|0)+f|0),c.readInt16LE(r,(t+14|0)+f|0),c.readUInt16LE(r,(t+16|0)+f|0),c.readUInt8(r,(t+18|0)+f|0),c.readUInt8(r,(t+19|0)+f|0)],i],e=o+1|0}}(0,0))}function m(r,t,n){return e.rev(function(e,a){for(;;){var i=a,o=e;if(o>=(n/10|0))return i;var f=u.imul(o,10);a=[[c.readUInt32LE(r,t+f|0),c.readUInt32LE(r,(t+4|0)+f|0),c.readInt16LE(r,(t+8|0)+f|0)],i],e=o+1|0}}(0,0))}function v(r,t){if(t>(r.length-1|0))return[0,0];var n,u=c.readUInt8(r,t),o=c.readInt32LE(r,t+1|0),v=t+5|0,d=u-1|0;if(d>4||d<0)n=0;else switch(d){case 0:n=a.__(0,[f(r,v)]);break;case 1:n=a.__(1,[s(r,v)]);break;case 2:n=a.__(2,[_(r,v,o)]);break;case 3:var g=l(r,v,o),h=e.fold_left(function(r,t){return t[0]>r?t[0]:r},0,g),y=i.caml_make_vect(h+1|0,0);e.iter(function(r){return i.caml_array_set(y,r[0],[r])},g),n=a.__(3,[g,y]);break;case 4:n=a.__(4,[m(r,v,o)])}return[o+5|0,n]}t.Buffer=0,t.addGlChar=function(r,t){var n=i.caml_array_get(r[5],t),e=n?n[0]:o.failwith("Could not find bmchar for code "+o.string_of_int(t)),a=r[2][4],u=r[2][5],c=r[2][2],f=e[1]/a,s=e[2]/u,_=[f,s,f+e[3]/a,s+e[4]/u,e[3]*c,e[4]*c,e[5]*c,e[6]*c,e[7]*c];return i.caml_array_set(r[6],t,[_]),_},t.readInfo=f,t.readCommon=s,t.readPages=_,t.readChars=l,t.readKernings=m,t.readBlock=v,t.parse=function(r){66===c.readUInt8(r,0)&&77===c.readUInt8(r,1)&&70===c.readUInt8(r,2)||o.failwith("Could not verify header"),3!==c.readUInt8(r,3)&&o.failwith("Only version 3 supported");for(var t=4,n=[0,0,0,0,0,0],e=0;e<=4;++e){var a=v(r,t),u=a[1];if("number"!=typeof u)switch(0|u.tag){case 0:n[1]=[u[0]];break;case 1:n[2]=[u[0]];break;case 2:n[3]=[u[0]];break;case 3:n[4]=[u[0]],n[5]=[u[1]];break;case 4:n[0]=[u[0]]}t=t+a[0]|0}var f=n[0],s=n[1],_=n[2],l=n[3],m=n[4],d=n[5];if(f){if(s){if(_){if(l){if(m){if(d){var g=d[0];return[f[0],s[0],_[0],l[0],m[0],g,i.caml_make_vect(g.length,0)]}return o.failwith("Could not parse font")}return o.failwith("Could not parse font")}return o.failwith("Could not parse font")}return o.failwith("Could not parse font")}return o.failwith("Could not parse font")}if(s){if(_){if(l){if(m){if(d){var h=d[0];return[0,s[0],_[0],l[0],m[0],h,i.caml_make_vect(h.length,0)]}return o.failwith("Could not parse font")}return o.failwith("Could not parse font")}return o.failwith("Could not parse font")}return o.failwith("Could not parse font")}return o.failwith("Could not parse font")},t.getKerning=function(r,t,n){for(var e=r[0];;){var a=e;if(!a)return 0;var i=a[0];if(i[0]===t&&i[1]===n)return i[2];e=a[1]}}},function(r,t,n){"use strict";var e=n(8),a=n(6),i=n(19),u=n(0),o=n(79),c=n(20),f=n(24),s=n(7),_=n(9),l=n(1),m=n(12),v=n(46),d="digitalt",g=i.fromFloats(1,1,1);function h(r,t,n,e,i,u,o){var c=u?u[0]:[r,t,n,e,i];return a.__(1,[[c,o]])}var y=o.Make([function(){return[0,0,0,0,0,[1,1,1],[0,0,0,0,0,0,0,0,0],0]},0]);function p(r,t,n){var e=r[1][0],a=0!==n?32:20,i=s.caml_make_vect(_.imul(t,a),0);return n?function(r,n){for(;;){var u=n,o=r;if(!(o<t))return 0;var c=s.caml_array_get(e,o),f=c[6];s.caml_array_set(i,u,c[0]),s.caml_array_set(i,u+1|0,c[1]-c[3]),s.caml_array_set(i,u+2|0,f[0]),s.caml_array_set(i,u+3|0,f[3]),s.caml_array_set(i,u+4|0,c[4]),s.caml_array_set(i,u+5|0,s.caml_array_get(c[5],0)),s.caml_array_set(i,u+6|0,s.caml_array_get(c[5],1)),s.caml_array_set(i,u+7|0,s.caml_array_get(c[5],2)),s.caml_array_set(i,u+8|0,c[0]+c[2]),s.caml_array_set(i,u+9|0,c[1]-c[3]),s.caml_array_set(i,u+10|0,f[2]),s.caml_array_set(i,u+11|0,f[3]),s.caml_array_set(i,u+12|0,c[4]),s.caml_array_set(i,u+13|0,s.caml_array_get(c[5],0)),s.caml_array_set(i,u+14|0,s.caml_array_get(c[5],1)),s.caml_array_set(i,u+15|0,s.caml_array_get(c[5],2)),s.caml_array_set(i,u+16|0,c[0]+c[2]),s.caml_array_set(i,u+17|0,c[1]),s.caml_array_set(i,u+18|0,f[2]),s.caml_array_set(i,u+19|0,f[1]),s.caml_array_set(i,u+20|0,c[4]),s.caml_array_set(i,u+21|0,s.caml_array_get(c[5],0)),s.caml_array_set(i,u+22|0,s.caml_array_get(c[5],1)),s.caml_array_set(i,u+23|0,s.caml_array_get(c[5],2)),s.caml_array_set(i,u+24|0,c[0]),s.caml_array_set(i,u+25|0,c[1]),s.caml_array_set(i,u+26|0,f[0]),s.caml_array_set(i,u+27|0,f[1]),s.caml_array_set(i,u+28|0,c[4]),s.caml_array_set(i,u+29|0,s.caml_array_get(c[5],0)),s.caml_array_set(i,u+30|0,s.caml_array_get(c[5],1)),s.caml_array_set(i,u+31|0,s.caml_array_get(c[5],2)),n=u+a|0,r=o+1|0}}(0,0):function(r,n){for(;;){var u=n,o=r;if(!(o<t))return 0;var c=s.caml_array_get(e,o),f=c[6];s.caml_array_set(i,u,c[0]),s.caml_array_set(i,u+1|0,c[1]-c[3]),s.caml_array_set(i,u+2|0,f[0]),s.caml_array_set(i,u+3|0,f[3]),s.caml_array_set(i,u+4|0,c[4]),s.caml_array_set(i,u+5|0,c[0]+c[2]),s.caml_array_set(i,u+6|0,c[1]-c[3]),s.caml_array_set(i,u+7|0,f[2]),s.caml_array_set(i,u+8|0,f[3]),s.caml_array_set(i,u+9|0,c[4]),s.caml_array_set(i,u+10|0,c[0]+c[2]),s.caml_array_set(i,u+11|0,c[1]),s.caml_array_set(i,u+12|0,f[2]),s.caml_array_set(i,u+13|0,f[1]),s.caml_array_set(i,u+14|0,c[4]),s.caml_array_set(i,u+15|0,c[0]),s.caml_array_set(i,u+16|0,c[1]),s.caml_array_set(i,u+17|0,f[0]),s.caml_array_set(i,u+18|0,f[1]),s.caml_array_set(i,u+19|0,c[4]),n=u+a|0,r=o+1|0}}(0,0),i}function b(r){return[f.find(r[0][0],d),.2,2,0,0,g]}function w(r,t){var n=b(r),a=[-1,1,0,0,-1,0,0],o=[0,a[0],0,0,0,0,0,n],c=r[1],_=function(r,t,n){for(;;){var e=t;if(s.caml_array_get(c[0],e)[0]=s.caml_array_get(c[0],e)[0]+r,!(e<n))return 0;t=e+1|0}},d=function(r,t,n,e){for(;;){var a=n;if(s.caml_array_get(c[0],a)[0]=s.caml_array_get(c[0],a)[0]+r,s.caml_array_get(c[0],a)[1]=s.caml_array_get(c[0],a)[1]+t,!(a<=e))return 0;n=a+1|0}},g=function(r,t){if(!(r>=0))return 0;var n=s.caml_array_get(c[0],r);switch(t[2]){case 0:return 0;case 1:var e=(t[1]-n[0]-n[2])/2;return _(e,o[5],r);case 2:var a=t[1]-n[0]-n[2];return _(a,o[5],r)}},h=function(r,t){for(;;){var n=r;if(n<t)return 0;if(32!==s.caml_array_get(c[0],n)[7])return[n];r=n-1|0}},p=function(r){var t=h(r,o[5]),n=t?t[0]+1|0:o[5],a=1+(r-n|0)|0,i=(o[0]-1|0)-r|0,u=l.min(a,i);if(u>0){var f=function(r,t,n){for(;;){var e=n,a=r;if(!(a<t))return e;n=[s.caml_array_get(c[0],a),e],r=a+1|0}}(n,n+u|0,0);!function(r,t,n){for(;;){var e=r;if(!(e<=t))return 0;s.caml_array_set(c[0],e,s.caml_array_get(c[0],e+n|0)),r=e+1|0}}(n,n+u|0,a),e.iteri(function(r,t){return s.caml_array_set(c[0],(n+a|0)+r|0,t)},f)}return a},w=function(r){for(;;){var t=r;if(t<=o[5])return 0;if(32===s.caml_array_get(c[0],t)[7])return[t];r=t-1|0}},x=function(r,t,n){g(r,n),o[5]=r+1|0,o[6]=0;var e=t[1]*t[2];return o[2]-=e,o[3]-=e,n[5]=o[3],o[3]<n[6]?(n[6]=o[3],0):0},k=function(r,t){var n=r[1]*r[2];return o[2]=o[2]-r[1]+r[0][2][3]*r[1]*2,o[3]-=n,t[5]=o[3],o[3]<t[6]&&(t[6]=o[3]),o[5]=o[0],o[6]=0,0},M=function(t,n,e){for(;;){var a=t;if(!a)return 0;var _=a[0];switch(0|_.tag){case 0:var l=_[0];e[3]||(e[3]=1,k(n,e)),o[4]=1;var b=l.length;u._2(y[3],r[1],o[0]+b|0),function(r,t,a){return function(u){for(;;){var f=u;if(f<t){var _=m.get(r,f);if(10===_){var l=h(o[0]-1|0,o[5]);if(l){var g=l[0];o[0]=g+1|0,x(g,n,e),o[1]=e[0],u=f+1|0;continue}x(o[0]-1|0,n,e),o[1]=e[0],u=f+1|0;continue}var y,b=s.caml_array_get(n[0][6],_),k=b?b[0]:v.addGlChar(n[0],_),M=o[6];if(M?o[1]=o[1]+n[4]+v.getKerning(n[0],M[0],_)*a*n[1]:o[1]+=n[4],o[1]+k[4]*n[1]>e[1]){var C=function(n){for(;;){var e=n;if(e>=t)return 0;if(32!==m.get(r,e))return[e];n=e+1|0}},S=w(o[0]-1|0);if(S){var P=S[0],A=p(P);o[0]=1+(o[0]-A|0)|0;var T=P-A|0;if(x(T,n,e),(o[0]-1|0)>T){var D=-1*(s.caml_array_get(c[0],T+1|0)[0]+1),L=n[1]*n[2]*-1;d(D,L,T+1|0,o[0]-1|0);var N=s.caml_array_get(c[0],o[0]-1|0);o[1]=N[0]+N[6][8]*n[1]}else o[1]=e[0];y=C(f)}else{x(o[0]-1|0,n,e);var U=C(f);U?(o[1]=e[0],y=U):y=0}}else y=[f];if(y){var V=y[0],z=s.caml_array_get(c[0],o[0]);if(z[0]=o[1]+k[6]*n[1],z[1]=o[2]-k[7]*n[1],z[2]=k[4]*n[1],z[3]=k[5]*n[1],z[4]=n[1],z[7]=_,z[5]=i.toArray(n[5]),z[6]=k,V<t){o[0]=o[0]+1|0,o[1]+=k[8]*n[1],u=V+1|0;continue}return 0}return 0}return 0}}}(l,b,n[0][2][2])(0);break;case 1:var C=_[0],S=C[0],P=S[1],A=P?P[0]:n[1],T=S[3],D=T?T[0]:n[3],L=D*A,N=S[0],U=N?f.find(r[0][0],N[0]):n[0],V=S[4],z=S[2],B=[U,A,V?V[0]:n[2],D,L,z?z[0]:n[5]];o[7]=B,M(C[1],B,e);break;case 2:var E=_[0],F=E[0];o[4]&&(o[4]=0,g(o[0]-1|0,e));var I,q=F[3],R=q?q[0]:n[1],G=F[5],O=G?G[0]:n[3],H=O*R,K=F[2],j=K?f.find(r[0][0],K[0]):n[0],$=F[6],W=F[4],X=[j,R,$?$[0]:n[2],O,H,W?W[0]:n[5]],Q=e[1]-e[0],Y=F[1],Z=Y?Q*Y[0]:Q;if(e[4]+Z<=e[1]){var J=e[4];e[4]+=Z,I=[J,J+Z]}else e[5]=e[6],e[4]=e[0]+Z,I=[e[0],e[0]+Z];var rr=I[0],tr=F[0],nr=[rr,I[1],tr?tr[0]:e[2],0,e[4],e[5],e[5]];o[7]=X,o[1]=rr,o[2]=e[5],o[3]=o[2],M(E[1],X,nr),o[4]&&(o[4]=0,g(o[0]-1|0,nr)),nr[6]<e[6]&&(e[6]=nr[6])}t=a[1]}};return M([t,0],n,a),[o[0],a[6]]}var x=[function(r){return[r,u._1(y[1],100)]},20,32,p,b,function(){return[-1,1,0,0,-1,0,0]},w,function(r,t,n){var e=w(r,t);return[p(r,e[0],n),e[1]]}];t.BMFont=0,t.blockStyle=function(r,t,n,e,a,i,u,o){return[r,t,n,e,a,i,u]},t.textStyle=function(r,t,n,e,a,i){return[r,t,n,e,a]},t.defaultFont=d,t.defaultHeight=.2,t.defaultColor=g,t.block=function(r,t,n,e,i,u,o,c,f){var s=c?c[0]:[r,t,n,e,i,u,o];return a.__(2,[[s,f]])},t.styled=h,t.text=function(r){return a.__(0,[r])},t.styledText=function(r,t,n,e,i){return h(r,t,n,0,e,0,[a.__(0,[i]),0])},t.getPartInfo=function(r){var t=[0],n=[0],a=function(r,e,a){var i=e?[[e[0],r[0]],r[1]]:t[0]?r:(t[0]=1,[[d,r[0]],r[1]]);return a?[i[0],[a[0],i[1]]]:n[0]?i:(n[0]=1,[i[0],[g,i[1]]])},u=function(r,t){switch(0|r.tag){case 0:return t;case 1:var n=r[0],i=a(t,n[0][0],n[0][2]);return e.fold_left(function(r,t){return u(t,r)},i,n[1]);case 2:var o=r[0],c=a(t,o[0][2],o[0][4]);return e.fold_left(function(r,t){return u(t,r)},c,o[1])}},o=u(r,[0,0]);return[e.sort_uniq(c.compare,o[0]),e.sort_uniq(i.compare,o[1])]},t.getPartText=function r(t){switch(0|t.tag){case 0:return t[0];case 1:return e.fold_left(function(t,n){return t+r(n)},"",t[0][1]);case 2:return e.fold_left(function(t,n){return t+r(n)},"",t[0][1])+"\n"}},t.GlyphArrayB=y,t.FontLayout=x},function(r,t,n){"use strict";var e=n(33),a=n(10),i=n(11),u=n(50),o=n(16),c=n(95),f=n(17),s=n(15),_=n(93),l=n(25),m=n(5),v=[0],d=a.__(246,[function(){return u.State[1](0)}]);function g(r,t){var n,e=r?r[0]:v[0],a=function(r,t){for(;;){var n=r;if(n>=t)return n;if(n<<1<n)return n;r=n<<1}}(16,t);if(e){var i=0|d.tag;n=u.State[3](250===i?d[0]:246===i?_.force_lazy_block(d):d)}else n=0;return[0,f.caml_make_vect(a,0),n,a]}function h(r){r[0]=0;for(var t=0,n=r[1].length-1|0;t<=n;++t)f.caml_array_set(r[1],t,0);return 0}function y(r){var t=r[1].length;return r.length<4||t===r[3]?h(r):(r[0]=0,r[1]=f.caml_make_vect(r[3],0),0)}function p(r){return[r[0],e.copy(r[1]),r[2],r[3]]}function b(r){return r[0]}function w(r,t){var n=t[1],e=n.length,a=e<<1;if(a>=e){var u=f.caml_make_vect(a,0);t[1]=u;for(var o=function(n){if(n){var e=n[0];o(n[2]);var a=i._2(r,t,e);return f.caml_array_set(u,a,[e,n[1],f.caml_array_get(u,a)])}return 0},c=0,s=e-1|0;c<=s;++c)o(f.caml_array_get(n,c));return 0}return 0}function x(r,t){return r.length>=3?c.caml_hash(10,100,r[2],t)&(r[1].length-1|0):l.not_implemented("caml_hash_univ_param not implemented by bucklescript yet\n")%r[1].length}function k(r,t){for(var n=function(t){for(;;){var n=t;if(!n)return 0;i._2(r,n[0],n[1]),t=n[2]}},e=t[1],a=0,u=e.length-1|0;a<=u;++a)n(f.caml_array_get(e,a));return 0}function M(r,t,n){for(var e=function(t,n){for(;;){var e=n,a=t;if(!a)return e;n=i._3(r,a[0],a[1],e),t=a[2]}},a=t[1],u=n,o=0,c=a.length-1|0;o<=c;++o)u=e(f.caml_array_get(a,o),u);return u}function C(r,t){for(;;){var n=t,e=r;if(!n)return e;t=n[2],r=e+1|0}}function S(r){var t=e.fold_left(function(r,t){return s.max(r,C(0,t))},0,r[1]),n=f.caml_make_vect(t+1|0,0);return e.iter(function(r){var t=C(0,r);return f.caml_array_set(n,t,f.caml_array_get(n,t)+1|0)},r[1]),[r[0],r[1].length,t,n]}var P=c.caml_hash;t.create=g,t.clear=h,t.reset=y,t.copy=p,t.add=function(r,t,n){var e=x(r,t),a=[t,n,f.caml_array_get(r[1],e)];return f.caml_array_set(r[1],e,a),r[0]=r[0]+1|0,r[0]>r[1].length<<1?w(x,r):0},t.find=function(r,t){var n=f.caml_array_get(r[1],x(r,t));if(!n)throw m.not_found;if(!o.caml_compare(t,n[0]))return n[1];var e=n[2];if(!e)throw m.not_found;if(!o.caml_compare(t,e[0]))return e[1];var a=e[2];if(!a)throw m.not_found;if(!o.caml_compare(t,a[0]))return a[1];for(var i=t,u=a[2];;){var c=u;if(c){if(o.caml_compare(i,c[0])){u=c[2];continue}return c[1]}throw m.not_found}},t.find_all=function(r,t){var n=function(r){for(;;){var e=r;if(e){var a=e[2];if(o.caml_compare(e[0],t)){r=a;continue}return[e[1],n(a)]}return 0}};return n(f.caml_array_get(r[1],x(r,t)))},t.mem=function(r,t){for(var n=f.caml_array_get(r[1],x(r,t));;){var e=n;if(e){if(o.caml_compare(e[0],t)){n=e[2];continue}return 1}return 0}},t.remove=function(r,t){var n=function(e){if(e){var a=e[2],i=e[0];return o.caml_compare(i,t)?[i,e[1],n(a)]:(r[0]=r[0]-1|0,a)}return 0},e=x(r,t);return f.caml_array_set(r[1],e,n(f.caml_array_get(r[1],e)))},t.replace=function(r,t,n){var e=function(r){if(r){var a=r[2],i=r[0];return o.caml_compare(i,t)?[i,r[1],e(a)]:[t,n,a]}throw m.not_found},a=x(r,t),i=f.caml_array_get(r[1],a);try{return f.caml_array_set(r[1],a,e(i))}catch(e){if(e===m.not_found)return f.caml_array_set(r[1],a,[t,n,i]),r[0]=r[0]+1|0,r[0]>r[1].length<<1?w(x,r):0;throw e}},t.iter=k,t.fold=M,t.length=b,t.randomize=function(){return v[0]=1,0},t.stats=S,t.Make=function(r){var t=r[0],n=function(t,n){return i._1(r[1],n)&(t[1].length-1|0)};return[function(r){return g([0],r)},h,y,p,function(r,t,e){var a=n(r,t),i=[t,e,f.caml_array_get(r[1],a)];return f.caml_array_set(r[1],a,i),r[0]=r[0]+1|0,r[0]>r[1].length<<1?w(n,r):0},function(r,e){var a=function(n){if(n){var u=n[2],o=n[0];return i._2(t,o,e)?(r[0]=r[0]-1|0,u):[o,n[1],a(u)]}return 0},u=n(r,e);return f.caml_array_set(r[1],u,a(f.caml_array_get(r[1],u)))},function(r,e){var a=f.caml_array_get(r[1],n(r,e));if(!a)throw m.not_found;var u=a[2];if(i._2(t,e,a[0]))return a[1];if(!u)throw m.not_found;var o=u[2];if(i._2(t,e,u[0]))return u[1];if(!o)throw m.not_found;if(i._2(t,e,o[0]))return o[1];for(var c=e,s=o[2];;){var _=s;if(!_)throw m.not_found;if(i._2(t,c,_[0]))return _[1];s=_[2]}},function(r,e){var a=function(r){for(;;){var n=r;if(!n)return 0;var u=n[2];if(i._2(t,n[0],e))return[n[1],a(u)];r=u}};return a(f.caml_array_get(r[1],n(r,e)))},function(r,e,a){var u=function(r){if(r){var n=r[2],o=r[0];return i._2(t,o,e)?[e,a,n]:[o,r[1],u(n)]}throw m.not_found},o=n(r,e),c=f.caml_array_get(r[1],o);try{return f.caml_array_set(r[1],o,u(c))}catch(t){if(t===m.not_found)return f.caml_array_set(r[1],o,[e,a,c]),r[0]=r[0]+1|0,r[0]>r[1].length<<1?w(n,r):0;throw t}},function(r,e){for(var a=f.caml_array_get(r[1],n(r,e));;){var u=a;if(!u)return 0;if(i._2(t,u[0],e))return 1;a=u[2]}},k,M,b,S]},t.MakeSeeded=function(r){var t=function(t,n){return i._2(r[1],t[2],n)&(t[1].length-1|0)};return[g,h,y,p,function(r,n,e){var a=t(r,n),i=[n,e,f.caml_array_get(r[1],a)];return f.caml_array_set(r[1],a,i),r[0]=r[0]+1|0,r[0]>r[1].length<<1?w(t,r):0},function(n,e){var a=function(t){if(t){var u=t[2],o=t[0];return i._2(r[0],o,e)?(n[0]=n[0]-1|0,u):[o,t[1],a(u)]}return 0},u=t(n,e);return f.caml_array_set(n[1],u,a(f.caml_array_get(n[1],u)))},function(n,e){var a=f.caml_array_get(n[1],t(n,e));if(!a)throw m.not_found;var u=a[2];if(i._2(r[0],e,a[0]))return a[1];if(!u)throw m.not_found;var o=u[2];if(i._2(r[0],e,u[0]))return u[1];if(!o)throw m.not_found;if(i._2(r[0],e,o[0]))return o[1];for(var c=e,s=o[2];;){var _=s;if(!_)throw m.not_found;if(i._2(r[0],c,_[0]))return _[1];s=_[2]}},function(n,e){var a=function(t){for(;;){var n=t;if(!n)return 0;var u=n[2];if(i._2(r[0],n[0],e))return[n[1],a(u)];t=u}};return a(f.caml_array_get(n[1],t(n,e)))},function(n,e,a){var u=function(t){if(t){var n=t[2],o=t[0];return i._2(r[0],o,e)?[e,a,n]:[o,t[1],u(n)]}throw m.not_found},o=t(n,e),c=f.caml_array_get(n[1],o);try{return f.caml_array_set(n[1],o,u(c))}catch(r){if(r===m.not_found)return f.caml_array_set(n[1],o,[e,a,c]),n[0]=n[0]+1|0,n[0]>n[1].length<<1?w(t,n):0;throw r}},function(n,e){for(var a=f.caml_array_get(n[1],t(n,e));;){var u=a;if(!u)return 0;if(i._2(r[0],u[0],e))return 1;a=u[2]}},k,M,b,S]},t.hash=function(r){return c.caml_hash(10,100,0,r)},t.seeded_hash=function(r,t){return c.caml_hash(10,100,r,t)},t.hash_param=function(r,t,n){return c.caml_hash(r,t,0,n)},t.seeded_hash_param=P},function(r,t,n){"use strict";var e=n(21),a=n(5);t.chr=function(r){if(r<0||r>255)throw[a.invalid_argument,"Char.chr"];return r},t.escaped=function(r){var t=0;if(r>=40){if(92===r)return"\\\\";t=r>=127?1:2}else if(r>=32){if(r>=39)return"\\'";t=2}else if(r>=14)t=1;else switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:t=1;break;case 13:return"\\r"}switch(t){case 1:var n=new Array(4);return n[0]=92,n[1]=48+(r/100|0)|0,n[2]=48+(r/10|0)%10|0,n[3]=48+r%10|0,e.bytes_to_string(n);case 2:var a=new Array(1);return a[0]=r,e.bytes_to_string(a)}},t.lowercase=function(r){return r>=65&&r<=90||r>=192&&r<=214||r>=216&&r<=222?r+32|0:r},t.uppercase=function(r){return r>=97&&r<=122||r>=224&&r<=246||r>=248&&r<=254?r-32|0:r},t.compare=function(r,t){return r-t|0}},function(r,t,n){"use strict";var e=n(33),a=n(11),i=n(102),u=n(101),o=n(100),c=n(56),f=n(96),s=n(17),_=n(39),l=n(15),m=n(21),v=n(5);function d(r,t){return e.blit(t[0],0,r[0],0,55),r[1]=t[1],0}function g(r,t){for(var n=function(r,t){return o.string(r+t)},e=t.length?t:[0],a=e.length,i=0;i<=54;++i)s.caml_array_set(r[0],i,i);for(var u,c="x",f=0,_=54+l.max(55,a)|0;f<=_;++f){var v=f%55,d=f%a;c=n(c,s.caml_array_get(e,d)),s.caml_array_set(r[0],v,1073741823&(s.caml_array_get(r[0],v)^(u=c,((m.get(u,0)+(m.get(u,1)<<8)|0)+(m.get(u,2)<<16)|0)+(m.get(u,3)<<24)|0)))}return r[1]=0,0}function h(r){var t=[s.caml_make_vect(55,0),0];return g(t,r),t}function y(r){var t=[s.caml_make_vect(55,0),0];return d(t,r),t}function p(r){r[1]=(r[1]+1|0)%55;var t=s.caml_array_get(r[0],r[1]),n=1073741823&(s.caml_array_get(r[0],(r[1]+24|0)%55)+(t^t>>>25&31)|0);return s.caml_array_set(r[0],r[1],n),n}function b(r,t){if(t>1073741823||t<=0)throw[v.invalid_argument,"Random.int"];for(var n=r,e=t;;){var a=p(n),i=a%e;if(!((a-i|0)>(1+(1073741823-e|0)|0)))return i}}function w(r,t){if(t<=0)throw[v.invalid_argument,"Random.int32"];for(var n=r,e=t;;){var a=p(n)|(1&p(n))<<30,u=a%e;if(!((a-u|0)>(1+(i.max_int-e|0)|0)))return u}}function x(r,t){if(_.le(t,[0,0]))throw[v.invalid_argument,"Random.int64"];for(var n=r,e=t;;){var a=_.of_int32(p(n)),i=_.lsl_(_.of_int32(p(n)),30),o=_.lsl_(_.of_int32(7&p(n)),60),c=_.or_(a,[i[0]|o[0],(i[1]|o[1])>>>0]),f=_.mod_(c,e);if(!_.gt(_.sub(c,f),_.add(_.sub(u.max_int,e),[0,1])))return f}}var k=32===f.size?w:function(r,t){return 0|x(r,_.of_int32(t))[1]};function M(r){return(p(r)/1073741824+p(r))/1073741824}function C(r){return+(0==(1&p(r)))}var S=[[987910699,495797812,364182224,414272206,318284740,990407751,383018966,270373319,840823159,24560019,536292337,512266505,189156120,730249596,143776328,51606627,140166561,366354223,1003410265,700563762,981890670,913149062,526082594,1021425055,784300257,667753350,630144451,949649812,48546892,415514493,258888527,511570777,89983870,283659902,308386020,242688715,482270760,865188196,1027664170,207196989,193777847,619708188,671350186,149669678,257044018,87658204,558145612,183450813,28133145,901332182,710253903,510646120,652377910,409934019,801085050],0];function P(r){return g(S,r)}var A=[h,function(){return h(c.caml_sys_random_seed(0))},y,p,b,w,k,x,function(r,t){return M(r)*t},C];t.init=function(r){return g(S,[r])},t.full_init=P,t.self_init=function(){return P(c.caml_sys_random_seed(0))},t.bits=function(){return p(S)},t.$$int=function(r){return b(S,r)},t.int32=function(r){return w(S,r)},t.nativeint=function(r){return a._2(k,S,r)},t.int64=function(r){return x(S,r)},t.$$float=function(r){return M(S)*r},t.bool=function(){return C(S)},t.State=A,t.get_state=function(){return y(S)},t.set_state=function(r){return d(S,r)}},function(r,t,n){"use strict";var e=n(11),a=n(16),i=n(26).create("Queue.Empty");function u(r){return r[0]=0,r[1]=0,0}function o(r,t){if(t[0]){var n=t[1],e=[r,n[1]];return t[0]=t[0]+1|0,n[1]=e,t[1]=e,0}var a=[];return a[0]=r,a[1]=a,t[0]=1,t[1]=a,0}function c(r){if(r[0])return r[1][1][0];throw i}function f(r){if(!r[0])throw i;r[0]=r[0]-1|0;var t=r[1],n=t[1];return n===t?r[1]=0:t[1]=n[1],n[0]}var s=o,_=f,l=c;t.Empty=i,t.create=function(){return[0,0]},t.add=o,t.push=s,t.take=f,t.pop=_,t.peek=c,t.top=l,t.clear=u,t.copy=function(r){if(r[0]){var t=r[1],n=[];return a.caml_update_dummy(n,[t[0],n]),function(r,e){for(;;){var a=e,i=r;if(a===t)return 0;var u=[a[0],n];i[1]=u,e=a[1],r=u}}(n,t[1]),[r[0],n]}return[0,0]},t.is_empty=function(r){return+(0===r[0])},t.length=function(r){return r[0]},t.iter=function(r,t){if(!(t[0]>0))return 0;for(var n=t[1],a=n[1];;){var i=a;if(e._1(r,i[0]),i===n)return 0;a=i[1]}},t.fold=function(r,t,n){if(!n[0])return t;for(var a=n[1],i=t,u=a[1];;){var o=u,c=i,f=e._2(r,c,o[0]);if(o===a)return f;u=o[1],i=f}},t.transfer=function(r,t){var n=r[0];if(n>0){var e=r[1];if(u(r),t[0]>0){var a=t[1],i=e[1],o=a[1];e[1]=o,a[1]=i}return t[0]=t[0]+n|0,t[1]=e,0}return 0}},function(r,t,n){"use strict";t.caml_int32_float_of_bits=function(r){var t=new Int32Array([r]);return new Float32Array(t.buffer)[0]},t.caml_int32_bits_of_float=function(r){var t=new Float32Array([r]);return new Int32Array(t.buffer)[0]},t.caml_classify_float=function(r){return isFinite(r)?Math.abs(r)>=2.2250738585072014e-308?0:0!==r?1:2:isNaN(r)?4:3},t.caml_modf_float=function(r){if(isFinite(r)){var t=+(1/r<0),n=Math.abs(r),e=Math.floor(n),a=n-e;return t?[-a,-e]:[a,e]}return isNaN(r)?[NaN,NaN]:[1/r,r]},t.caml_ldexp_float=function(r,t){var n=[t],e=[r];return n[0]>1023?(n[0]-=1023,e[0]=e[0]*Math.pow(2,1023),n[0]>1023&&(n[0]-=1023,e[0]=e[0]*Math.pow(2,1023))):n[0]<-1023&&(n[0]+=1023,e[0]=e[0]*Math.pow(2,-1023)),e[0]*Math.pow(2,n[0])},t.caml_frexp_float=function(r){if(0!==r&&isFinite(r)){var t=+(r<0),n=Math.abs(r),e=Math.floor(Math.LOG2E*Math.log(n))+1;return(n*=Math.pow(2,-e))<.5&&(n*=2,e-=1),t&&(n=-n),[n,0|e]}return[r,0]},t.caml_float_compare=function(r,t){return r===t?0:r<t?-1:r>t||r==r?1:t==t?-1:0},t.caml_copysign_float=function(r,t){var n=Math.abs(r);return(0===t?1/t:t)<0?-n:n},t.caml_expm1_float=function(r){var t=Math.exp(r),n=t-1;return Math.abs(r)>1?n:0===n?r:r*n/Math.log(t)},t.caml_hypot_float=function(r,t){var n=Math.abs(r),e=Math.abs(t),a=n,i=Math.max(a,e),u=Math.min(a,e)/(0!==i?i:1);return i*Math.sqrt(1+u*u)},t.caml_log10_float=function(r){return Math.LOG10E*Math.log(r)}},function(r,t,n){"use strict";var e=n(38),a=n(0),i=n(20),u=n(1),o=n(12),c=n(2);function f(r,t){for(var n=r[2];(r[1]+t|0)>n;)n<<=1;var a=o.caml_create_string(n);return e.blit(r[0],0,a,0,r[1]),r[0]=a,r[2]=n,0}function s(r,t){var n=r[1];return n>=r[2]&&f(r,1),r[0][n]=t,r[1]=n+1|0,0}function _(r,t,n,a){if(n<0||a<0||(n+a|0)>t.length)throw[c.invalid_argument,"Buffer.add_substring/add_subbytes"];var i=r[1]+a|0;return i>r[2]&&f(r,a),e.blit_string(t,n,r[0],r[1],a),r[1]=i,0}function l(r,t,n,e){return _(r,o.bytes_to_string(t),n,e)}function m(r,t){var n=t.length,a=r[1]+n|0;return a>r[2]&&f(r,n),e.blit_string(t,0,r[0],r[1],n),r[1]=a,0}function v(r,t,n){if(t>=n)throw c.not_found;var e=o.get(r,t),a=0;if(40!==e){if(123!==e){var u=function(r,t){for(var n=t,e=r.length;;){var a=n;if(a>=e)return e;var i=o.get(r,a),u=0;if(i>=91)if(i>=97){if(i>=123)return a;u=1}else{if(95!==i)return a;u=1}else if(i>=58){if(!(i>=65))return a;u=1}else{if(!(i>=48))return a;u=1}1!==u||(n=a+1|0)}}(r,t+1|0);return[i.sub(r,t,u-t|0),u]}a=1}else a=1;if(1===a){var f=t+1|0,s=function(r,t,n,e,a){for(var i=0,u=a,f=e.length;;){var s=u,_=i;if(s>=f)throw c.not_found;if(o.get(e,s)!==r){if(o.get(e,s)===t){if(_){u=s+1|0,i=_-1|0;continue}return s}u=s+1|0}else u=s+1|0,i=_+1|0}}(e,function(r){if(40!==e){if(123!==e)throw[c.assert_failure,["buffer.ml",126,9]];return 125}return 41}(),0,r,f);return[i.sub(r,f,(s-t|0)-1|0),s+1|0]}}t.create=function(r){var t=r<1?1:r,n=o.caml_create_string(t);return[n,0,t,n]},t.contents=function(r){return e.sub_string(r[0],0,r[1])},t.to_bytes=function(r){return e.sub(r[0],0,r[1])},t.sub=function(r,t,n){if(t<0||n<0||t>(r[1]-n|0))throw[c.invalid_argument,"Buffer.sub"];return e.sub_string(r[0],t,n)},t.blit=function(r,t,n,a,i){if(i<0||t<0||t>(r[1]-i|0)||a<0||a>(n.length-i|0))throw[c.invalid_argument,"Buffer.blit"];return e.blit(r[0],t,n,a,i)},t.nth=function(r,t){if(t<0||t>=r[1])throw[c.invalid_argument,"Buffer.nth"];return r[0][t]},t.length=function(r){return r[1]},t.clear=function(r){return r[1]=0,0},t.reset=function(r){return r[1]=0,r[0]=r[3],r[2]=r[0].length,0},t.add_char=s,t.add_string=m,t.add_bytes=function(r,t){return m(r,o.bytes_to_string(t))},t.add_substring=_,t.add_subbytes=l,t.add_substitute=function(r,t,n){for(var e=n.length,i=32,u=0;;){var c=u,f=i;if(!(c<e))return 92===f?s(r,f):0;var _=o.get(n,c);if(36===_)if(92!==f){var l=v(n,c+1|0,e);m(r,a._1(t,l[0])),u=l[1],i=32}else s(r,_),u=c+1|0,i=32;else{if(92===f){s(r,92),s(r,_),u=c+1|0,i=32;continue}if(92!==_){s(r,_),u=c+1|0,i=_;continue}u=c+1|0,i=_}}},t.add_buffer=function(r,t){return l(r,t[0],0,t[1])},t.add_channel=function(r,t,n){if(n<0)throw[c.invalid_argument,"Buffer.add_channel"];return(r[1]+n|0)>r[2]&&f(r,n),u.really_input(t,r[0],r[1],n),r[1]=r[1]+n|0,0},t.output_buffer=function(r,t){return u.output(r,t[0],0,t[1])}},function(r,t,n){"use strict";var e=n(8),a=n(6),i=n(0),u=n(117),o=n(24),c=performance,f=[c,function(){return[c.now(),0]},function(r,t){var n=c.now()-t[0]|0;return r?i._2(u.printf([a.__(11,["Time ",a.__(2,[0,a.__(12,[32,a.__(4,[0,0,0,a.__(11,[" milliseconds\n",0])])])])]),"Time %s %d milliseconds\n"]),r[0],n):i._1(u.printf([a.__(11,["Time ",a.__(4,[0,0,0,a.__(11,[" milliseconds\n",0])])]),"Time %d milliseconds\n"]),n)}];t.listToTbl=function(r){var t=e.length(r),n=+(t>0),a=o.create(0,0!==n?t:1);return e.iter(function(r){return o.add(a,r[0],r[1])},r),a},t.listRange=function(r){for(var t=0,n=r;;){var e=n,a=t;if(e<=0)return a;n=e-1|0,t=[e,a]}},t.isSome=function(r){return r?1:0},t.Timer=f},function(r,t,n){"use strict";var e=String.prototype.repeat&&function(r,t){return t.repeat(r)}||function(r,t){if(0==t.length||0==r)return"";if(t.length*r>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="";1==(1&r)&&(n+=t),0!=(r>>>=1);)t+=t;return n};t.repeat=e},function(r,t,n){"use strict";(function(r){var e=n(5);t.caml_sys_getenv=function(t){var n=void 0===r?void 0:r;if(void 0!==n){var a=n.env[t];if(void 0!==a)return a;throw e.not_found}throw e.not_found},t.caml_sys_time=function(){var t=void 0===r?void 0:r;return void 0!==t?t.uptime():-1},t.caml_sys_random_seed=function(){return[(4294967295^(0|Date.now()))*Math.random()|0]},t.caml_sys_system_command=function(){return 127},t.caml_sys_getcwd=function(){var t=void 0===r?void 0:r;return void 0!==t?t.cwd():"/"},t.caml_sys_get_argv=function(){var t=void 0===r?void 0:r;return void 0!==t?null==t.argv?["",[""]]:[t.argv[0],t.argv]:["",[""]]},t.caml_sys_exit=function(t){var n=void 0===r?void 0:r;return void 0!==n?n.exit(t):0},t.caml_sys_is_directory=function(){throw[e.failure,"caml_sys_is_directory not implemented"]},t.caml_sys_file_exists=function(){throw[e.failure,"caml_sys_file_exists not implemented"]}}).call(this,n(36))},function(r,t,n){"use strict";var e=n(27),a=n(54),i=n(33),u=n(10),o=n(19),c=n(51),f=n(32),s=n(50),_=n(48),l=n(90),m=n(17),v=n(14),d=n(15),g=window,h=[g];function y(r){switch(r){case 0:return l.cubeTiles;case 1:return l.lineTiles;case 2:return l.triangleTiles;case 3:return l.rightTurnTiles;case 4:return l.leftTurnTiles;case 5:return l.leftLTiles;case 6:return l.rightLTiles}}function p(r,t){var n=y(r),e=t-1|0;if(e>2||e<0)return n[0];switch(e){case 0:return n[1];case 1:return n[2];case 2:return n[3]}}var b=i.map(function(r){return o.fromArray(i.map(function(r){return r/255},r))},[[199,214,240],[205,220,246],[130,240,250],[120,130,250],[250,210,80],[250,250,130],[140,250,140],[180,100,230],[240,130,120]]),w=i.map(function(r){var t=o.Hsl[5](r);return o.Hsl[2](t,.07),o.Hsl[3](t,.07),o.Hsl[6](t)},b),x=_.create(0,28);function k(r,t){var n=[10],a=[-10],i=[10],u=[-10];e.iter(function(r){var t=r[1],e=r[0];return n[0]>e&&(n[0]=e),a[0]<(e+1|0)&&(a[0]=e+1|0),i[0]>t&&(i[0]=t),u[0]<(t+1|0)?(u[0]=t+1|0,0):0},p(r,t));var o,c=a[0]-n[0]|0,f=i[0]-u[0]|0,s=c,l=-1*f,m=v.imul(i[0],-1)-l/2,d=n[0]+s/2,g=0;switch(r){case 0:o=[d,m+1];break;case 1:o=1!==t&&3!==t?[d,m]:[d,m+2.5];break;case 2:var h=t-1|0;if(h>2||h<0)o=[d,m];else switch(h){case 0:o=[d-.25,m+1.5];break;case 1:o=[d,m+.5];break;case 2:o=[d+.25,m+1.5]}break;case 3:t>2||t<0?3!==t?o=[d,m]:g=2:1!==t?o=[d,m+.5]:g=2;break;case 4:t>2||t<0?3!==t?o=[d,m]:g=1:1!==t?o=[d,m+.5]:g=1;break;case 5:var y=t-1|0;if(y>2||y<0)o=[d,m];else switch(y){case 0:o=[d,m+1.5];break;case 1:o=[d,m+.5];break;case 2:o=[d+.5,m+1.5]}break;case 6:var b=t-1|0;if(b>2||b<0)o=[d,m];else switch(b){case 0:o=[d-.5,m+1.5];break;case 1:o=[d,m+.5];break;case 2:o=[d+.25,m+1.5]}}switch(g){case 1:o=[d+.5,m+1];break;case 2:o=[d-.5,m+1]}var w=n[0];return _.add(x,[r,t],[o[0],o[1],s,l,c,f,w])}e.iter(function(r){return k(r,0),k(r,1),k(r,2),k(r,3)},[0,[1,[2,[3,[4,[5,[6,0]]]]]]]);function M(){var r=s.$$int(7),t=r>6||r<0?0:r,n=y(t),e=1!==t?0!==t?[3,3]:[4,1]:[5,2];return[t,e[0],e[1],n[4],0]}function C(r){var t=r[0],n=1!==t?0!==t?[3,3]:[4,1]:[5,2];return[r[0],n[0],n[1],r[3],r[4]]}function S(r){return c.clear(r),c.push(M(),r),c.push(M(),r),c.push(M(),r)}function P(){var r=c.create(0);return S(r),r}function A(r){var t=f.tileCols/2|0,n=r[0]>=2?[t,4]:[t+1|0,3];return[r[0],n[0],n[1],r[3],r[4]]}function T(r){return c.push(M(),r),c.pop(r)}var D=[M,C,S,P,A,T];function L(r){var t=T(r[18]),n=r.slice();return n[2]=A(t),n[4]=1,n[5]=1,n[7]=r[8],n}function N(r){return i.iteri(function(t,n){return n[0]>-2?m.caml_array_set(r[13],t,[-2,0]):0},r[13]),e.iter(function(t){var n=r[2][1]+t[0]|0,e=r[2][2]+t[1]|0,a=m.caml_array_get(r[13],n);return-2===a[0]?m.caml_array_set(r[13],n,[e,a[1]]):0},p(r[2][0],r[2][4])),i.iteri(function(t,n){var e=n[0];if(e>-2){for(var a=0,i=e,u=f.tileRows-1|0;i<=u;++i)a||m.caml_array_get(m.caml_array_get(r[9],i),t)>0&&(a=i);return a||(a=f.tileRows),m.caml_array_set(r[13],t,[e,a])}return 0},r[13])}function U(r){for(var t=0,n=f.tileRows-1|0;t<=n;++t)for(var e=0,a=f.tileCols-1|0;e<=a;++e)m.caml_array_set(m.caml_array_get(r[9],t),e,0),m.caml_array_set(r[11],v.imul(f.tileCols,t)+e|0,0);S(r[18]);var i=[3,u.__(0,[15]),A(T(r[18])),0,1,1,r[6],0,0,r[9],r[10],r[11],1,r[13],r[14],r[15],r[16],r[17],r[18],r[19]];return N(i),i}function V(r){return e.exists(function(t){var n=t[1],e=t[0];return(r[2][2]+n|0)>=f.tileRows||(r[2][1]+e|0)<0||(r[2][1]+e|0)>(f.tileCols-1|0)?1:+(m.caml_array_get(m.caml_array_get(r[9],r[2][2]+n|0),r[2][1]+e|0)>0)},p(r[2][0],r[2][4]))}function z(r,t){var n=r.slice(),e=r[2];return n[2]=[e[0],r[2][1]+t[0]|0,r[2][2]+t[1]|0,e[3],e[4]],n[4]=1,0!==V(n)?r:n}function B(r,t){var n=r.slice(),e=r[2];return n[2]=[e[0],r[2][1]+t[0]|0,r[2][2]+t[1]|0,e[3],e[4]],n[4]=1,0!==V(n)?[0,r]:[1,n]}function E(r,t,n){for(var e=n;;){var a=e;if(a){var i=a[0],u=r.slice(),o=r[2];if(u[2]=[o[0],r[2][1]+i[0]|0,r[2][2]-i[1]|0,o[3],t],u[4]=1,V(u)){e=a[1];continue}return[1,u]}return[0,r]}}function F(r){var t=(r[2][4]+1|0)%4,n=r.slice(),e=r[2];if(n[2]=[e[0],e[1],e[2],e[3],t],n[4]=1,V(n)){var a;if(1!==r[2][0])if(t>3||t<0)a=0;else switch(t){case 0:a=[[-1,0],[[-1,-1],[[0,2],[[-1,2],0]]]];break;case 1:a=[[-1,0],[[-1,1],[[0,-2],[[-1,-2],0]]]];break;case 2:a=[[1,0],[[1,-1],[[0,2],[[1,2],0]]]];break;case 3:a=[[1,0],[[1,1],[[0,-2],[[1,-2],0]]]]}else if(t>3||t<0)a=0;else switch(t){case 0:a=[[1,0],[[-2,0],[[1,-2],[[-2,1],0]]]];break;case 1:a=[[-2,0],[[1,0],[[-2,-1],[[1,2],0]]]];break;case 2:a=[[-1,0],[[2,0],[[-1,2],[[2,-1],0]]]];break;case 3:a=[[2,0],[[-1,0],[[2,1],[[-1,-2],0]]]]}return E(r,t,a)}return[1,n]}function I(r){var t=0!=+(0===r[2][4])?3:r[2][4]-1|0,n=r.slice(),e=r[2];if(n[2]=[e[0],e[1],e[2],e[3],t],n[4]=1,V(n)){var a;if(1!==r[2][0])if(t>3||t<0)a=0;else switch(t){case 0:a=[[1,0],[[1,-1],[[0,2],[[1,2],0]]]];break;case 1:a=[[-1,0],[[-1,1],[[0,-2],[[-1,-2],0]]]];break;case 2:a=[[-1,0],[[-1,-1],[[0,2],[[-1,2],0]]]];break;case 3:a=[[1,0],[[1,1],[[0,-2],[[1,-2],0]]]]}else if(t>3||t<0)a=0;else switch(t){case 0:a=[[2,0],[[-1,0],[[2,1],[[-1,-2],0]]]];break;case 1:a=[[1,0],[[-2,0],[[1,-2],[[-2,1],0]]]];break;case 2:a=[[-2,0],[[1,0],[[-2,-1],[[1,2],0]]]];break;case 3:a=[[-1,0],[[2,0],[[-1,2],[[2,-1],0]]]]}return E(r,t,a)}return[1,n]}function q(r){return e.iter(function(t){var n=t[1],e=t[0],a=r[2][2]+n|0,i=r[2][1]+e|0;return m.caml_array_set(m.caml_array_get(r[9],r[2][2]+n|0),r[2][1]+e|0,r[2][3]),m.caml_array_set(r[11],v.imul(a,f.tileCols)+i|0,r[2][3]-1|0)},p(r[2][0],r[2][4]))}function R(r,t){switch(t){case 0:var n=z(r,[-1,0]).slice();return n[1]=u.__(0,[15]),n;case 1:var i=z(r,[1,0]).slice();return i[1]=u.__(0,[15]),i;case 2:var o=z(r,[0,1]).slice();return o[1]=u.__(0,[15]),o;case 3:var c=_.find(x,[r[2][0],r[2][4]]),s=r[2][1]+c[6]|0,l=s-(s>9?9:s>3?3:0)|0,m=e.fold_left(function(r,t){return z(r,[-1,0])},r,a.listRange(l)).slice();return m[1]=u.__(0,[15]),m;case 4:var v=_.find(x,[r[2][0],r[2][4]]),d=r[2][1]+v[6]|0,g=(d<3?3:d<9?9:14)-d|0,h=e.fold_left(function(r,t){return z(r,[1,0])},r,a.listRange(g)).slice();return h[1]=u.__(0,[15]),h;case 5:var y=_.find(x,[r[2][0],r[2][4]]),p=(r[2][1]+y[6]|0)+y[4]|0,b=(p<3?3:p<9?9:12)-p|0,w=e.fold_left(function(r,t){return z(r,[1,0])},r,a.listRange(b)).slice();return w[1]=u.__(0,[15]),w;case 7:for(var k=r.slice(),M=(k[1]=u.__(0,[15]),k[4]=1,k[6]=1,k);;){var S=B(M,[0,1]);if(0===S[0])return S[1];M=S[1]}case 8:var P=F(r)[1].slice();return P[1]=u.__(0,[15]),P;case 9:var T=I(r)[1].slice();return T[1]=u.__(0,[15]),T;case 10:var D,N=C(r[2]),U=r[3];if(U){var V=r.slice();V[2]=A(U[0]),V[3]=[N],V[4]=1,V[5]=1,V[7]=r[8],D=V}else{var E=r.slice();D=L((E[3]=[N],E))}var q=D.slice();return q[1]=u.__(0,[15]),q;case 11:var R=e.fold_left(function(r,t){return z(r,[-1,0])},r,a.listRange(r[2][1])).slice();return R[1]=u.__(0,[15]),R;case 12:var G=e.fold_left(function(r,t){return z(r,[1,0])},r,a.listRange(f.tileCols-r[2][1]|0)).slice();return G[1]=u.__(0,[15]),G;case 13:var O=r.slice();return O[0]=4,O[1]=u.__(3,[2]),O[16]=1,O;case 14:var H=r.slice();return H[0]=2,H[1]=u.__(5,[1]),H;case 6:case 15:return r}}function G(r){var t,n=r[8]+r[19],e=r[17];if(e){var a=e[0];if(a[3]){i.iter(function(t){for(var n=t;n>=1;--n){m.caml_array_set(r[9],n,i.copy(m.caml_array_get(r[9],n-1|0)));for(var e=v.imul(n,f.tileCols),a=(v.imul(n,f.tileCols)+f.tileCols|0)-1|0;e<=a;++e)m.caml_array_set(r[11],e,m.caml_array_get(r[11],e-f.tileCols|0))}return 0},a[2]);var o=r.slice();o[12]=1,o[17]=0,t=o}else{var c=r.slice();c[17]=0,t=c}}else t=r;var s=L(t);if(N(s),V(s)){var _=s.slice();return _[0]=6,_[1]=u.__(2,[2]),_}var l=s.slice();return l[7]=n,l[8]=n,l}function O(r,t){q(r);var n=i.map(function(r){return 1-i.fold_left(function(r,t){return r?1:+(0===t)},0,r)},r[9]),e=i.fold_left(function(r,t){var n=r[1],e=r[0];return 0!==t?[e+1|0,i.append(n,[e])]:[e+1|0,n]},[0,[]],n)[1],a=e.length,u=+(a>0);if(u||t){var o=r.slice();return o[10]=r[10]+a|0,o[12]=1,o[17]=[[0,0,e,u,0,t]],o}var c=r.slice();return G((c[10]=r[10]+a|0,c[12]=1,c))}function H(r,t,n){var e;if(t){var a=r[1],i=0;if(a.tag||6!==a[0]?i=1:e=[r,0],1===i){var u=B(r,[0,1]);e=0!==u[0]?[u[1],0]:[u[1],1]}}else e=[r,0];var o=e[0];if(o[4]&&N(o),0!==e[1])return O(o,0);var c=o.slice();return c[7]=0!==t?n:o[7],c[8]=n,c}function K(r){var t=r[19],n=r[8]+t;if(r[6]){var a=m.caml_array_get(w,r[2][3]);i.iteri(function(t,n){return m.caml_array_set(r[14],t,[n[0],-2])},r[13]);var u=r.slice();return u[15]=a,e.iter(function(r){var t=u[2][1]+r[0]|0,n=u[2][2]+r[1]|0,e=m.caml_array_get(u[14],t);return e[1]<n?m.caml_array_set(u[14],t,[e[0],n]):0},p(u[2][0],u[2][4])),N(u),O(u,1)}var o=+(n>r[7]+f.tickDuration);return H(r,o,n)}function j(r,t){var n=function(r){var n=R(r,t);return 3!==n[0]?Z(n):K(n)},e=r[17];return e?e[0][0]>=3?n(G(r)):r:n(r)}function $(r,t){switch(t){case 0:var n=r.slice();return Z((n[0]=3,n[1]=u.__(0,[15]),n));case 1:var e=r.slice();return Z((e[0]=1,e[1]=u.__(5,[1]),e));case 2:return r}}function W(r,t){if(0!==t)return r;var n=r.slice();return Z((n[0]=3,n[1]=u.__(0,[15]),n))}function X(r,t){switch(t){case 0:var n=r.slice();return Z((n[0]=3,n[1]=u.__(0,[15]),n[16]=0,n));case 1:var e=r.slice();return Z((e[0]=2,e[1]=u.__(5,[1]),e));case 2:return r}}function Q(r,t){if(0!==t)return r;var n=r.slice();return Z((n[0]=3,n[1]=u.__(0,[15]),n))}function Y(r,t){switch(t){case 0:return U(r);case 1:var n=r.slice();return Z((n[0]=2,n[1]=u.__(5,[1]),n));case 2:return r}}function Z(r){var t=r[0],n=r[1],e=0;switch(t){case 0:return 4===n.tag?$(r,n[0]):d.failwith("Invalid gamestate and action");case 1:case 2:e=1;break;case 3:return n.tag?d.failwith("Invalid gamestate and action"):j(r,n[0]);case 4:return 3===n.tag?X(r,n[0]):d.failwith("Invalid gamestate and action");case 5:return 1===n.tag?Q(r,n[0]):d.failwith("Invalid gamestate and action");case 6:return 2===n.tag?Y(r,n[0]):d.failwith("Invalid gamestate and action")}if(1===e)return 5===n.tag?W(r,n[0]):d.failwith("Invalid gamestate and action")}t.Document=h,t.getTetronimo=y,t.elTiles=p,t.colors=w,t.centerRadius=x,t.addCenterRadius=k,t.beamNone=-2,t.TouchDown=[function(){return[0,0,[],0,0,0]}],t.ElQueue=D,t.nextEl=L,t.updateBeams=N,t.setup=function(r){g.addEventListener("keydown",function(r){return g.__lastKeyCode=r.key,0}),s.self_init(0);var t=P();return[0,u.__(4,[2]),A(T(t)),0,1,1,0,0,0,i.make_matrix(f.tileRows,f.tileCols,0),0,r,1,m.caml_make_vect(f.tileCols,[-2,0]),m.caml_make_vect(f.tileCols,[-2,0]),o.white(0),0,0,t,0]},t.newGame=U,t.isCollision=V,t.attemptMove=z,t.attemptMoveTest=B,t.wallTests=E,t.attemptRotateCW=F,t.attemptRotateCCW=I,t.elToTiles=q,t.processGameInput=R,t.afterTouchdown=G,t.elementHasTouchedDown=O,t.regularGameLogic=H,t.gameLogic=K,t.processGameAction=j,t.processStartScreenAction=$,t.processHelpScreenAction=W,t.processPauseAction=X,t.processNextLevelAction=Q,t.processGameOverAction=Y,t.processAction=Z,t.keyPressed=function(r,t){var n=t[6][0];switch(r[0]){case 0:var e;return e=38!==n?"?"===g.__lastKeyCode?1:2:0,u.__(4,[e]);case 1:return u.__(5,[38!==n?1:0]);case 2:return u.__(5,[4!==n?1:0]);case 3:var a;if(console.log(g.__lastKeyCode),r[17])return a=4!==n?"?"===g.__lastKeyCode?14:15:13,u.__(0,[a]);var i,o=0;if(n>=49)o=1;else switch(n){case 4:i=13;break;case 8:i=7;break;case 26:i=3;break;case 27:i=8;break;case 29:i=5;break;case 32:i=0;break;case 34:i=2;break;case 35:i=6;break;case 36:i=1;break;case 42:case 43:i=9;break;case 0:case 1:case 2:case 3:case 5:case 6:case 7:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 30:case 31:case 33:case 37:case 38:case 39:case 40:case 41:case 44:case 45:case 46:o=1;break;case 47:i=4;break;case 28:case 48:i=10}if(1===o)switch(g.__lastKeyCode){case"$":i=12;break;case"?":i=14;break;case"0":case"_":i=11;break;default:i=15}return u.__(0,[i]);case 4:var c;return c=4!==n?"?"===g.__lastKeyCode?1:2:0,u.__(3,[c]);case 5:return u.__(1,[38!==n?1:0]);case 6:var f;return f=38!==n?"?"===g.__lastKeyCode?1:2:0,u.__(2,[f])}}},function(r,t,n){"use strict";t.to_js_boolean=function(r){return!!r}},function(r,t,n){"use strict";var e=n(29),a=e.create("Js_exn.Error");t.$$Error=a,t.internalToOCamlException=function(r){return e.isCamlExceptionOrOpenVariant(r)?r:[a,r]},t.raiseError=function(r){throw new Error(r)},t.raiseEvalError=function(r){throw new EvalError(r)},t.raiseRangeError=function(r){throw new RangeError(r)},t.raiseReferenceError=function(r){throw new ReferenceError(r)},t.raiseSyntaxError=function(r){throw new SyntaxError(r)},t.raiseTypeError=function(r){throw new TypeError(r)},t.raiseUriError=function(r){throw new URIError(r)}},function(r,t,n){"use strict";var e=n(6);t.concat_fmtty=function r(t,n){if("number"==typeof t)return n;switch(0|t.tag){case 0:return e.__(0,[r(t[0],n)]);case 1:return e.__(1,[r(t[0],n)]);case 2:return e.__(2,[r(t[0],n)]);case 3:return e.__(3,[r(t[0],n)]);case 4:return e.__(4,[r(t[0],n)]);case 5:return e.__(5,[r(t[0],n)]);case 6:return e.__(6,[r(t[0],n)]);case 7:return e.__(7,[r(t[0],n)]);case 8:return e.__(8,[t[0],r(t[1],n)]);case 9:return e.__(9,[t[0],t[1],r(t[2],n)]);case 10:return e.__(10,[r(t[0],n)]);case 11:return e.__(11,[r(t[0],n)]);case 12:return e.__(12,[r(t[0],n)]);case 13:return e.__(13,[r(t[0],n)]);case 14:return e.__(14,[r(t[0],n)])}},t.erase_rel=function r(t){if("number"==typeof t)return 0;switch(0|t.tag){case 0:return e.__(0,[r(t[0])]);case 1:return e.__(1,[r(t[0])]);case 2:return e.__(2,[r(t[0])]);case 3:return e.__(3,[r(t[0])]);case 4:return e.__(4,[r(t[0])]);case 5:return e.__(5,[r(t[0])]);case 6:return e.__(6,[r(t[0])]);case 7:return e.__(7,[r(t[0])]);case 8:return e.__(8,[t[0],r(t[1])]);case 9:var n=t[0];return e.__(9,[n,n,r(t[2])]);case 10:return e.__(10,[r(t[0])]);case 11:return e.__(11,[r(t[0])]);case 12:return e.__(12,[r(t[0])]);case 13:return e.__(13,[r(t[0])]);case 14:return e.__(14,[r(t[0])])}},t.concat_fmt=function r(t,n){if("number"==typeof t)return n;switch(0|t.tag){case 0:return e.__(0,[r(t[0],n)]);case 1:return e.__(1,[r(t[0],n)]);case 2:return e.__(2,[t[0],r(t[1],n)]);case 3:return e.__(3,[t[0],r(t[1],n)]);case 4:return e.__(4,[t[0],t[1],t[2],r(t[3],n)]);case 5:return e.__(5,[t[0],t[1],t[2],r(t[3],n)]);case 6:return e.__(6,[t[0],t[1],t[2],r(t[3],n)]);case 7:return e.__(7,[t[0],t[1],t[2],r(t[3],n)]);case 8:return e.__(8,[t[0],t[1],t[2],r(t[3],n)]);case 9:return e.__(9,[r(t[0],n)]);case 10:return e.__(10,[r(t[0],n)]);case 11:return e.__(11,[t[0],r(t[1],n)]);case 12:return e.__(12,[t[0],r(t[1],n)]);case 13:return e.__(13,[t[0],t[1],r(t[2],n)]);case 14:return e.__(14,[t[0],t[1],r(t[2],n)]);case 15:return e.__(15,[r(t[0],n)]);case 16:return e.__(16,[r(t[0],n)]);case 17:return e.__(17,[t[0],r(t[1],n)]);case 18:return e.__(18,[t[0],r(t[1],n)]);case 19:return e.__(19,[r(t[0],n)]);case 20:return e.__(20,[t[0],t[1],r(t[2],n)]);case 21:return e.__(21,[t[0],r(t[1],n)]);case 22:return e.__(22,[r(t[0],n)]);case 23:return e.__(23,[t[0],r(t[1],n)]);case 24:return e.__(24,[t[0],t[1],r(t[2],n)])}}},function(r,t,n){"use strict";var e=String.prototype.repeat&&function(r,t){return t.repeat(r)}||function(r,t){if(0==t.length||0==r)return"";if(t.length*r>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="";1==(1&r)&&(n+=t),0!=(r>>>=1);)t+=t;return n};t.repeat=e},function(r,t,n){"use strict";(function(r){var e=n(2);t.caml_sys_getenv=function(t){var n=void 0===r?void 0:r;if(void 0!==n){var a=n.env[t];if(void 0!==a)return a;throw e.not_found}throw e.not_found},t.caml_sys_time=function(){var t=void 0===r?void 0:r;return void 0!==t?t.uptime():-1},t.caml_sys_random_seed=function(){return[(4294967295^(0|Date.now()))*Math.random()|0]},t.caml_sys_system_command=function(){return 127},t.caml_sys_getcwd=function(){var t=void 0===r?void 0:r;return void 0!==t?t.cwd():"/"},t.caml_sys_get_argv=function(){var t=void 0===r?void 0:r;return void 0!==t?null==t.argv?["",[""]]:[t.argv[0],t.argv]:["",[""]]},t.caml_sys_exit=function(t){var n=void 0===r?void 0:r;return void 0!==n?n.exit(t):0},t.caml_sys_is_directory=function(){throw[e.failure,"caml_sys_is_directory not implemented"]},t.caml_sys_file_exists=function(){throw[e.failure,"caml_sys_file_exists not implemented"]}}).call(this,n(36))},function(r,t,n){"use strict";(function(r){var e=n(0),a=n(2),i=["",function(t,n){var e=n.length-1|0;return void 0!==r&&r.stdout&&r.stdout.write?r.stdout.write(n):"\n"===n[e]?(console.log(n.slice(0,e)),0):(console.log(n),0)}],u=["",function(r,t){var n=t.length-1|0;return"\n"===t[n]?(console.log(t.slice(0,n)),0):(console.log(t),0)}];function o(r){return""!==r[0]?(e._2(r[1],r,r[0]),r[0]="",0):0}function c(t,n,e,a){var u=0===e&&a===n.length?n:n.slice(e,a);if(void 0!==r&&r.stdout&&r.stdout.write&&t===i)return r.stdout.write(u);var c=u.lastIndexOf("\n");return c<0?(t[0]=t[0]+u,0):(t[0]=t[0]+u.slice(0,c+1|0),o(t),t[0]=t[0]+u.slice(c+1|0),0)}t.$caret=function(r,t){return r+t},t.stdin=void 0,t.stdout=i,t.stderr=u,t.caml_ml_open_descriptor_in=function(){throw[a.failure,"caml_ml_open_descriptor_in not implemented"]},t.caml_ml_open_descriptor_out=function(){throw[a.failure,"caml_ml_open_descriptor_out not implemented"]},t.caml_ml_flush=o,t.node_std_output=function(t){return void 0!==r&&r.stdout&&(r.stdout.write(t),!0)},t.caml_ml_output=c,t.caml_ml_output_char=function(r,t){return c(r,String.fromCharCode(t),0,1)},t.caml_ml_input=function(r,t,n,e){throw[a.failure,"caml_ml_input ic not implemented"]},t.caml_ml_input_char=function(){throw[a.failure,"caml_ml_input_char not implemnted"]},t.caml_ml_out_channels_list=function(){return[i,[u,0]]}}).call(this,n(36))},function(r,t,n){"use strict";n.r(t);var e={};n.d(e,"EPSILON",function(){return l}),n.d(e,"ARRAY_TYPE",function(){return m}),n.d(e,"RANDOM",function(){return v}),n.d(e,"setMatrixArrayType",function(){return d}),n.d(e,"toRadian",function(){return h}),n.d(e,"equals",function(){return y});var a={};n.d(a,"create",function(){return p}),n.d(a,"clone",function(){return b}),n.d(a,"copy",function(){return w}),n.d(a,"identity",function(){return x}),n.d(a,"fromValues",function(){return k}),n.d(a,"set",function(){return M}),n.d(a,"transpose",function(){return C}),n.d(a,"invert",function(){return S}),n.d(a,"adjoint",function(){return P}),n.d(a,"determinant",function(){return A}),n.d(a,"multiply",function(){return T}),n.d(a,"rotate",function(){return D}),n.d(a,"scale",function(){return L}),n.d(a,"fromRotation",function(){return N}),n.d(a,"fromScaling",function(){return U}),n.d(a,"str",function(){return V}),n.d(a,"frob",function(){return z}),n.d(a,"LDU",function(){return B}),n.d(a,"add",function(){return E}),n.d(a,"subtract",function(){return F}),n.d(a,"exactEquals",function(){return I}),n.d(a,"equals",function(){return q}),n.d(a,"multiplyScalar",function(){return R}),n.d(a,"multiplyScalarAndAdd",function(){return G}),n.d(a,"mul",function(){return O}),n.d(a,"sub",function(){return H});var i={};n.d(i,"create",function(){return K}),n.d(i,"clone",function(){return j}),n.d(i,"copy",function(){return $}),n.d(i,"identity",function(){return W}),n.d(i,"fromValues",function(){return X}),n.d(i,"set",function(){return Q}),n.d(i,"invert",function(){return Y}),n.d(i,"determinant",function(){return Z}),n.d(i,"multiply",function(){return J}),n.d(i,"rotate",function(){return rr}),n.d(i,"scale",function(){return tr}),n.d(i,"translate",function(){return nr}),n.d(i,"fromRotation",function(){return er}),n.d(i,"fromScaling",function(){return ar}),n.d(i,"fromTranslation",function(){return ir}),n.d(i,"str",function(){return ur}),n.d(i,"frob",function(){return or}),n.d(i,"add",function(){return cr}),n.d(i,"subtract",function(){return fr}),n.d(i,"multiplyScalar",function(){return sr}),n.d(i,"multiplyScalarAndAdd",function(){return _r}),n.d(i,"exactEquals",function(){return lr}),n.d(i,"equals",function(){return mr}),n.d(i,"mul",function(){return vr}),n.d(i,"sub",function(){return dr});var u={};n.d(u,"create",function(){return gr}),n.d(u,"fromMat4",function(){return hr}),n.d(u,"clone",function(){return yr}),n.d(u,"copy",function(){return pr}),n.d(u,"fromValues",function(){return br}),n.d(u,"set",function(){return wr}),n.d(u,"identity",function(){return xr}),n.d(u,"transpose",function(){return kr}),n.d(u,"invert",function(){return Mr}),n.d(u,"adjoint",function(){return Cr}),n.d(u,"determinant",function(){return Sr}),n.d(u,"multiply",function(){return Pr}),n.d(u,"translate",function(){return Ar}),n.d(u,"rotate",function(){return Tr}),n.d(u,"scale",function(){return Dr}),n.d(u,"fromTranslation",function(){return Lr}),n.d(u,"fromRotation",function(){return Nr}),n.d(u,"fromScaling",function(){return Ur}),n.d(u,"fromMat2d",function(){return Vr}),n.d(u,"fromQuat",function(){return zr}),n.d(u,"normalFromMat4",function(){return Br}),n.d(u,"projection",function(){return Er}),n.d(u,"str",function(){return Fr}),n.d(u,"frob",function(){return Ir}),n.d(u,"add",function(){return qr}),n.d(u,"subtract",function(){return Rr}),n.d(u,"multiplyScalar",function(){return Gr}),n.d(u,"multiplyScalarAndAdd",function(){return Or}),n.d(u,"exactEquals",function(){return Hr}),n.d(u,"equals",function(){return Kr}),n.d(u,"mul",function(){return jr}),n.d(u,"sub",function(){return $r});var o={};n.d(o,"create",function(){return Wr}),n.d(o,"clone",function(){return Xr}),n.d(o,"copy",function(){return Qr}),n.d(o,"fromValues",function(){return Yr}),n.d(o,"set",function(){return Zr}),n.d(o,"identity",function(){return Jr}),n.d(o,"transpose",function(){return rt}),n.d(o,"invert",function(){return tt}),n.d(o,"adjoint",function(){return nt}),n.d(o,"determinant",function(){return et}),n.d(o,"multiply",function(){return at}),n.d(o,"translate",function(){return it}),n.d(o,"scale",function(){return ut}),n.d(o,"rotate",function(){return ot}),n.d(o,"rotateX",function(){return ct}),n.d(o,"rotateY",function(){return ft}),n.d(o,"rotateZ",function(){return st}),n.d(o,"fromTranslation",function(){return _t}),n.d(o,"fromScaling",function(){return lt}),n.d(o,"fromRotation",function(){return mt}),n.d(o,"fromXRotation",function(){return vt}),n.d(o,"fromYRotation",function(){return dt}),n.d(o,"fromZRotation",function(){return gt}),n.d(o,"fromRotationTranslation",function(){return ht}),n.d(o,"getTranslation",function(){return yt}),n.d(o,"getScaling",function(){return pt}),n.d(o,"getRotation",function(){return bt}),n.d(o,"fromRotationTranslationScale",function(){return wt}),n.d(o,"fromRotationTranslationScaleOrigin",function(){return xt}),n.d(o,"fromQuat",function(){return kt}),n.d(o,"frustum",function(){return Mt}),n.d(o,"perspective",function(){return Ct}),n.d(o,"perspectiveFromFieldOfView",function(){return St}),n.d(o,"ortho",function(){return Pt}),n.d(o,"lookAt",function(){return At}),n.d(o,"targetTo",function(){return Tt}),n.d(o,"str",function(){return Dt}),n.d(o,"frob",function(){return Lt}),n.d(o,"add",function(){return Nt}),n.d(o,"subtract",function(){return Ut}),n.d(o,"multiplyScalar",function(){return Vt}),n.d(o,"multiplyScalarAndAdd",function(){return zt}),n.d(o,"exactEquals",function(){return Bt}),n.d(o,"equals",function(){return Et}),n.d(o,"mul",function(){return Ft}),n.d(o,"sub",function(){return It});var c={};n.d(c,"create",function(){return qt}),n.d(c,"clone",function(){return Rt}),n.d(c,"length",function(){return Gt}),n.d(c,"fromValues",function(){return Ot}),n.d(c,"copy",function(){return Ht}),n.d(c,"set",function(){return Kt}),n.d(c,"add",function(){return jt}),n.d(c,"subtract",function(){return $t}),n.d(c,"multiply",function(){return Wt}),n.d(c,"divide",function(){return Xt}),n.d(c,"ceil",function(){return Qt}),n.d(c,"floor",function(){return Yt}),n.d(c,"min",function(){return Zt}),n.d(c,"max",function(){return Jt}),n.d(c,"round",function(){return rn}),n.d(c,"scale",function(){return tn}),n.d(c,"scaleAndAdd",function(){return nn}),n.d(c,"distance",function(){return en}),n.d(c,"squaredDistance",function(){return an}),n.d(c,"squaredLength",function(){return un}),n.d(c,"negate",function(){return on}),n.d(c,"inverse",function(){return cn}),n.d(c,"normalize",function(){return fn}),n.d(c,"dot",function(){return sn}),n.d(c,"cross",function(){return _n}),n.d(c,"lerp",function(){return ln}),n.d(c,"hermite",function(){return mn}),n.d(c,"bezier",function(){return vn}),n.d(c,"random",function(){return dn}),n.d(c,"transformMat4",function(){return gn}),n.d(c,"transformMat3",function(){return hn}),n.d(c,"transformQuat",function(){return yn}),n.d(c,"rotateX",function(){return pn}),n.d(c,"rotateY",function(){return bn}),n.d(c,"rotateZ",function(){return wn}),n.d(c,"angle",function(){return xn}),n.d(c,"str",function(){return kn}),n.d(c,"exactEquals",function(){return Mn}),n.d(c,"equals",function(){return Cn}),n.d(c,"sub",function(){return Sn}),n.d(c,"mul",function(){return Pn}),n.d(c,"div",function(){return An}),n.d(c,"dist",function(){return Tn}),n.d(c,"sqrDist",function(){return Dn}),n.d(c,"len",function(){return Ln}),n.d(c,"sqrLen",function(){return Nn}),n.d(c,"forEach",function(){return Un});var f={};n.d(f,"create",function(){return Vn}),n.d(f,"clone",function(){return zn}),n.d(f,"fromValues",function(){return Bn}),n.d(f,"copy",function(){return En}),n.d(f,"set",function(){return Fn}),n.d(f,"add",function(){return In}),n.d(f,"subtract",function(){return qn}),n.d(f,"multiply",function(){return Rn}),n.d(f,"divide",function(){return Gn}),n.d(f,"ceil",function(){return On}),n.d(f,"floor",function(){return Hn}),n.d(f,"min",function(){return Kn}),n.d(f,"max",function(){return jn}),n.d(f,"round",function(){return $n}),n.d(f,"scale",function(){return Wn}),n.d(f,"scaleAndAdd",function(){return Xn}),n.d(f,"distance",function(){return Qn}),n.d(f,"squaredDistance",function(){return Yn}),n.d(f,"length",function(){return Zn}),n.d(f,"squaredLength",function(){return Jn}),n.d(f,"negate",function(){return re}),n.d(f,"inverse",function(){return te}),n.d(f,"normalize",function(){return ne}),n.d(f,"dot",function(){return ee}),n.d(f,"lerp",function(){return ae}),n.d(f,"random",function(){return ie}),n.d(f,"transformMat4",function(){return ue}),n.d(f,"transformQuat",function(){return oe}),n.d(f,"str",function(){return ce}),n.d(f,"exactEquals",function(){return fe}),n.d(f,"equals",function(){return se}),n.d(f,"sub",function(){return _e}),n.d(f,"mul",function(){return le}),n.d(f,"div",function(){return me}),n.d(f,"dist",function(){return ve}),n.d(f,"sqrDist",function(){return de}),n.d(f,"len",function(){return ge}),n.d(f,"sqrLen",function(){return he}),n.d(f,"forEach",function(){return ye});var s={};n.d(s,"create",function(){return pe}),n.d(s,"identity",function(){return be}),n.d(s,"setAxisAngle",function(){return we}),n.d(s,"getAxisAngle",function(){return xe}),n.d(s,"multiply",function(){return ke}),n.d(s,"rotateX",function(){return Me}),n.d(s,"rotateY",function(){return Ce}),n.d(s,"rotateZ",function(){return Se}),n.d(s,"calculateW",function(){return Pe}),n.d(s,"slerp",function(){return Ae}),n.d(s,"invert",function(){return Te}),n.d(s,"conjugate",function(){return De}),n.d(s,"fromMat3",function(){return Le}),n.d(s,"fromEuler",function(){return Ne}),n.d(s,"str",function(){return Ue}),n.d(s,"clone",function(){return Ve}),n.d(s,"fromValues",function(){return ze}),n.d(s,"copy",function(){return Be}),n.d(s,"set",function(){return Ee}),n.d(s,"add",function(){return Fe}),n.d(s,"mul",function(){return Ie}),n.d(s,"scale",function(){return qe}),n.d(s,"dot",function(){return Re}),n.d(s,"lerp",function(){return Ge}),n.d(s,"length",function(){return Oe}),n.d(s,"len",function(){return He}),n.d(s,"squaredLength",function(){return Ke}),n.d(s,"sqrLen",function(){return je}),n.d(s,"normalize",function(){return $e}),n.d(s,"exactEquals",function(){return We}),n.d(s,"equals",function(){return Xe}),n.d(s,"rotationTo",function(){return Qe}),n.d(s,"sqlerp",function(){return Ye}),n.d(s,"setAxes",function(){return Ze});var _={};n.d(_,"create",function(){return Je}),n.d(_,"clone",function(){return ra}),n.d(_,"fromValues",function(){return ta}),n.d(_,"copy",function(){return na}),n.d(_,"set",function(){return ea}),n.d(_,"add",function(){return aa}),n.d(_,"subtract",function(){return ia}),n.d(_,"multiply",function(){return ua}),n.d(_,"divide",function(){return oa}),n.d(_,"ceil",function(){return ca}),n.d(_,"floor",function(){return fa}),n.d(_,"min",function(){return sa}),n.d(_,"max",function(){return _a}),n.d(_,"round",function(){return la}),n.d(_,"scale",function(){return ma}),n.d(_,"scaleAndAdd",function(){return va}),n.d(_,"distance",function(){return da}),n.d(_,"squaredDistance",function(){return ga}),n.d(_,"length",function(){return ha}),n.d(_,"squaredLength",function(){return ya}),n.d(_,"negate",function(){return pa}),n.d(_,"inverse",function(){return ba}),n.d(_,"normalize",function(){return wa}),n.d(_,"dot",function(){return xa}),n.d(_,"cross",function(){return ka}),n.d(_,"lerp",function(){return Ma}),n.d(_,"random",function(){return Ca}),n.d(_,"transformMat2",function(){return Sa}),n.d(_,"transformMat2d",function(){return Pa}),n.d(_,"transformMat3",function(){return Aa}),n.d(_,"transformMat4",function(){return Ta}),n.d(_,"str",function(){return Da}),n.d(_,"exactEquals",function(){return La}),n.d(_,"equals",function(){return Na}),n.d(_,"len",function(){return Ua}),n.d(_,"sub",function(){return Va}),n.d(_,"mul",function(){return za}),n.d(_,"div",function(){return Ba}),n.d(_,"dist",function(){return Ea}),n.d(_,"sqrDist",function(){return Fa}),n.d(_,"sqrLen",function(){return Ia}),n.d(_,"forEach",function(){return qa});const l=1e-6;let m="undefined"!=typeof Float32Array?Float32Array:Array;const v=Math.random;function d(r){m=r}const g=Math.PI/180;function h(r){return r*g}function y(r,t){return Math.abs(r-t)<=l*Math.max(1,Math.abs(r),Math.abs(t))}function p(){let r=new m(4);return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r}function b(r){let t=new m(4);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function w(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}function x(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r}function k(r,t,n,e){let a=new m(4);return a[0]=r,a[1]=t,a[2]=n,a[3]=e,a}function M(r,t,n,e,a){return r[0]=t,r[1]=n,r[2]=e,r[3]=a,r}function C(r,t){if(r===t){let n=t[1];r[1]=t[2],r[2]=n}else r[0]=t[0],r[1]=t[2],r[2]=t[1],r[3]=t[3];return r}function S(r,t){let n=t[0],e=t[1],a=t[2],i=t[3],u=n*i-a*e;return u?(u=1/u,r[0]=i*u,r[1]=-e*u,r[2]=-a*u,r[3]=n*u,r):null}function P(r,t){let n=t[0];return r[0]=t[3],r[1]=-t[1],r[2]=-t[2],r[3]=n,r}function A(r){return r[0]*r[3]-r[2]*r[1]}function T(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=n[0],c=n[1],f=n[2],s=n[3];return r[0]=e*o+i*c,r[1]=a*o+u*c,r[2]=e*f+i*s,r[3]=a*f+u*s,r}function D(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=Math.sin(n),c=Math.cos(n);return r[0]=e*c+i*o,r[1]=a*c+u*o,r[2]=e*-o+i*c,r[3]=a*-o+u*c,r}function L(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=n[0],c=n[1];return r[0]=e*o,r[1]=a*o,r[2]=i*c,r[3]=u*c,r}function N(r,t){let n=Math.sin(t),e=Math.cos(t);return r[0]=e,r[1]=n,r[2]=-n,r[3]=e,r}function U(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=t[1],r}function V(r){return"mat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function z(r){return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2)+Math.pow(r[3],2))}function B(r,t,n,e){return r[2]=e[2]/e[0],n[0]=e[0],n[1]=e[1],n[3]=e[3]-r[2]*n[1],[r,t,n]}function E(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r[3]=t[3]+n[3],r}function F(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r[3]=t[3]-n[3],r}function I(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]}function q(r,t){let n=r[0],e=r[1],a=r[2],i=r[3],u=t[0],o=t[1],c=t[2],f=t[3];return Math.abs(n-u)<=l*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(e-o)<=l*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(a-c)<=l*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-f)<=l*Math.max(1,Math.abs(i),Math.abs(f))}function R(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=t[3]*n,r}function G(r,t,n,e){return r[0]=t[0]+n[0]*e,r[1]=t[1]+n[1]*e,r[2]=t[2]+n[2]*e,r[3]=t[3]+n[3]*e,r}const O=T,H=F;function K(){let r=new m(6);return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function j(r){let t=new m(6);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function $(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function W(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function X(r,t,n,e,a,i){let u=new m(6);return u[0]=r,u[1]=t,u[2]=n,u[3]=e,u[4]=a,u[5]=i,u}function Q(r,t,n,e,a,i,u){return r[0]=t,r[1]=n,r[2]=e,r[3]=a,r[4]=i,r[5]=u,r}function Y(r,t){let n=t[0],e=t[1],a=t[2],i=t[3],u=t[4],o=t[5],c=n*i-e*a;return c?(c=1/c,r[0]=i*c,r[1]=-e*c,r[2]=-a*c,r[3]=n*c,r[4]=(a*o-i*u)*c,r[5]=(e*u-n*o)*c,r):null}function Z(r){return r[0]*r[3]-r[1]*r[2]}function J(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=t[4],c=t[5],f=n[0],s=n[1],_=n[2],l=n[3],m=n[4],v=n[5];return r[0]=e*f+i*s,r[1]=a*f+u*s,r[2]=e*_+i*l,r[3]=a*_+u*l,r[4]=e*m+i*v+o,r[5]=a*m+u*v+c,r}function rr(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=t[4],c=t[5],f=Math.sin(n),s=Math.cos(n);return r[0]=e*s+i*f,r[1]=a*s+u*f,r[2]=e*-f+i*s,r[3]=a*-f+u*s,r[4]=o,r[5]=c,r}function tr(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=t[4],c=t[5],f=n[0],s=n[1];return r[0]=e*f,r[1]=a*f,r[2]=i*s,r[3]=u*s,r[4]=o,r[5]=c,r}function nr(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=t[4],c=t[5],f=n[0],s=n[1];return r[0]=e,r[1]=a,r[2]=i,r[3]=u,r[4]=e*f+i*s+o,r[5]=a*f+u*s+c,r}function er(r,t){let n=Math.sin(t),e=Math.cos(t);return r[0]=e,r[1]=n,r[2]=-n,r[3]=e,r[4]=0,r[5]=0,r}function ar(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=t[1],r[4]=0,r[5]=0,r}function ir(r,t){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=t[0],r[5]=t[1],r}function ur(r){return"mat2d("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+")"}function or(r){return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2)+Math.pow(r[3],2)+Math.pow(r[4],2)+Math.pow(r[5],2)+1)}function cr(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r[3]=t[3]+n[3],r[4]=t[4]+n[4],r[5]=t[5]+n[5],r}function fr(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r[3]=t[3]-n[3],r[4]=t[4]-n[4],r[5]=t[5]-n[5],r}function sr(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=t[3]*n,r[4]=t[4]*n,r[5]=t[5]*n,r}function _r(r,t,n,e){return r[0]=t[0]+n[0]*e,r[1]=t[1]+n[1]*e,r[2]=t[2]+n[2]*e,r[3]=t[3]+n[3]*e,r[4]=t[4]+n[4]*e,r[5]=t[5]+n[5]*e,r}function lr(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]&&r[4]===t[4]&&r[5]===t[5]}function mr(r,t){let n=r[0],e=r[1],a=r[2],i=r[3],u=r[4],o=r[5],c=t[0],f=t[1],s=t[2],_=t[3],m=t[4],v=t[5];return Math.abs(n-c)<=l*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(e-f)<=l*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(a-s)<=l*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-_)<=l*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(u-m)<=l*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(o-v)<=l*Math.max(1,Math.abs(o),Math.abs(v))}const vr=J,dr=fr;function gr(){let r=new m(9);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function hr(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[4],r[4]=t[5],r[5]=t[6],r[6]=t[8],r[7]=t[9],r[8]=t[10],r}function yr(r){let t=new m(9);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function pr(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function br(r,t,n,e,a,i,u,o,c){let f=new m(9);return f[0]=r,f[1]=t,f[2]=n,f[3]=e,f[4]=a,f[5]=i,f[6]=u,f[7]=o,f[8]=c,f}function wr(r,t,n,e,a,i,u,o,c,f){return r[0]=t,r[1]=n,r[2]=e,r[3]=a,r[4]=i,r[5]=u,r[6]=o,r[7]=c,r[8]=f,r}function xr(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function kr(r,t){if(r===t){let n=t[1],e=t[2],a=t[5];r[1]=t[3],r[2]=t[6],r[3]=n,r[5]=t[7],r[6]=e,r[7]=a}else r[0]=t[0],r[1]=t[3],r[2]=t[6],r[3]=t[1],r[4]=t[4],r[5]=t[7],r[6]=t[2],r[7]=t[5],r[8]=t[8];return r}function Mr(r,t){let n=t[0],e=t[1],a=t[2],i=t[3],u=t[4],o=t[5],c=t[6],f=t[7],s=t[8],_=s*u-o*f,l=-s*i+o*c,m=f*i-u*c,v=n*_+e*l+a*m;return v?(v=1/v,r[0]=_*v,r[1]=(-s*e+a*f)*v,r[2]=(o*e-a*u)*v,r[3]=l*v,r[4]=(s*n-a*c)*v,r[5]=(-o*n+a*i)*v,r[6]=m*v,r[7]=(-f*n+e*c)*v,r[8]=(u*n-e*i)*v,r):null}function Cr(r,t){let n=t[0],e=t[1],a=t[2],i=t[3],u=t[4],o=t[5],c=t[6],f=t[7],s=t[8];return r[0]=u*s-o*f,r[1]=a*f-e*s,r[2]=e*o-a*u,r[3]=o*c-i*s,r[4]=n*s-a*c,r[5]=a*i-n*o,r[6]=i*f-u*c,r[7]=e*c-n*f,r[8]=n*u-e*i,r}function Sr(r){let t=r[0],n=r[1],e=r[2],a=r[3],i=r[4],u=r[5],o=r[6],c=r[7],f=r[8];return t*(f*i-u*c)+n*(-f*a+u*o)+e*(c*a-i*o)}function Pr(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=t[4],c=t[5],f=t[6],s=t[7],_=t[8],l=n[0],m=n[1],v=n[2],d=n[3],g=n[4],h=n[5],y=n[6],p=n[7],b=n[8];return r[0]=l*e+m*u+v*f,r[1]=l*a+m*o+v*s,r[2]=l*i+m*c+v*_,r[3]=d*e+g*u+h*f,r[4]=d*a+g*o+h*s,r[5]=d*i+g*c+h*_,r[6]=y*e+p*u+b*f,r[7]=y*a+p*o+b*s,r[8]=y*i+p*c+b*_,r}function Ar(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=t[4],c=t[5],f=t[6],s=t[7],_=t[8],l=n[0],m=n[1];return r[0]=e,r[1]=a,r[2]=i,r[3]=u,r[4]=o,r[5]=c,r[6]=l*e+m*u+f,r[7]=l*a+m*o+s,r[8]=l*i+m*c+_,r}function Tr(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=t[4],c=t[5],f=t[6],s=t[7],_=t[8],l=Math.sin(n),m=Math.cos(n);return r[0]=m*e+l*u,r[1]=m*a+l*o,r[2]=m*i+l*c,r[3]=m*u-l*e,r[4]=m*o-l*a,r[5]=m*c-l*i,r[6]=f,r[7]=s,r[8]=_,r}function Dr(r,t,n){let e=n[0],a=n[1];return r[0]=e*t[0],r[1]=e*t[1],r[2]=e*t[2],r[3]=a*t[3],r[4]=a*t[4],r[5]=a*t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function Lr(r,t){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=t[0],r[7]=t[1],r[8]=1,r}function Nr(r,t){let n=Math.sin(t),e=Math.cos(t);return r[0]=e,r[1]=n,r[2]=0,r[3]=-n,r[4]=e,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Ur(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=t[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Vr(r,t){return r[0]=t[0],r[1]=t[1],r[2]=0,r[3]=t[2],r[4]=t[3],r[5]=0,r[6]=t[4],r[7]=t[5],r[8]=1,r}function zr(r,t){let n=t[0],e=t[1],a=t[2],i=t[3],u=n+n,o=e+e,c=a+a,f=n*u,s=e*u,_=e*o,l=a*u,m=a*o,v=a*c,d=i*u,g=i*o,h=i*c;return r[0]=1-_-v,r[3]=s-h,r[6]=l+g,r[1]=s+h,r[4]=1-f-v,r[7]=m-d,r[2]=l-g,r[5]=m+d,r[8]=1-f-_,r}function Br(r,t){let n=t[0],e=t[1],a=t[2],i=t[3],u=t[4],o=t[5],c=t[6],f=t[7],s=t[8],_=t[9],l=t[10],m=t[11],v=t[12],d=t[13],g=t[14],h=t[15],y=n*o-e*u,p=n*c-a*u,b=n*f-i*u,w=e*c-a*o,x=e*f-i*o,k=a*f-i*c,M=s*d-_*v,C=s*g-l*v,S=s*h-m*v,P=_*g-l*d,A=_*h-m*d,T=l*h-m*g,D=y*T-p*A+b*P+w*S-x*C+k*M;return D?(D=1/D,r[0]=(o*T-c*A+f*P)*D,r[1]=(c*S-u*T-f*C)*D,r[2]=(u*A-o*S+f*M)*D,r[3]=(a*A-e*T-i*P)*D,r[4]=(n*T-a*S+i*C)*D,r[5]=(e*S-n*A-i*M)*D,r[6]=(d*k-g*x+h*w)*D,r[7]=(g*b-v*k-h*p)*D,r[8]=(v*x-d*b+h*y)*D,r):null}function Er(r,t,n){return r[0]=2/t,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/n,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function Fr(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function Ir(r){return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2)+Math.pow(r[3],2)+Math.pow(r[4],2)+Math.pow(r[5],2)+Math.pow(r[6],2)+Math.pow(r[7],2)+Math.pow(r[8],2))}function qr(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r[3]=t[3]+n[3],r[4]=t[4]+n[4],r[5]=t[5]+n[5],r[6]=t[6]+n[6],r[7]=t[7]+n[7],r[8]=t[8]+n[8],r}function Rr(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r[3]=t[3]-n[3],r[4]=t[4]-n[4],r[5]=t[5]-n[5],r[6]=t[6]-n[6],r[7]=t[7]-n[7],r[8]=t[8]-n[8],r}function Gr(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=t[3]*n,r[4]=t[4]*n,r[5]=t[5]*n,r[6]=t[6]*n,r[7]=t[7]*n,r[8]=t[8]*n,r}function Or(r,t,n,e){return r[0]=t[0]+n[0]*e,r[1]=t[1]+n[1]*e,r[2]=t[2]+n[2]*e,r[3]=t[3]+n[3]*e,r[4]=t[4]+n[4]*e,r[5]=t[5]+n[5]*e,r[6]=t[6]+n[6]*e,r[7]=t[7]+n[7]*e,r[8]=t[8]+n[8]*e,r}function Hr(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]&&r[4]===t[4]&&r[5]===t[5]&&r[6]===t[6]&&r[7]===t[7]&&r[8]===t[8]}function Kr(r,t){let n=r[0],e=r[1],a=r[2],i=r[3],u=r[4],o=r[5],c=r[6],f=r[7],s=r[8],_=t[0],m=t[1],v=t[2],d=t[3],g=t[4],h=t[5],y=t[6],p=t[7],b=t[8];return Math.abs(n-_)<=l*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(e-m)<=l*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(a-v)<=l*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-d)<=l*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-g)<=l*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(o-h)<=l*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(c-y)<=l*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-p)<=l*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(s-b)<=l*Math.max(1,Math.abs(s),Math.abs(b))}const jr=Pr,$r=Rr;function Wr(){let r=new m(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Xr(r){let t=new m(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function Qr(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function Yr(r,t,n,e,a,i,u,o,c,f,s,_,l,v,d,g){let h=new m(16);return h[0]=r,h[1]=t,h[2]=n,h[3]=e,h[4]=a,h[5]=i,h[6]=u,h[7]=o,h[8]=c,h[9]=f,h[10]=s,h[11]=_,h[12]=l,h[13]=v,h[14]=d,h[15]=g,h}function Zr(r,t,n,e,a,i,u,o,c,f,s,_,l,m,v,d,g){return r[0]=t,r[1]=n,r[2]=e,r[3]=a,r[4]=i,r[5]=u,r[6]=o,r[7]=c,r[8]=f,r[9]=s,r[10]=_,r[11]=l,r[12]=m,r[13]=v,r[14]=d,r[15]=g,r}function Jr(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function rt(r,t){if(r===t){let n=t[1],e=t[2],a=t[3],i=t[6],u=t[7],o=t[11];r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=n,r[6]=t[9],r[7]=t[13],r[8]=e,r[9]=i,r[11]=t[14],r[12]=a,r[13]=u,r[14]=o}else r[0]=t[0],r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=t[1],r[5]=t[5],r[6]=t[9],r[7]=t[13],r[8]=t[2],r[9]=t[6],r[10]=t[10],r[11]=t[14],r[12]=t[3],r[13]=t[7],r[14]=t[11],r[15]=t[15];return r}function tt(r,t){let n=t[0],e=t[1],a=t[2],i=t[3],u=t[4],o=t[5],c=t[6],f=t[7],s=t[8],_=t[9],l=t[10],m=t[11],v=t[12],d=t[13],g=t[14],h=t[15],y=n*o-e*u,p=n*c-a*u,b=n*f-i*u,w=e*c-a*o,x=e*f-i*o,k=a*f-i*c,M=s*d-_*v,C=s*g-l*v,S=s*h-m*v,P=_*g-l*d,A=_*h-m*d,T=l*h-m*g,D=y*T-p*A+b*P+w*S-x*C+k*M;return D?(D=1/D,r[0]=(o*T-c*A+f*P)*D,r[1]=(a*A-e*T-i*P)*D,r[2]=(d*k-g*x+h*w)*D,r[3]=(l*x-_*k-m*w)*D,r[4]=(c*S-u*T-f*C)*D,r[5]=(n*T-a*S+i*C)*D,r[6]=(g*b-v*k-h*p)*D,r[7]=(s*k-l*b+m*p)*D,r[8]=(u*A-o*S+f*M)*D,r[9]=(e*S-n*A-i*M)*D,r[10]=(v*x-d*b+h*y)*D,r[11]=(_*b-s*x-m*y)*D,r[12]=(o*C-u*P-c*M)*D,r[13]=(n*P-e*C+a*M)*D,r[14]=(d*p-v*w-g*y)*D,r[15]=(s*w-_*p+l*y)*D,r):null}function nt(r,t){let n=t[0],e=t[1],a=t[2],i=t[3],u=t[4],o=t[5],c=t[6],f=t[7],s=t[8],_=t[9],l=t[10],m=t[11],v=t[12],d=t[13],g=t[14],h=t[15];return r[0]=o*(l*h-m*g)-_*(c*h-f*g)+d*(c*m-f*l),r[1]=-(e*(l*h-m*g)-_*(a*h-i*g)+d*(a*m-i*l)),r[2]=e*(c*h-f*g)-o*(a*h-i*g)+d*(a*f-i*c),r[3]=-(e*(c*m-f*l)-o*(a*m-i*l)+_*(a*f-i*c)),r[4]=-(u*(l*h-m*g)-s*(c*h-f*g)+v*(c*m-f*l)),r[5]=n*(l*h-m*g)-s*(a*h-i*g)+v*(a*m-i*l),r[6]=-(n*(c*h-f*g)-u*(a*h-i*g)+v*(a*f-i*c)),r[7]=n*(c*m-f*l)-u*(a*m-i*l)+s*(a*f-i*c),r[8]=u*(_*h-m*d)-s*(o*h-f*d)+v*(o*m-f*_),r[9]=-(n*(_*h-m*d)-s*(e*h-i*d)+v*(e*m-i*_)),r[10]=n*(o*h-f*d)-u*(e*h-i*d)+v*(e*f-i*o),r[11]=-(n*(o*m-f*_)-u*(e*m-i*_)+s*(e*f-i*o)),r[12]=-(u*(_*g-l*d)-s*(o*g-c*d)+v*(o*l-c*_)),r[13]=n*(_*g-l*d)-s*(e*g-a*d)+v*(e*l-a*_),r[14]=-(n*(o*g-c*d)-u*(e*g-a*d)+v*(e*c-a*o)),r[15]=n*(o*l-c*_)-u*(e*l-a*_)+s*(e*c-a*o),r}function et(r){let t=r[0],n=r[1],e=r[2],a=r[3],i=r[4],u=r[5],o=r[6],c=r[7],f=r[8],s=r[9],_=r[10],l=r[11],m=r[12],v=r[13],d=r[14],g=r[15];return(t*u-n*i)*(_*g-l*d)-(t*o-e*i)*(s*g-l*v)+(t*c-a*i)*(s*d-_*v)+(n*o-e*u)*(f*g-l*m)-(n*c-a*u)*(f*d-_*m)+(e*c-a*o)*(f*v-s*m)}function at(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=t[4],c=t[5],f=t[6],s=t[7],_=t[8],l=t[9],m=t[10],v=t[11],d=t[12],g=t[13],h=t[14],y=t[15],p=n[0],b=n[1],w=n[2],x=n[3];return r[0]=p*e+b*o+w*_+x*d,r[1]=p*a+b*c+w*l+x*g,r[2]=p*i+b*f+w*m+x*h,r[3]=p*u+b*s+w*v+x*y,p=n[4],b=n[5],w=n[6],x=n[7],r[4]=p*e+b*o+w*_+x*d,r[5]=p*a+b*c+w*l+x*g,r[6]=p*i+b*f+w*m+x*h,r[7]=p*u+b*s+w*v+x*y,p=n[8],b=n[9],w=n[10],x=n[11],r[8]=p*e+b*o+w*_+x*d,r[9]=p*a+b*c+w*l+x*g,r[10]=p*i+b*f+w*m+x*h,r[11]=p*u+b*s+w*v+x*y,p=n[12],b=n[13],w=n[14],x=n[15],r[12]=p*e+b*o+w*_+x*d,r[13]=p*a+b*c+w*l+x*g,r[14]=p*i+b*f+w*m+x*h,r[15]=p*u+b*s+w*v+x*y,r}function it(r,t,n){let e,a,i,u,o,c,f,s,_,l,m,v,d=n[0],g=n[1],h=n[2];return t===r?(r[12]=t[0]*d+t[4]*g+t[8]*h+t[12],r[13]=t[1]*d+t[5]*g+t[9]*h+t[13],r[14]=t[2]*d+t[6]*g+t[10]*h+t[14],r[15]=t[3]*d+t[7]*g+t[11]*h+t[15]):(e=t[0],a=t[1],i=t[2],u=t[3],o=t[4],c=t[5],f=t[6],s=t[7],_=t[8],l=t[9],m=t[10],v=t[11],r[0]=e,r[1]=a,r[2]=i,r[3]=u,r[4]=o,r[5]=c,r[6]=f,r[7]=s,r[8]=_,r[9]=l,r[10]=m,r[11]=v,r[12]=e*d+o*g+_*h+t[12],r[13]=a*d+c*g+l*h+t[13],r[14]=i*d+f*g+m*h+t[14],r[15]=u*d+s*g+v*h+t[15]),r}function ut(r,t,n){let e=n[0],a=n[1],i=n[2];return r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r[3]=t[3]*e,r[4]=t[4]*a,r[5]=t[5]*a,r[6]=t[6]*a,r[7]=t[7]*a,r[8]=t[8]*i,r[9]=t[9]*i,r[10]=t[10]*i,r[11]=t[11]*i,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function ot(r,t,n,e){let a,i,u,o,c,f,s,_,m,v,d,g,h,y,p,b,w,x,k,M,C,S,P,A,T=e[0],D=e[1],L=e[2],N=Math.sqrt(T*T+D*D+L*L);return Math.abs(N)<l?null:(T*=N=1/N,D*=N,L*=N,a=Math.sin(n),u=1-(i=Math.cos(n)),o=t[0],c=t[1],f=t[2],s=t[3],_=t[4],m=t[5],v=t[6],d=t[7],g=t[8],h=t[9],y=t[10],p=t[11],b=T*T*u+i,w=D*T*u+L*a,x=L*T*u-D*a,k=T*D*u-L*a,M=D*D*u+i,C=L*D*u+T*a,S=T*L*u+D*a,P=D*L*u-T*a,A=L*L*u+i,r[0]=o*b+_*w+g*x,r[1]=c*b+m*w+h*x,r[2]=f*b+v*w+y*x,r[3]=s*b+d*w+p*x,r[4]=o*k+_*M+g*C,r[5]=c*k+m*M+h*C,r[6]=f*k+v*M+y*C,r[7]=s*k+d*M+p*C,r[8]=o*S+_*P+g*A,r[9]=c*S+m*P+h*A,r[10]=f*S+v*P+y*A,r[11]=s*S+d*P+p*A,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r)}function ct(r,t,n){let e=Math.sin(n),a=Math.cos(n),i=t[4],u=t[5],o=t[6],c=t[7],f=t[8],s=t[9],_=t[10],l=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=i*a+f*e,r[5]=u*a+s*e,r[6]=o*a+_*e,r[7]=c*a+l*e,r[8]=f*a-i*e,r[9]=s*a-u*e,r[10]=_*a-o*e,r[11]=l*a-c*e,r}function ft(r,t,n){let e=Math.sin(n),a=Math.cos(n),i=t[0],u=t[1],o=t[2],c=t[3],f=t[8],s=t[9],_=t[10],l=t[11];return t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=i*a-f*e,r[1]=u*a-s*e,r[2]=o*a-_*e,r[3]=c*a-l*e,r[8]=i*e+f*a,r[9]=u*e+s*a,r[10]=o*e+_*a,r[11]=c*e+l*a,r}function st(r,t,n){let e=Math.sin(n),a=Math.cos(n),i=t[0],u=t[1],o=t[2],c=t[3],f=t[4],s=t[5],_=t[6],l=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=i*a+f*e,r[1]=u*a+s*e,r[2]=o*a+_*e,r[3]=c*a+l*e,r[4]=f*a-i*e,r[5]=s*a-u*e,r[6]=_*a-o*e,r[7]=l*a-c*e,r}function _t(r,t){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function lt(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=t[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function mt(r,t,n){let e,a,i,u=n[0],o=n[1],c=n[2],f=Math.sqrt(u*u+o*o+c*c);return Math.abs(f)<l?null:(u*=f=1/f,o*=f,c*=f,e=Math.sin(t),i=1-(a=Math.cos(t)),r[0]=u*u*i+a,r[1]=o*u*i+c*e,r[2]=c*u*i-o*e,r[3]=0,r[4]=u*o*i-c*e,r[5]=o*o*i+a,r[6]=c*o*i+u*e,r[7]=0,r[8]=u*c*i+o*e,r[9]=o*c*i-u*e,r[10]=c*c*i+a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function vt(r,t){let n=Math.sin(t),e=Math.cos(t);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=e,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function dt(r,t){let n=Math.sin(t),e=Math.cos(t);return r[0]=e,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=e,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function gt(r,t){let n=Math.sin(t),e=Math.cos(t);return r[0]=e,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=e,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ht(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=e+e,c=a+a,f=i+i,s=e*o,_=e*c,l=e*f,m=a*c,v=a*f,d=i*f,g=u*o,h=u*c,y=u*f;return r[0]=1-(m+d),r[1]=_+y,r[2]=l-h,r[3]=0,r[4]=_-y,r[5]=1-(s+d),r[6]=v+g,r[7]=0,r[8]=l+h,r[9]=v-g,r[10]=1-(s+m),r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function yt(r,t){return r[0]=t[12],r[1]=t[13],r[2]=t[14],r}function pt(r,t){let n=t[0],e=t[1],a=t[2],i=t[4],u=t[5],o=t[6],c=t[8],f=t[9],s=t[10];return r[0]=Math.sqrt(n*n+e*e+a*a),r[1]=Math.sqrt(i*i+u*u+o*o),r[2]=Math.sqrt(c*c+f*f+s*s),r}function bt(r,t){let n=t[0]+t[5]+t[10],e=0;return n>0?(e=2*Math.sqrt(n+1),r[3]=.25*e,r[0]=(t[6]-t[9])/e,r[1]=(t[8]-t[2])/e,r[2]=(t[1]-t[4])/e):t[0]>t[5]&t[0]>t[10]?(e=2*Math.sqrt(1+t[0]-t[5]-t[10]),r[3]=(t[6]-t[9])/e,r[0]=.25*e,r[1]=(t[1]+t[4])/e,r[2]=(t[8]+t[2])/e):t[5]>t[10]?(e=2*Math.sqrt(1+t[5]-t[0]-t[10]),r[3]=(t[8]-t[2])/e,r[0]=(t[1]+t[4])/e,r[1]=.25*e,r[2]=(t[6]+t[9])/e):(e=2*Math.sqrt(1+t[10]-t[0]-t[5]),r[3]=(t[1]-t[4])/e,r[0]=(t[8]+t[2])/e,r[1]=(t[6]+t[9])/e,r[2]=.25*e),r}function wt(r,t,n,e){let a=t[0],i=t[1],u=t[2],o=t[3],c=a+a,f=i+i,s=u+u,_=a*c,l=a*f,m=a*s,v=i*f,d=i*s,g=u*s,h=o*c,y=o*f,p=o*s,b=e[0],w=e[1],x=e[2];return r[0]=(1-(v+g))*b,r[1]=(l+p)*b,r[2]=(m-y)*b,r[3]=0,r[4]=(l-p)*w,r[5]=(1-(_+g))*w,r[6]=(d+h)*w,r[7]=0,r[8]=(m+y)*x,r[9]=(d-h)*x,r[10]=(1-(_+v))*x,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function xt(r,t,n,e,a){let i=t[0],u=t[1],o=t[2],c=t[3],f=i+i,s=u+u,_=o+o,l=i*f,m=i*s,v=i*_,d=u*s,g=u*_,h=o*_,y=c*f,p=c*s,b=c*_,w=e[0],x=e[1],k=e[2],M=a[0],C=a[1],S=a[2];return r[0]=(1-(d+h))*w,r[1]=(m+b)*w,r[2]=(v-p)*w,r[3]=0,r[4]=(m-b)*x,r[5]=(1-(l+h))*x,r[6]=(g+y)*x,r[7]=0,r[8]=(v+p)*k,r[9]=(g-y)*k,r[10]=(1-(l+d))*k,r[11]=0,r[12]=n[0]+M-(r[0]*M+r[4]*C+r[8]*S),r[13]=n[1]+C-(r[1]*M+r[5]*C+r[9]*S),r[14]=n[2]+S-(r[2]*M+r[6]*C+r[10]*S),r[15]=1,r}function kt(r,t){let n=t[0],e=t[1],a=t[2],i=t[3],u=n+n,o=e+e,c=a+a,f=n*u,s=e*u,_=e*o,l=a*u,m=a*o,v=a*c,d=i*u,g=i*o,h=i*c;return r[0]=1-_-v,r[1]=s+h,r[2]=l-g,r[3]=0,r[4]=s-h,r[5]=1-f-v,r[6]=m+d,r[7]=0,r[8]=l+g,r[9]=m-d,r[10]=1-f-_,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Mt(r,t,n,e,a,i,u){let o=1/(n-t),c=1/(a-e),f=1/(i-u);return r[0]=2*i*o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2*i*c,r[6]=0,r[7]=0,r[8]=(n+t)*o,r[9]=(a+e)*c,r[10]=(u+i)*f,r[11]=-1,r[12]=0,r[13]=0,r[14]=u*i*2*f,r[15]=0,r}function Ct(r,t,n,e,a){let i=1/Math.tan(t/2),u=1/(e-a);return r[0]=i/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(a+e)*u,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*a*e*u,r[15]=0,r}function St(r,t,n,e){let a=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),u=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),c=2/(u+o),f=2/(a+i);return r[0]=c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=f,r[6]=0,r[7]=0,r[8]=-(u-o)*c*.5,r[9]=(a-i)*f*.5,r[10]=e/(n-e),r[11]=-1,r[12]=0,r[13]=0,r[14]=e*n/(n-e),r[15]=0,r}function Pt(r,t,n,e,a,i,u){let o=1/(t-n),c=1/(e-a),f=1/(i-u);return r[0]=-2*o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*c,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*f,r[11]=0,r[12]=(t+n)*o,r[13]=(a+e)*c,r[14]=(u+i)*f,r[15]=1,r}function At(r,t,n,e){let a,i,u,o,c,f,s,_,m,v,d=t[0],g=t[1],h=t[2],y=e[0],p=e[1],b=e[2],w=n[0],x=n[1],k=n[2];return Math.abs(d-w)<l&&Math.abs(g-x)<l&&Math.abs(h-k)<l?mat4.identity(r):(s=d-w,_=g-x,m=h-k,a=p*(m*=v=1/Math.sqrt(s*s+_*_+m*m))-b*(_*=v),i=b*(s*=v)-y*m,u=y*_-p*s,(v=Math.sqrt(a*a+i*i+u*u))?(a*=v=1/v,i*=v,u*=v):(a=0,i=0,u=0),o=_*u-m*i,c=m*a-s*u,f=s*i-_*a,(v=Math.sqrt(o*o+c*c+f*f))?(o*=v=1/v,c*=v,f*=v):(o=0,c=0,f=0),r[0]=a,r[1]=o,r[2]=s,r[3]=0,r[4]=i,r[5]=c,r[6]=_,r[7]=0,r[8]=u,r[9]=f,r[10]=m,r[11]=0,r[12]=-(a*d+i*g+u*h),r[13]=-(o*d+c*g+f*h),r[14]=-(s*d+_*g+m*h),r[15]=1,r)}function Tt(r,t,n,e){let a=t[0],i=t[1],u=t[2],o=e[0],c=e[1],f=e[2],s=a-n[0],_=i-n[1],l=u-n[2],m=s*s+_*_+l*l;m>0&&(s*=m=1/Math.sqrt(m),_*=m,l*=m);let v=c*l-f*_,d=f*s-o*l,g=o*_-c*s;return r[0]=v,r[1]=d,r[2]=g,r[3]=0,r[4]=_*g-l*d,r[5]=l*v-s*g,r[6]=s*d-_*v,r[7]=0,r[8]=s,r[9]=_,r[10]=l,r[11]=0,r[12]=a,r[13]=i,r[14]=u,r[15]=1,r}function Dt(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function Lt(r){return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2)+Math.pow(r[3],2)+Math.pow(r[4],2)+Math.pow(r[5],2)+Math.pow(r[6],2)+Math.pow(r[7],2)+Math.pow(r[8],2)+Math.pow(r[9],2)+Math.pow(r[10],2)+Math.pow(r[11],2)+Math.pow(r[12],2)+Math.pow(r[13],2)+Math.pow(r[14],2)+Math.pow(r[15],2))}function Nt(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r[3]=t[3]+n[3],r[4]=t[4]+n[4],r[5]=t[5]+n[5],r[6]=t[6]+n[6],r[7]=t[7]+n[7],r[8]=t[8]+n[8],r[9]=t[9]+n[9],r[10]=t[10]+n[10],r[11]=t[11]+n[11],r[12]=t[12]+n[12],r[13]=t[13]+n[13],r[14]=t[14]+n[14],r[15]=t[15]+n[15],r}function Ut(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r[3]=t[3]-n[3],r[4]=t[4]-n[4],r[5]=t[5]-n[5],r[6]=t[6]-n[6],r[7]=t[7]-n[7],r[8]=t[8]-n[8],r[9]=t[9]-n[9],r[10]=t[10]-n[10],r[11]=t[11]-n[11],r[12]=t[12]-n[12],r[13]=t[13]-n[13],r[14]=t[14]-n[14],r[15]=t[15]-n[15],r}function Vt(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=t[3]*n,r[4]=t[4]*n,r[5]=t[5]*n,r[6]=t[6]*n,r[7]=t[7]*n,r[8]=t[8]*n,r[9]=t[9]*n,r[10]=t[10]*n,r[11]=t[11]*n,r[12]=t[12]*n,r[13]=t[13]*n,r[14]=t[14]*n,r[15]=t[15]*n,r}function zt(r,t,n,e){return r[0]=t[0]+n[0]*e,r[1]=t[1]+n[1]*e,r[2]=t[2]+n[2]*e,r[3]=t[3]+n[3]*e,r[4]=t[4]+n[4]*e,r[5]=t[5]+n[5]*e,r[6]=t[6]+n[6]*e,r[7]=t[7]+n[7]*e,r[8]=t[8]+n[8]*e,r[9]=t[9]+n[9]*e,r[10]=t[10]+n[10]*e,r[11]=t[11]+n[11]*e,r[12]=t[12]+n[12]*e,r[13]=t[13]+n[13]*e,r[14]=t[14]+n[14]*e,r[15]=t[15]+n[15]*e,r}function Bt(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]&&r[4]===t[4]&&r[5]===t[5]&&r[6]===t[6]&&r[7]===t[7]&&r[8]===t[8]&&r[9]===t[9]&&r[10]===t[10]&&r[11]===t[11]&&r[12]===t[12]&&r[13]===t[13]&&r[14]===t[14]&&r[15]===t[15]}function Et(r,t){let n=r[0],e=r[1],a=r[2],i=r[3],u=r[4],o=r[5],c=r[6],f=r[7],s=r[8],_=r[9],m=r[10],v=r[11],d=r[12],g=r[13],h=r[14],y=r[15],p=t[0],b=t[1],w=t[2],x=t[3],k=t[4],M=t[5],C=t[6],S=t[7],P=t[8],A=t[9],T=t[10],D=t[11],L=t[12],N=t[13],U=t[14],V=t[15];return Math.abs(n-p)<=l*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(e-b)<=l*Math.max(1,Math.abs(e),Math.abs(b))&&Math.abs(a-w)<=l*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(i-x)<=l*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-k)<=l*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(o-M)<=l*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(c-C)<=l*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(f-S)<=l*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(s-P)<=l*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(_-A)<=l*Math.max(1,Math.abs(_),Math.abs(A))&&Math.abs(m-T)<=l*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(v-D)<=l*Math.max(1,Math.abs(v),Math.abs(D))&&Math.abs(d-L)<=l*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(g-N)<=l*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(h-U)<=l*Math.max(1,Math.abs(h),Math.abs(U))&&Math.abs(y-V)<=l*Math.max(1,Math.abs(y),Math.abs(V))}const Ft=at,It=Ut;function qt(){let r=new m(3);return r[0]=0,r[1]=0,r[2]=0,r}function Rt(r){var t=new m(3);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function Gt(r){let t=r[0],n=r[1],e=r[2];return Math.sqrt(t*t+n*n+e*e)}function Ot(r,t,n){let e=new m(3);return e[0]=r,e[1]=t,e[2]=n,e}function Ht(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function Kt(r,t,n,e){return r[0]=t,r[1]=n,r[2]=e,r}function jt(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r}function $t(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r}function Wt(r,t,n){return r[0]=t[0]*n[0],r[1]=t[1]*n[1],r[2]=t[2]*n[2],r}function Xt(r,t,n){return r[0]=t[0]/n[0],r[1]=t[1]/n[1],r[2]=t[2]/n[2],r}function Qt(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r[2]=Math.ceil(t[2]),r}function Yt(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r[2]=Math.floor(t[2]),r}function Zt(r,t,n){return r[0]=Math.min(t[0],n[0]),r[1]=Math.min(t[1],n[1]),r[2]=Math.min(t[2],n[2]),r}function Jt(r,t,n){return r[0]=Math.max(t[0],n[0]),r[1]=Math.max(t[1],n[1]),r[2]=Math.max(t[2],n[2]),r}function rn(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r[2]=Math.round(t[2]),r}function tn(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r}function nn(r,t,n,e){return r[0]=t[0]+n[0]*e,r[1]=t[1]+n[1]*e,r[2]=t[2]+n[2]*e,r}function en(r,t){let n=t[0]-r[0],e=t[1]-r[1],a=t[2]-r[2];return Math.sqrt(n*n+e*e+a*a)}function an(r,t){let n=t[0]-r[0],e=t[1]-r[1],a=t[2]-r[2];return n*n+e*e+a*a}function un(r){let t=r[0],n=r[1],e=r[2];return t*t+n*n+e*e}function on(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r}function cn(r,t){return r[0]=1/t[0],r[1]=1/t[1],r[2]=1/t[2],r}function fn(r,t){let n=t[0],e=t[1],a=t[2],i=n*n+e*e+a*a;return i>0&&(i=1/Math.sqrt(i),r[0]=t[0]*i,r[1]=t[1]*i,r[2]=t[2]*i),r}function sn(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]}function _n(r,t,n){let e=t[0],a=t[1],i=t[2],u=n[0],o=n[1],c=n[2];return r[0]=a*c-i*o,r[1]=i*u-e*c,r[2]=e*o-a*u,r}function ln(r,t,n,e){let a=t[0],i=t[1],u=t[2];return r[0]=a+e*(n[0]-a),r[1]=i+e*(n[1]-i),r[2]=u+e*(n[2]-u),r}function mn(r,t,n,e,a,i){let u=i*i,o=u*(2*i-3)+1,c=u*(i-2)+i,f=u*(i-1),s=u*(3-2*i);return r[0]=t[0]*o+n[0]*c+e[0]*f+a[0]*s,r[1]=t[1]*o+n[1]*c+e[1]*f+a[1]*s,r[2]=t[2]*o+n[2]*c+e[2]*f+a[2]*s,r}function vn(r,t,n,e,a,i){let u=1-i,o=u*u,c=i*i,f=o*u,s=3*i*o,_=3*c*u,l=c*i;return r[0]=t[0]*f+n[0]*s+e[0]*_+a[0]*l,r[1]=t[1]*f+n[1]*s+e[1]*_+a[1]*l,r[2]=t[2]*f+n[2]*s+e[2]*_+a[2]*l,r}function dn(r,t){t=t||1;let n=2*v()*Math.PI,e=2*v()-1,a=Math.sqrt(1-e*e)*t;return r[0]=Math.cos(n)*a,r[1]=Math.sin(n)*a,r[2]=e*t,r}function gn(r,t,n){let e=t[0],a=t[1],i=t[2],u=n[3]*e+n[7]*a+n[11]*i+n[15];return u=u||1,r[0]=(n[0]*e+n[4]*a+n[8]*i+n[12])/u,r[1]=(n[1]*e+n[5]*a+n[9]*i+n[13])/u,r[2]=(n[2]*e+n[6]*a+n[10]*i+n[14])/u,r}function hn(r,t,n){let e=t[0],a=t[1],i=t[2];return r[0]=e*n[0]+a*n[3]+i*n[6],r[1]=e*n[1]+a*n[4]+i*n[7],r[2]=e*n[2]+a*n[5]+i*n[8],r}function yn(r,t,n){let e=t[0],a=t[1],i=t[2],u=n[0],o=n[1],c=n[2],f=n[3],s=f*e+o*i-c*a,_=f*a+c*e-u*i,l=f*i+u*a-o*e,m=-u*e-o*a-c*i;return r[0]=s*f+m*-u+_*-c-l*-o,r[1]=_*f+m*-o+l*-u-s*-c,r[2]=l*f+m*-c+s*-o-_*-u,r}function pn(r,t,n,e){let a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(e)-a[2]*Math.sin(e),i[2]=a[1]*Math.sin(e)+a[2]*Math.cos(e),r[0]=i[0]+n[0],r[1]=i[1]+n[1],r[2]=i[2]+n[2],r}function bn(r,t,n,e){let a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[2]*Math.sin(e)+a[0]*Math.cos(e),i[1]=a[1],i[2]=a[2]*Math.cos(e)-a[0]*Math.sin(e),r[0]=i[0]+n[0],r[1]=i[1]+n[1],r[2]=i[2]+n[2],r}function wn(r,t,n,e){let a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0]*Math.cos(e)-a[1]*Math.sin(e),i[1]=a[0]*Math.sin(e)+a[1]*Math.cos(e),i[2]=a[2],r[0]=i[0]+n[0],r[1]=i[1]+n[1],r[2]=i[2]+n[2],r}function xn(r,t){let n=Ot(r[0],r[1],r[2]),e=Ot(t[0],t[1],t[2]);fn(n,n),fn(e,e);let a=sn(n,e);return a>1?0:a<-1?Math.PI:Math.acos(a)}function kn(r){return"vec3("+r[0]+", "+r[1]+", "+r[2]+")"}function Mn(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]}function Cn(r,t){let n=r[0],e=r[1],a=r[2],i=t[0],u=t[1],o=t[2];return Math.abs(n-i)<=l*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(e-u)<=l*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(a-o)<=l*Math.max(1,Math.abs(a),Math.abs(o))}const Sn=$t,Pn=Wt,An=Xt,Tn=en,Dn=an,Ln=Gt,Nn=un,Un=function(){let r=qt();return function(t,n,e,a,i,u){let o,c;for(n||(n=3),e||(e=0),c=a?Math.min(a*n+e,t.length):t.length,o=e;o<c;o+=n)r[0]=t[o],r[1]=t[o+1],r[2]=t[o+2],i(r,r,u),t[o]=r[0],t[o+1]=r[1],t[o+2]=r[2];return t}}();function Vn(){let r=new m(4);return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r}function zn(r){let t=new m(4);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function Bn(r,t,n,e){let a=new m(4);return a[0]=r,a[1]=t,a[2]=n,a[3]=e,a}function En(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}function Fn(r,t,n,e,a){return r[0]=t,r[1]=n,r[2]=e,r[3]=a,r}function In(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r[3]=t[3]+n[3],r}function qn(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r[3]=t[3]-n[3],r}function Rn(r,t,n){return r[0]=t[0]*n[0],r[1]=t[1]*n[1],r[2]=t[2]*n[2],r[3]=t[3]*n[3],r}function Gn(r,t,n){return r[0]=t[0]/n[0],r[1]=t[1]/n[1],r[2]=t[2]/n[2],r[3]=t[3]/n[3],r}function On(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r[2]=Math.ceil(t[2]),r[3]=Math.ceil(t[3]),r}function Hn(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r[2]=Math.floor(t[2]),r[3]=Math.floor(t[3]),r}function Kn(r,t,n){return r[0]=Math.min(t[0],n[0]),r[1]=Math.min(t[1],n[1]),r[2]=Math.min(t[2],n[2]),r[3]=Math.min(t[3],n[3]),r}function jn(r,t,n){return r[0]=Math.max(t[0],n[0]),r[1]=Math.max(t[1],n[1]),r[2]=Math.max(t[2],n[2]),r[3]=Math.max(t[3],n[3]),r}function $n(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r[2]=Math.round(t[2]),r[3]=Math.round(t[3]),r}function Wn(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=t[3]*n,r}function Xn(r,t,n,e){return r[0]=t[0]+n[0]*e,r[1]=t[1]+n[1]*e,r[2]=t[2]+n[2]*e,r[3]=t[3]+n[3]*e,r}function Qn(r,t){let n=t[0]-r[0],e=t[1]-r[1],a=t[2]-r[2],i=t[3]-r[3];return Math.sqrt(n*n+e*e+a*a+i*i)}function Yn(r,t){let n=t[0]-r[0],e=t[1]-r[1],a=t[2]-r[2],i=t[3]-r[3];return n*n+e*e+a*a+i*i}function Zn(r){let t=r[0],n=r[1],e=r[2],a=r[3];return Math.sqrt(t*t+n*n+e*e+a*a)}function Jn(r){let t=r[0],n=r[1],e=r[2],a=r[3];return t*t+n*n+e*e+a*a}function re(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=-t[3],r}function te(r,t){return r[0]=1/t[0],r[1]=1/t[1],r[2]=1/t[2],r[3]=1/t[3],r}function ne(r,t){let n=t[0],e=t[1],a=t[2],i=t[3],u=n*n+e*e+a*a+i*i;return u>0&&(u=1/Math.sqrt(u),r[0]=n*u,r[1]=e*u,r[2]=a*u,r[3]=i*u),r}function ee(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]*t[3]}function ae(r,t,n,e){let a=t[0],i=t[1],u=t[2],o=t[3];return r[0]=a+e*(n[0]-a),r[1]=i+e*(n[1]-i),r[2]=u+e*(n[2]-u),r[3]=o+e*(n[3]-o),r}function ie(r,t){return t=t||1,r[0]=v(),r[1]=v(),r[2]=v(),r[3]=v(),ne(r,r),Wn(r,r,t),r}function ue(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3];return r[0]=n[0]*e+n[4]*a+n[8]*i+n[12]*u,r[1]=n[1]*e+n[5]*a+n[9]*i+n[13]*u,r[2]=n[2]*e+n[6]*a+n[10]*i+n[14]*u,r[3]=n[3]*e+n[7]*a+n[11]*i+n[15]*u,r}function oe(r,t,n){let e=t[0],a=t[1],i=t[2],u=n[0],o=n[1],c=n[2],f=n[3],s=f*e+o*i-c*a,_=f*a+c*e-u*i,l=f*i+u*a-o*e,m=-u*e-o*a-c*i;return r[0]=s*f+m*-u+_*-c-l*-o,r[1]=_*f+m*-o+l*-u-s*-c,r[2]=l*f+m*-c+s*-o-_*-u,r[3]=t[3],r}function ce(r){return"vec4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function fe(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]}function se(r,t){let n=r[0],e=r[1],a=r[2],i=r[3],u=t[0],o=t[1],c=t[2],f=t[3];return Math.abs(n-u)<=l*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(e-o)<=l*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(a-c)<=l*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-f)<=l*Math.max(1,Math.abs(i),Math.abs(f))}const _e=qn,le=Rn,me=Gn,ve=Qn,de=Yn,ge=Zn,he=Jn,ye=function(){let r=Vn();return function(t,n,e,a,i,u){let o,c;for(n||(n=4),e||(e=0),c=a?Math.min(a*n+e,t.length):t.length,o=e;o<c;o+=n)r[0]=t[o],r[1]=t[o+1],r[2]=t[o+2],r[3]=t[o+3],i(r,r,u),t[o]=r[0],t[o+1]=r[1],t[o+2]=r[2],t[o+3]=r[3];return t}}();function pe(){let r=new m(4);return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function be(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function we(r,t,n){n*=.5;let e=Math.sin(n);return r[0]=e*t[0],r[1]=e*t[1],r[2]=e*t[2],r[3]=Math.cos(n),r}function xe(r,t){let n=2*Math.acos(t[3]),e=Math.sin(n/2);return 0!=e?(r[0]=t[0]/e,r[1]=t[1]/e,r[2]=t[2]/e):(r[0]=1,r[1]=0,r[2]=0),n}function ke(r,t,n){let e=t[0],a=t[1],i=t[2],u=t[3],o=n[0],c=n[1],f=n[2],s=n[3];return r[0]=e*s+u*o+a*f-i*c,r[1]=a*s+u*c+i*o-e*f,r[2]=i*s+u*f+e*c-a*o,r[3]=u*s-e*o-a*c-i*f,r}function Me(r,t,n){n*=.5;let e=t[0],a=t[1],i=t[2],u=t[3],o=Math.sin(n),c=Math.cos(n);return r[0]=e*c+u*o,r[1]=a*c+i*o,r[2]=i*c-a*o,r[3]=u*c-e*o,r}function Ce(r,t,n){n*=.5;let e=t[0],a=t[1],i=t[2],u=t[3],o=Math.sin(n),c=Math.cos(n);return r[0]=e*c-i*o,r[1]=a*c+u*o,r[2]=i*c+e*o,r[3]=u*c-a*o,r}function Se(r,t,n){n*=.5;let e=t[0],a=t[1],i=t[2],u=t[3],o=Math.sin(n),c=Math.cos(n);return r[0]=e*c+a*o,r[1]=a*c-e*o,r[2]=i*c+u*o,r[3]=u*c-i*o,r}function Pe(r,t){let n=t[0],e=t[1],a=t[2];return r[0]=n,r[1]=e,r[2]=a,r[3]=Math.sqrt(Math.abs(1-n*n-e*e-a*a)),r}function Ae(r,t,n,e){let a,i,u,o,c,f=t[0],s=t[1],_=t[2],l=t[3],m=n[0],v=n[1],d=n[2],g=n[3];return(i=f*m+s*v+_*d+l*g)<0&&(i=-i,m=-m,v=-v,d=-d,g=-g),1-i>1e-6?(a=Math.acos(i),u=Math.sin(a),o=Math.sin((1-e)*a)/u,c=Math.sin(e*a)/u):(o=1-e,c=e),r[0]=o*f+c*m,r[1]=o*s+c*v,r[2]=o*_+c*d,r[3]=o*l+c*g,r}function Te(r,t){let n=t[0],e=t[1],a=t[2],i=t[3],u=n*n+e*e+a*a+i*i,o=u?1/u:0;return r[0]=-n*o,r[1]=-e*o,r[2]=-a*o,r[3]=i*o,r}function De(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=t[3],r}function Le(r,t){let n,e=t[0]+t[4]+t[8];if(e>0)n=Math.sqrt(e+1),r[3]=.5*n,n=.5/n,r[0]=(t[5]-t[7])*n,r[1]=(t[6]-t[2])*n,r[2]=(t[1]-t[3])*n;else{let e=0;t[4]>t[0]&&(e=1),t[8]>t[3*e+e]&&(e=2);let a=(e+1)%3,i=(e+2)%3;n=Math.sqrt(t[3*e+e]-t[3*a+a]-t[3*i+i]+1),r[e]=.5*n,n=.5/n,r[3]=(t[3*a+i]-t[3*i+a])*n,r[a]=(t[3*a+e]+t[3*e+a])*n,r[i]=(t[3*i+e]+t[3*e+i])*n}return r}function Ne(r,t,n,e){let a=.5*Math.PI/180;t*=a,n*=a,e*=a;let i=Math.sin(t),u=Math.cos(t),o=Math.sin(n),c=Math.cos(n),f=Math.sin(e),s=Math.cos(e);return r[0]=i*c*s-u*o*f,r[1]=u*o*s+i*c*f,r[2]=u*c*f-i*o*s,r[3]=u*c*s+i*o*f,r}function Ue(r){return"quat("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}const Ve=zn,ze=Bn,Be=En,Ee=Fn,Fe=In,Ie=ke,qe=Wn,Re=ee,Ge=ae,Oe=Zn,He=Oe,Ke=Jn,je=Ke,$e=ne,We=fe,Xe=se,Qe=function(){let r=qt(),t=Ot(1,0,0),n=Ot(0,1,0);return function(e,a,i){let u=sn(a,i);return u<-.999999?(_n(r,t,a),Ln(r)<1e-6&&_n(r,n,a),fn(r,r),we(e,r,Math.PI),e):u>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(_n(r,a,i),e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=1+u,$e(e,e))}}(),Ye=function(){let r=pe(),t=pe();return function(n,e,a,i,u,o){return Ae(r,e,u,o),Ae(t,a,i,o),Ae(n,r,t,2*o*(1-o)),n}}(),Ze=function(){let r=gr();return function(t,n,e,a){return r[0]=e[0],r[3]=e[1],r[6]=e[2],r[1]=a[0],r[4]=a[1],r[7]=a[2],r[2]=-n[0],r[5]=-n[1],r[8]=-n[2],$e(t,Le(t,r))}}();function Je(){let r=new m(2);return r[0]=0,r[1]=0,r}function ra(r){let t=new m(2);return t[0]=r[0],t[1]=r[1],t}function ta(r,t){let n=new m(2);return n[0]=r,n[1]=t,n}function na(r,t){return r[0]=t[0],r[1]=t[1],r}function ea(r,t,n){return r[0]=t,r[1]=n,r}function aa(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r}function ia(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r}function ua(r,t,n){return r[0]=t[0]*n[0],r[1]=t[1]*n[1],r}function oa(r,t,n){return r[0]=t[0]/n[0],r[1]=t[1]/n[1],r}function ca(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r}function fa(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r}function sa(r,t,n){return r[0]=Math.min(t[0],n[0]),r[1]=Math.min(t[1],n[1]),r}function _a(r,t,n){return r[0]=Math.max(t[0],n[0]),r[1]=Math.max(t[1],n[1]),r}function la(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r}function ma(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r}function va(r,t,n,e){return r[0]=t[0]+n[0]*e,r[1]=t[1]+n[1]*e,r}function da(r,t){var n=t[0]-r[0],e=t[1]-r[1];return Math.sqrt(n*n+e*e)}function ga(r,t){var n=t[0]-r[0],e=t[1]-r[1];return n*n+e*e}function ha(r){var t=r[0],n=r[1];return Math.sqrt(t*t+n*n)}function ya(r){var t=r[0],n=r[1];return t*t+n*n}function pa(r,t){return r[0]=-t[0],r[1]=-t[1],r}function ba(r,t){return r[0]=1/t[0],r[1]=1/t[1],r}function wa(r,t){var n=t[0],e=t[1],a=n*n+e*e;return a>0&&(a=1/Math.sqrt(a),r[0]=t[0]*a,r[1]=t[1]*a),r}function xa(r,t){return r[0]*t[0]+r[1]*t[1]}function ka(r,t,n){var e=t[0]*n[1]-t[1]*n[0];return r[0]=r[1]=0,r[2]=e,r}function Ma(r,t,n,e){var a=t[0],i=t[1];return r[0]=a+e*(n[0]-a),r[1]=i+e*(n[1]-i),r}function Ca(r,t){t=t||1;var n=2*v()*Math.PI;return r[0]=Math.cos(n)*t,r[1]=Math.sin(n)*t,r}function Sa(r,t,n){var e=t[0],a=t[1];return r[0]=n[0]*e+n[2]*a,r[1]=n[1]*e+n[3]*a,r}function Pa(r,t,n){var e=t[0],a=t[1];return r[0]=n[0]*e+n[2]*a+n[4],r[1]=n[1]*e+n[3]*a+n[5],r}function Aa(r,t,n){var e=t[0],a=t[1];return r[0]=n[0]*e+n[3]*a+n[6],r[1]=n[1]*e+n[4]*a+n[7],r}function Ta(r,t,n){let e=t[0],a=t[1];return r[0]=n[0]*e+n[4]*a+n[12],r[1]=n[1]*e+n[5]*a+n[13],r}function Da(r){return"vec2("+r[0]+", "+r[1]+")"}function La(r,t){return r[0]===t[0]&&r[1]===t[1]}function Na(r,t){let n=r[0],e=r[1],a=t[0],i=t[1];return Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(e-i)<=l*Math.max(1,Math.abs(e),Math.abs(i))}const Ua=ha,Va=ia,za=ua,Ba=oa,Ea=da,Fa=ga,Ia=ya,qa=function(){let r=Je();return function(t,n,e,a,i,u){let o,c;for(n||(n=2),e||(e=0),c=a?Math.min(a*n+e,t.length):t.length,o=e;o<c;o+=n)r[0]=t[o],r[1]=t[o+1],i(r,r,u),t[o]=r[0],t[o+1]=r[1];return t}}();n.d(t,"glMatrix",function(){return e}),n.d(t,"mat2",function(){return a}),n.d(t,"mat2d",function(){return i}),n.d(t,"mat3",function(){return u}),n.d(t,"mat4",function(){return o}),n.d(t,"quat",function(){return s}),n.d(t,"vec2",function(){return _}),n.d(t,"vec3",function(){return c}),n.d(t,"vec4",function(){return f})},function(r,t,n){"use strict";var e=n(3),a=n(10),i=n(43),u=n(4),o="\n    precision mediump float;\n    attribute vec2 position;\n    uniform mat3 layout;\n    varying vec2 vPosition;\n    void main() {\n        vPosition = position;\n        vec2 pos = (vec3(position, 1.0) * layout).xy;\n        gl_Position = vec4(pos, 0.0, 1.0);\n    }\n",c="\n    precision mediump float;\n    varying vec2 vPosition;\n\n    uniform sampler2D tiles;\n\n    const float numCols = 12.0;\n    const float numRows = 26.0;\n\n    void main() {\n        // Perspective coord\n        vec2 aspect = vec2(numCols / numRows, 1.0);\n        vec2 persp = vPosition + vec2(\n            vPosition.x * 0.08,\n            0.0\n        );\n        persp.x = clamp(persp.x, -1.0, 1.0);\n        vec2 tilePos = vec2((persp.x + 1.0) * 0.5, (persp.y - 1.0) * -0.5);\n        tilePos.y = tilePos.y - 0.03;\n        float tile = texture2D(tiles, tilePos).x;\n        vec4 tileColor = (tile > 0.0) ?  vec4(1.0, 1.0, 1.0, 1.0) : vec4(0.0, 0.0, 0.0, 1.0);\n        gl_FragColor = tileColor;\n    }\n";t.vertexSource=o,t.fragmentSource=c,t.makeNode=function(r){var t=e.Texture[7](0,0,0,0),n=e.Texture[7](0,0,0,0),f=u.makeNode(["tileShadows"],0,[e.Shader[0](o)],[e.Shader[0](c)],0,0,0,[[["tiles",r],0]],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[a.__(2,[t])],0,0,0);return i.makeNode(f,t,n,4,4)}},function(r,t,n){"use strict";var e=n(3),a=n(10),i=n(23),u=n(4),o=n(31),c=n(32),f="\n    precision mediump float;\n    attribute vec2 position;\n    uniform mat3 layout;\n    uniform mat3 texTrans;\n    varying vec3 screenP;\n\n    void main() {\n        vec2 transformed = (vec3(position, 1.0) * layout).xy;\n        screenP = vec3(transformed, 0.0);\n        // Todo: Better support texTrans etc to avoid\n        // manual bickering\n        gl_Position = vec4((vec3(position, 1.0) * texTrans).xy, 0.0, 1.0);\n    }\n";function s(r,t){return"\n    precision mediump float;\n    varying vec3 screenP;\n\n    "+i.PointLight[5](r,t)+"\n\n    void main() {\n        // Global pointLight (not using local position)\n        vec3 pointLight = lighting(vec3(0.0, 0.0, 1.0));\n        gl_FragColor = vec4(pointLight, 1.0);\n    }\n  "}t.vertexSource=f,t.fragmentSource=s,t.makeNode=function(){var r=i.PointLight[1](a.__(0,[c.pointLight]),0,0,0,[24],0),t=o.make(c.camera);return u.makeNode(["gridLight"],0,[e.Shader[0](f)],[e.Shader[0](s(r,t))],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[2],[1],0,0)}},function(r,t,n){"use strict";var e=n(3),a=n(4),i=n(66),u="\n    precision mediump float;\n    attribute vec2 position;\n    uniform mat3 layout;\n    uniform mat3 tileShadowsMat;\n    uniform mat3 beamsMat;\n    uniform mat3 dropMat;\n    uniform mat3 gridLightMat;\n    varying vec2 vPosition;\n    varying vec2 tileShadowsPos;\n    varying vec2 beamsPos;\n    varying vec2 dropPos;\n    varying vec2 gridLightPos;\n\n    uniform vec2 pixelSize;\n    // Coords to take off lines on sides\n    varying vec2 lineCoords;\n    varying vec2 singlePixel;\n\n    varying vec2 coord;\n    void main() {\n        vPosition = position;\n        coord = (position + 1.0) * 0.5;\n        singlePixel = 2.0/pixelSize;\n        lineCoords = vec2(\n            position.x + singlePixel.x,\n            position.y\n        );\n        vec2 transformed = (vec3(position, 1.0) * layout).xy;\n        tileShadowsPos = (vec3(position, 1.0) * tileShadowsMat).xy;\n        beamsPos = (vec3(position, 1.0) * beamsMat).xy;\n        dropPos = (vec3(position, 1.0) * dropMat).xy;\n        gridLightPos = (vec3(position, 1.0) * gridLightMat).xy;\n        gl_Position = vec4(transformed.xy, 0.0, 1.0);\n    }\n",o="\n    precision mediump float;\n    uniform vec3 bg;\n    uniform vec3 lineColor;\n    uniform vec2 elPos;\n    uniform vec3 elColor;\n    uniform vec3 dropColor;\n    uniform vec2 pixelSize;\n    uniform sampler2D tiles;\n    uniform sampler2D tileShadows;\n    uniform sampler2D beams;\n    uniform sampler2D drop;\n    uniform sampler2D gridLight;\n    uniform vec4 centerRadius;\n\n    varying vec2 vPosition;\n    varying vec2 lineCoords;\n    varying vec2 singlePixel;\n    varying vec2 tileShadowsPos;\n    varying vec2 beamsPos;\n    varying vec2 dropPos;\n    varying vec2 gridLightPos;\n\n    // Normalized to 0.0 - 1.0\n    varying vec2 coord;\n\n    const float numCols = 12.0;\n    const float numRows = 26.0;\n    const vec2 aspect = vec2(numCols / numRows, 1.0);\n    const float colSize = 2.0 / numCols;\n    const float rowSize = 2.0 / numRows;\n    const float wordSize = 1.0;\n    const float wordStart = 0.5;\n    const float tileWidth = 1.0 / numCols;\n    const float tileHeight = 1.0 / numRows;\n\n    float random(vec2 st) {\n        return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453123);\n    }\n\n    void main() {\n        // todo: Calculate in vertex shader?\n        vec2 elVec = vPosition - centerRadius.xy;\n        vec2 elVecNorm = normalize(elVec);\n        float elVecLength = length(elVec);\n\n        float lengthCoef = max(1.5 - elVecLength, 0.0);\n\n        // Roughly light a triangle below element\n        float triangleDir = dot(elVecNorm, vec2(0.0, -1.0));\n        //float noiseFactor = random(vPosition) * 0.3 + 0.7;\n        float triangleLight = smoothstep(0.0, 0.2, triangleDir) * 0.02;\n        vec3 lPos = vec3(centerRadius.x, centerRadius.y + 0.15, 0.25);\n        vec3 surfaceToLight = lPos - vec3(vPosition.xy, 0.0);\n        vec3 lVec = normalize(surfaceToLight);\n\n        vec3 coneDir = normalize(vec3(0.0, -0.8, 0.2));\n        float lightToSurfaceAngle = degrees(acos(dot(-lVec, coneDir)));\n\n        float aoi = dot(vec3(0.0, 0.0, 1.0), lVec);\n        float attenuation = 1.0 / (1.0 + 100.0 * pow(length(surfaceToLight), 2.0));\n        float endDegree = 60.0 + centerRadius.z * 30.0;\n        float startDegree = endDegree - 25.0 - centerRadius.z * 20.0;\n        attenuation = attenuation * (1.0 - smoothstep(startDegree, endDegree, lightToSurfaceAngle));\n        triangleLight = aoi * attenuation;\n\n        // Global pointLight (not using local position)\n        vec3 gridLight = (texture2D(gridLight, gridLightPos).xyz * 0.7) + 0.3;\n\n        // Shadow\n        float shadow = texture2D(tileShadows, tileShadowsPos).x;\n        vec3 color = mix(bg * gridLight, vec3(0.0, 0.0, 0.0), shadow * 0.15);\n\n        // Aura light\n        /*\n        float skew = (vPosition.y - centerRadius.y + 0.15) / 0.8;\n        skew = 1.0;\n        float auraLight = max(0.15 - length(elVec * centerRadius.wz) * skew, 0.0) * 0.05;\n        color = color + elColor * auraLight;\n        */\n\n        // Line\n        float xblank = (mod(lineCoords.x, colSize) > singlePixel.x) ? 1.0 : 0.0;\n        float x3blank = (mod(lineCoords.x - wordStart, wordSize) > singlePixel.x * 2.0) ? 1.0 : 0.0;\n        float yblank = (mod(lineCoords.y, rowSize) > singlePixel.y) ? 1.0 : 0.0;\n        float lineCoef = (1.0 - xblank * yblank * x3blank) * 0.9 + (1.0 - x3blank) * 0.1;\n        color = mix(color, lineColor * gridLight, lineCoef);\n\n        // Beam\n        vec3 beam = texture2D(beams, beamsPos).xyz;\n        color = mix(color, elColor, (beam.x == 0.0) ? 0.0 : 0.05);\n\n        // Dropbeam\n        float dropBeam = texture2D(drop, dropPos).x;\n        color = mix(color, dropColor, dropBeam * 0.2);\n\n        // Color + triangleLight\n        vec3 tLight = triangleLight * bg * elColor;\n        tLight = pow(tLight, vec3(1.0/2.2));\n        color = color + tLight;\n        // Gamma correction\n        gl_FragColor = vec4(color, 1.0);\n    }\n  ";t.vertexSource=u,t.fragmentSource=o,t.makeNode=function(r,t,n,c,f,s,_,l,m,v,d){var g=i.makeNode(0);return a.makeNode(["grid"],0,[e.Shader[0](u)],[e.Shader[0](o)],0,0,0,[[["tiles",n],[["tileShadows",a.SceneTex[0](0,0,c)],[["beams",a.SceneTex[0](0,0,f)],[["drop",a.SceneTex[0](0,0,s)],[["gridLight",a.SceneTex[0](0,0,g)],0]]]]]],0,0,[[["bg",r],[["lineColor",t],[["elPos",m[1]],[["elColor",m[3]],[["dropColor",_],[["centerRadius",v],[["completedRows",d],0]]]]]]]],0,[1],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[[l,[f,[c,[s,[g,0]]]]]],0,0,0,0)}},function(r,t,n){"use strict";var e=n(3),a=n(10),i=n(43),u=n(4),o=n(44),c="\n    precision mediump float;\n    attribute vec2 position;\n    uniform mat3 layout;\n    uniform mat3 model;\n    void main() {\n        vec2 pos = (vec3(position, 1.0) * model * layout).xy;\n        pos = pos + vec2(0.01, 0.02);\n        gl_Position = vec4(pos.xy, 0.0, 1.0);\n    }\n",f="\n    precision mediump float;\n\n    void main() {\n        gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n    }\n",s="\n    precision mediump float;\n    attribute vec2 position;\n    uniform mat3 layout;\n    uniform mat3 lightMat;\n    varying vec2 lightUV;\n    uniform mat3 elMat;\n    varying vec2 elUV;\n    void main() {\n        lightUV = (vec3(position, 1.0) * lightMat).xy;\n        elUV = (vec3(position, 1.0) * elMat).xy;\n        vec2 pos = (vec3(position, 1.0) * layout).xy;\n        gl_Position = vec4(pos, 0.0, 1.0);\n    }\n",_="\n    precision mediump float;\n    varying vec2 lightUV;\n    varying vec2 elUV;\n    uniform sampler2D light;\n    uniform sampler2D el;\n    uniform vec3 color;\n\n    void main() {\n      vec4 elColor = texture2D(el, elUV);\n      vec4 light = texture2D(light, lightUV);\n      gl_FragColor = mix(vec4(0.0, 0.0, 0.0, light.x * 0.8), elColor, step(0.01, elColor.a));\n    }\n",l=[0],m=[0];function v(){var r=l[0];if(r)return r[0];var t=u.makeProgram(e.Shader[0](c),e.Shader[0](f),0,[[["model",5],0]],0,0,[e.VertexAttrib[0]("position",2),0],0,0,0,0,0,0,0);return l[0]=[t],t}function d(){var r=m[0];if(r)return r[0];var t=u.makeProgram(e.Shader[0](s),e.Shader[0](_),0,[[["color",3],0]],0,[[["light",1],[["el",1],0]]],[e.VertexAttrib[0]("position",2),0],0,0,0,0,0,0,0);return m[0]=[t],t}t.lightBaseVert=c,t.lightBaseFrag=f,t.vertexSource=s,t.fragmentSource=_,t.lightBaseProgram=l,t.drawElementProgram=m,t.getLightBaseProgram=v,t.getDrawElementProgram=d,t.makeNode=function(r,t){var n=e.Texture[7](0,0,0,0),c=e.Texture[7](0,0,0,0),f=a.__(3,[2/1.5]),s=u.makeNode(0,["lightBase"],0,0,[v()],0,0,0,0,[r[0]],[[["model",r[1]],0]],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[1],0,0,[a.__(2,[n])],0,[1],0),_=i.makeNode(s,n,c,10,10),l=o.makeNode(2,1.5,t,[1],[r[0]],[a.__(1,[r[3]])],0,[r[1]],0,[.25],0);return u.makeNode(0,["drawElement"],0,0,[d()],0,0,[[["light",u.SceneTex[0](0,0,_)],[["el",u.SceneTex[0](0,0,l)],0]]],0,0,[[["color",r[3]],0]],0,0,0,0,0,[f],0,0,0,[a.__(1,[a.__(0,[.22]),a.__(0,[0])])],0,0,0,0,0,0,0,[1],0,0,0,[[_,[l,0]]],0,0,0,0)}},function(r,t,n){"use strict";var e=n(3),a=n(4),i="\n    precision mediump float;\n    attribute vec2 position;\n    uniform mat3 layout;\n    uniform mat3 texMat;\n    varying vec2 texUV;\n    void main() {\n        texUV = (vec3(position, 1.0) * texMat).xy;\n        vec2 pos = (vec3(position, 1.0) * layout).xy;\n        gl_Position = vec4(pos, 0.0, 1.0);\n    }\n",u="\n    precision mediump float;\n    varying vec2 texUV;\n    uniform sampler2D tex;\n\n    void main() {\n      vec4 texColor = texture2D(tex, texUV);\n      gl_FragColor = vec4(texColor);\n    }\n",o=[0];function c(){var r=o[0];if(r)return r[0];var t=a.makeProgram(e.Shader[0](i),e.Shader[0](u),0,0,0,[[["tex",1],0]],e.VertexBuffer[3](0),0,0,0,0,0,0,0);return o[0]=[t],t}t.vertexSource=i,t.fragmentSource=u,t.program=o,t.getProgram=c,t.makeNode=function(r,t,n,e,i){var u,o=0;t&&0!==t[0]?u=[1,1]:o=1,1===o&&(u=n&&0!==n[0]?[1,1]:[2,0]);var f=a.makeNode(0,["cacheResultTex"],0,0,0,0,[[r,0]],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[0],0,0,0,0,0,0,[u[0]],0,[u[1]],0);return a.makeNode(0,["cachedResult"],0,0,[c()],0,0,[[["tex",a.SceneTex[0](0,0,f)],0]],0,0,0,0,0,0,0,0,e,0,0,0,0,0,0,0,0,0,0,0,t,[1],n,0,[[f,0]],0,0,0,0)}},function(r,t,n){"use strict";var e=n(3),a=n(10),i=n(23),u=n(4),o=n(31),c=n(32),f="\n    precision mediump float;\n    attribute vec2 position;\n    varying vec2 vPosition;\n    varying vec3 screenP;\n    void main() {\n        vPosition = position;\n        screenP = vec3(position, -1.0);\n        gl_Position = vec4(position, 0.0, 1.0);\n    }\n";function s(r,t){return"\n    precision mediump float;\n    uniform vec3 color;\n    uniform float anim;\n    varying vec2 vPosition;\n    varying vec3 screenP;\n    "+i.PointLight[5](r,t)+"\n\n    void main() {\n        const float modRange = 0.02;\n        vec2 mody = vec2(vPosition.x, mod(vPosition.y, modRange));\n        float smoothed = smoothstep(0.0, modRange, mody.y);\n        vec3 normal = vec3(0.0, sin(smoothed * 3.14 + 1.57), sin(smoothed * 3.14));\n        normal = vec3(0.0, 0.0, 1.0);\n        vec3 light = lighting(normal);\n        gl_FragColor = vec4(color * 0.8 * light, 1.0);\n    }\n"}t.vertexSource=f,t.fragmentSource=s,t.makeNode=function(r,t){var n=i.PointLight[1](a.__(0,[c.pointLight]),0,0,0,[24],0),_=o.make(c.camera);return u.makeNode(["background"],0,[e.Shader[0](f)],[e.Shader[0](s(n,_))],0,0,[t],0,0,0,[[["color",r],[["anim",u.UFloat[0](0)],0]]],0,[1],0,0,0,[a.__(0,[a.__(0,[1]),a.__(0,[1])])],0,0,[a.__(0,[.05])],0,0,0,0,[1],0,0,0,0,0,0,0,0,0,0,0,0)}},function(r,t,n){"use strict";var e=n(3),a=n(57),i=n(19),u=n(4),o=n(17),c="\n    precision mediump float;\n    attribute vec2 position;\n    uniform mat3 layout;\n    uniform mat3 sdfTilesMat;\n    varying vec2 sdfPos;\n    varying vec2 vPosition;\n    void main() {\n        vPosition = position;\n        vec3 transformed = vec3(position, 1.0) * layout;\n        sdfPos = (vec3(position, 1.0) * sdfTilesMat).xy;\n        gl_Position = vec4(transformed.xy, 0.0, 1.0);\n    }\n",f="\n    precision mediump float;\n    varying vec2 vPosition;\n    varying vec2 sdfPos;\n\n    uniform sampler2D tiles;\n    uniform sampler2D sdfTiles;\n\n    const int numCols = 12;\n    const int numRows = 26;\n\n    void main() {\n        vec2 tilePos = vec2((vPosition.x + 1.0) * 0.5, (vPosition.y - 1.0) * -0.5);\n        float tile = texture2D(tiles, tilePos).x;\n        int colorIdx = int(tile * 255.0);\n        vec3 color =\n            (colorIdx == 1) ? "+i.toGlsl(o.caml_array_get(a.colors,2))+"\n            : (colorIdx == 2) ? "+i.toGlsl(o.caml_array_get(a.colors,3))+"\n            : (colorIdx == 3) ? "+i.toGlsl(o.caml_array_get(a.colors,4))+"\n            : (colorIdx == 4) ? "+i.toGlsl(o.caml_array_get(a.colors,5))+"\n            : (colorIdx == 5) ? "+i.toGlsl(o.caml_array_get(a.colors,6))+"\n            : (colorIdx == 6) ? "+i.toGlsl(o.caml_array_get(a.colors,7))+"\n            : "+i.toGlsl(o.caml_array_get(a.colors,8))+";\n        vec3 sdfColor = texture2D(sdfTiles, sdfPos).xyz;\n        //color = color * 0.5 + ((colorIdx == 0) ? vec3(0.0, 0.0, 0.0) : (sdfColor * 0.5));\n        /*\n        float sdfCoef = abs(0.5 - sdfColor.x);\n        float tileCoef = 1.0 - sdfCoef;\n        gl_FragColor = (colorIdx == 0) ? vec4(0.0, 0.0, 0.0, 0.0) : vec4(color * tileCoef + sdfColor * sdfCoef, 1.0);\n        */\n        gl_FragColor = (colorIdx == 0) ? vec4(0.0, 0.0, 0.0, 0.0) : vec4(mix(color, sdfColor, 0.4), 1.0);\n    }\n";t.vertexSource=c,t.fragmentSource=f,t.makeNode=function(r,t){return u.makeNode(["tilesDraw"],0,[e.Shader[0](c)],[e.Shader[0](f)],0,0,0,[[["tiles",r],[["sdfTiles",u.SceneTex[0](0,0,t)],0]]],0,0,[0],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[1],0,[1],0,0,0,0,0,0)}},function(r,t,n){"use strict";var e=n(3),a=n(4),i="\n    precision mediump float;\n    attribute vec2 position;\n    uniform mat3 layout;\n    varying vec2 vPosition;\n    void main() {\n        vPosition = position;\n        vec3 pos2 = vec3(position, 1.0) * layout;\n        gl_Position = vec4(pos2.xy, 0.0, 1.0);\n    }\n",u="\n    precision mediump float;\n    varying vec2 vPosition;\n\n    void main() {\n        gl_FragColor = vec4(1.0, 1.0, 1.0, 0.6);\n    }\n";t.vertexSource=i,t.fragmentSource=u,t.makeNode=function(r){return a.makeNode(["tileBlink"],0,[e.Shader[0](i)],[e.Shader[0](u)],0,0,0,0,0,[r],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[1],0,0,[1],0,0,0,0,0)}},function(r,t,n){"use strict";var e=n(3),a=n(10),i=n(4),u="\n    precision mediump float;\n    attribute vec2 position;\n    attribute float fromDrop;\n    uniform mat3 layout;\n    varying float vFromDrop;\n    void main() {\n        vFromDrop = fromDrop;\n        vec2 pos = (vec3(position, 1.0) * layout).xy;\n        gl_Position = vec4(pos, 0.0, 1.0);\n    }\n",o="\n    precision mediump float;\n    varying float vFromDrop;\n    uniform float sinceDrop;\n\n    void main() {\n        float c = max(0.0, vFromDrop - sinceDrop);\n        gl_FragColor = vec4(c, c, c, 1.0);\n    }\n";t.vertexSource=u,t.fragmentSource=o,t.makeNode=function(r){return i.makeNode(["dropBeams"],0,[e.Shader[0](u)],[e.Shader[0](o)],0,0,0,0,0,[r],[[["sinceDrop",i.UFloat[1](0)],0]],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[a.__(1,[1024])],0,[1],0)}},function(r,t,n){"use strict";var e=n(3),a=n(4),i="\n    precision mediump float;\n    attribute vec2 position;\n    uniform mat3 layout;\n    varying vec2 vPosition;\n    void main() {\n        vPosition = position;\n        vec2 pos = (vec3(position, 1.0) * layout).xy;\n        gl_Position = vec4(pos, 0.0, 1.0);\n    }\n",u="\n    precision mediump float;\n    varying vec2 vPosition;\n\n    void main() {\n        gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n    }\n";t.vertexSource=i,t.fragmentSource=u,t.makeNode=function(r){return a.makeNode(["beams"],0,[e.Shader[0](i)],[e.Shader[0](u)],0,0,0,0,0,[r],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[2],0,[1],0)}},function(r,t,n){"use strict";var e=n(3),a=n(6),i=n(19),u=n(23),o=n(4),c=n(1);function f(r){var t=r[4],n=r[1];return t?0!==n?"\n        precision mediump float;\n        attribute vec2 position;\n        uniform mat3 model;\n        uniform mat3 layout;\n        uniform mat3 texTrans;\n        varying vec2 vPosition;\n        varying vec3 vScreenPos;\n        void main() {\n            vec3 toModel = vec3(position, 1.0) * model;\n            vec2 pos = (vec3(toModel.xy, 1.0) * layout).xy;\n            vScreenPos = vec3(pos, 0.0);\n            vPosition = position;\n            // texTrans\n            pos = (vec3(position, 1.0) * texTrans).xy;\n            gl_Position = vec4(pos, 0.0, 1.0);\n        }\n    ":"\n        precision mediump float;\n        attribute vec2 position;\n        uniform mat3 model;\n        uniform mat3 layout;\n        uniform mat3 texTrans;\n        varying vec2 vPosition;\n        varying vec3 vScreenPos;\n        void main() {\n            vec3 toModel = vec3(position, 1.0) * model;\n            vPosition = position;\n            // Not sure what makes sense here, it's a bit\n            // of a mess. This is what is needed for the\n            // side elements though\n            vec2 pos = (vec3(toModel.xy, 1.0) * layout).xy;\n            vScreenPos = vec3((vec3(position, 1.0) * layout).xy, 0.0);\n            pos = (vec3(toModel.xy, 1.0) * texTrans).xy;\n            gl_Position = vec4(pos, 0.0, 1.0);\n        }\n    ":0!==n?"\n        precision mediump float;\n        attribute vec2 position;\n        uniform mat3 layout;\n        uniform mat3 texTrans;\n        varying vec2 vPosition;\n        varying vec3 vScreenPos;\n        void main() {\n            vPosition = (position + vec2(1.0, -1.0)) * vec2(0.5, -0.5);\n            vec2 pos = (vec3(position, 1.0) * layout).xy;\n            vScreenPos = vec3(pos, 0.0);\n            // texTrans\n            pos = (vec3(position, 1.0) * texTrans).xy;\n            gl_Position = vec4(pos, 0.0, 1.0);\n        }\n    ":"\n        precision mediump float;\n        attribute vec2 position;\n        uniform mat3 layout;\n        uniform mat3 texTrans;\n        varying vec2 vPosition;\n        varying vec3 vScreenPos;\n        void main() {\n            vPosition = position;\n            vec2 pos = (vec3(position, 1.0) * layout).xy;\n            vScreenPos = vec3(pos, 0.0);\n            // texTrans\n            pos = (vec3(pos, 1.0) * texTrans).xy;\n            gl_Position = vec4(pos, 0.0, 1.0);\n        }\n    "}function s(r){var t,n=r[4],e=r[1],a=n||0!==e?"vPosition":c.failwith("ByModel fragCoords requested, but no model provided"),o=r[5];t="number"==typeof o?["","color"]:o.tag?["uniform vec3 uColor;\n","mix(color, uColor, "+c.string_of_float(r[6])+")"]:["","mix(color, "+i.toGlsl(o[0])+", "+c.string_of_float(r[6])+")"];var f,s=r[9],_=r[8];if(s){var l=s[0];f=_?"(pixelEye.z - dist < "+c.string_of_float(l)+") ? 0.0 : "+c.string_of_float(_[0]):"(pixelEye.z - dist < "+c.string_of_float(l)+") ? 0.0 : 1.0"}else f=_?c.string_of_float(_[0]):"1.0";var m=u.ProgramLight[5](r[10]),v=u.ProgramLight[6](r[10]);return"\n        precision mediump float;\n        varying vec2 vPosition;\n        varying vec3 vScreenPos;\n\n        "+t[0]+"\n\n        float epsilon = 0.00005;\n        float minDist = 1.0;\n        float maxDist = 5.0;\n        const int marchingSteps = 30;\n\n        "+m+"\n\n        vec3 screenP;\n        vec3 localP;\n\n        "+v+"\n\n        float sdfDist(vec3 point) {\n            "+r[0]+"\n        }\n\n        vec3 estimateNormal(vec3 point) {\n            return normalize(vec3(\n                sdfDist(vec3(point.x + epsilon, point.y, point.z)) - sdfDist(vec3(point.x - epsilon, point.y, point.z)),\n                sdfDist(vec3(point.x, point.y + epsilon, point.z)) - sdfDist(vec3(point.x, point.y - epsilon, point.z)),\n                sdfDist(vec3(point.x, point.y, point.z + epsilon)) - sdfDist(vec3(point.x, point.y, point.z - epsilon))\n            ));\n        }\n\n        float shortestDistance(vec3 eye, vec3 dir) {\n            float depth = minDist;\n            float end = maxDist;\n            for (int i = 0; i < marchingSteps; i++) {\n                float dist = sdfDist(eye + depth * dir);\n                if (dist < epsilon) {\n                    return depth;\n                }\n                depth += dist;\n                if (depth >= end) {\n                    /* Moved beyond end */\n                    return end;\n                }\n            }\n            return end;\n        }\n\n        void main() {\n            vec2 viewport = vec2(1.0, 1.0);\n            vec2 fragCoord = "+a+";\n            vec3 eye = vec3(0.0, 0.0, 5.0);\n            vec3 pixelEye = vec3(fragCoord, 4.0);\n            float dist = shortestDistance(pixelEye, vec3(0.0, 0.0, -1.0));\n            // All points should hit a shape in this shader\n            localP = pixelEye + dist * vec3(0.0, 0.0, -1.0);\n            vec3 color = vec3(0.6, 0.6, 0.6);\n            vec3 N = estimateNormal(localP);\n            // todo: Adjust estimateNormal?\n            N.y = N.y * -1.0;\n            screenP = vec3(vScreenPos.xy, localP.z);\n            float light = (lighting(N)).x;\n            color = color * light;\n            float alpha = "+f+";\n            gl_FragColor = vec4("+t[1]+", alpha);\n        }\n    "}t.makeVertexSource=f,t.makeFragmentSource=s,t.make=function(r,t,n,e,a,i,u,o,c,f,s,_){return[r,t,a?a[0]:1,i?i[0]:1,n,u?u[0]:0,o?o[0]:.4,c,f,s,e]},t.makeProgram=function(r){var t,n=r[4]?[["model",5],0]:0,a=r[5];return t="number"!=typeof a&&a.tag?[["uColor",3],n]:n,o.makeProgram(e.Shader[0](f(r)),e.Shader[0](s(r)),0,[t],0,0,e.VertexBuffer[3](0),0,0,0,0,0,0,0)},t.makeHash=function(r){var t,n=r[4]?1:0,e=r[5];return t="number"==typeof e?0:e.tag?[0]:[[e[0]]],[r[1],n,t,r[6],r[9],r[8],u.ProgramLight[0](r[10])]},t.makeNode=function(r,t,n,i,u,c,_,l,m){var v,d=n?n[0]:"sdfNode",g=_?_[0]:0,h=r[8],y=r[9]?1:h?+(h[0]<1):0,p=r[4],b=p?[["model",p[0]],0]:0,w=r[5];v="number"!=typeof w&&w.tag?[["uColor",w[0]],b]:b;var x=i?a.__(3,[i[0]]):a.__(0,[a.__(0,[r[2]]),a.__(0,[r[3]])]),k=r[7]?1:0,M=l?[0,0,[l[0]]]:[[e.Shader[0](f(r))],[e.Shader[0](s(r))],0];return o.makeNode(t,[d],M[0],M[1],M[2],0,[g],0,0,r[7],[v],0,0,0,0,0,[x],0,0,0,c,0,0,0,0,0,0,0,[y],0,[k],0,0,u,[1],[k],0)}},function(r,t,n){"use strict";var e=n(8),a=n(6),i=n(0),u=n(41),o=n(7),c=n(1);t.loadFiles=function(r,t){var n=e.length(r),f=[0],s=o.caml_make_vect(n,0);return e.iteri(function(r,e){switch(0|e.tag){case 0:var _=new XMLHttpRequest;return _.responseType="arraybuffer",_.open("GET","assets/"+e[0],!0),_.onreadystatechange=function(){return 4!==_.readyState||200!==_.status&&0!==_.status?0:(o.caml_array_set(s,r,a.__(1,[new Uint8Array(_.response)])),f[0]=f[0]+1|0,f[0]===n?i._1(t,s):0)},_.send(null),0;case 1:return u.Gl[29]("assets/"+e[0],0,function(e){return e?(o.caml_array_set(s,r,a.__(0,[e[0]])),f[0]=f[0]+1|0,f[0]===n?i._1(t,s):0):c.failwith("Could not load image")},0);case 2:return i._2(u.Gl[1][0],"assets/"+e[0],function(e){return o.caml_array_set(s,r,a.__(2,[e])),f[0]=f[0]+1|0,f[0]===n?i._1(t,s):0})}},r)}},function(r,t,n){"use strict";var e=n(6),a=n(0),i=n(76),u=n(7),o=n(1);t.request=function(r,t,n){return i.loadFiles([e.__(0,["fonts/"+r+".bin"]),[e.__(1,["fonts/"+r+"_"+t+".png"]),0]],function(r){var t=u.caml_array_get(r,0),e=u.caml_array_get(r,1);return"number"==typeof t||1!==t.tag||"number"==typeof e||e.tag?o.failwith("Font loading failed"):a._1(n,[t[0],e[0]])})}},function(r,t,n){"use strict";var e=n(34),a=n(8),i=n(20),u=n(7),o=n(9),c=n(1),f=u.caml_array_get;function s(r,t,n){for(var a="",o=t;;){var c=o,f=a,s=i.make(1,e.chr(u.caml_array_get(r,c)));if(!((c+1|0)<n))return f+s;o=c+1|0,a=f+s}}t.fromBase64=function(r){var t=r.length;t%4>0&&c.failwith("Invalid base64 string.");var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=u.caml_make_vect(n.length,32),a=[0];i.iteri(function(r,t){return u.caml_array_set(e,r,t),t>a[0]?(a[0]=t,0):0},n),45>a[0]&&(a[0]=45),95>a[0]&&(a[0]=95);var f=u.caml_make_vect(a[0],0);i.iteri(function(r,t){return u.caml_array_set(f,t,r)},n),u.caml_array_set(f,45,62),u.caml_array_set(f,95,63);var s=61===u.caml_array_get(r,t-2|0)?2:61===u.caml_array_get(r,t-1|0)?1:0,_=u.caml_make_vect((o.imul(t,3)/4|0)-s|0,0),l=0!=+(s>0)?t-4|0:t,m=function(t,n){for(;;){var e=n,a=t,i=u.caml_array_get(f,u.caml_array_get(r,a))<<18|u.caml_array_get(f,u.caml_array_get(r,a+1|0))<<12|u.caml_array_get(f,u.caml_array_get(r,a+2|0))<<6|u.caml_array_get(f,u.caml_array_get(r,a+3|0));if(u.caml_array_set(_,e,i>>16&255),u.caml_array_set(_,e+1|0,i>>8&255),u.caml_array_set(_,e+2|0,255&i),!((a+4|0)<l))return[a,e];n=e+3|0,t=a+4|0}}(0,0),v=m[1],d=m[0];if(2===s){var g=u.caml_array_get(f,u.caml_array_get(r,d))<<2|u.caml_array_get(f,u.caml_array_get(r,d+1|0))>>4;u.caml_array_set(_,v,255&g)}else if(1===s){var h=u.caml_array_get(f,u.caml_array_get(r,d))<<10|u.caml_array_get(f,u.caml_array_get(r,d+1|0))<<4|u.caml_array_get(f,u.caml_array_get(r,d+2|0))>>2;u.caml_array_set(_,v,h>>8&255),u.caml_array_set(_,v+1|0,255&h)}return _},t.readUInt32LE=function(r,t){return(u.caml_array_get(r,t)|u.caml_array_get(r,t+1|0)<<8|u.caml_array_get(r,t+2|0)<<16)+(u.caml_array_get(r,t+3|0)<<24)|0},t.readInt32LE=function(r,t){return u.caml_array_get(r,t)|u.caml_array_get(r,t+1|0)<<8|u.caml_array_get(r,t+2|0)<<16|u.caml_array_get(r,t+3|0)<<24},t.readUInt16LE=function(r,t){return u.caml_array_get(r,t)|u.caml_array_get(r,t+1|0)<<8},t.readInt16LE=function(r,t){var n=u.caml_array_get(r,t)|u.caml_array_get(r,t+1|0)<<8;return 32768&n?-65536|n:n},t.readUInt8=f,t.readInt8=function(r,t){var n=u.caml_array_get(r,t);return 128&n?o.imul(1+(255-n|0)|0,-1):n},t.utf8Slice=function(r,t,n){return a.fold_right(function(r,t){return t+i.make(1,e.chr(r))},function(t,e){for(;;){var a=e,i=t;if(i>=n)return a;var o=u.caml_array_get(r,i),c=-1,f=o>239?4:o>223?3:o>191?2:1;if((i+f|0)<=n){var s=f-1|0;if(!(s>3||s<0))switch(s){case 0:o<128&&(c=o);break;case 1:var _=u.caml_array_get(r,i+1|0);if(128==(192&_)){var l=(31&o)<<6|63&_;l>127&&(c=l)}break;case 2:var m=u.caml_array_get(r,i+1|0),v=u.caml_array_get(r,i+2|0);if(128==(192&m)&&128==(192&v)){var d=(15&o)<<12|(63&m)<<6|63&v;d>2047&&(d<55296||d>57343)&&(c=d)}break;case 3:var g=u.caml_array_get(r,i+1|0),h=u.caml_array_get(r,i+2|0),y=u.caml_array_get(r,i+3|0);if(128==(192&g)&&128==(12&h)&&128==(192&y)){var p=(15&o)<<18|(63&g)<<12|(63&h)<<6|63&y;p>65535&&p<1114112&&(c=p)}}}-1!==c?(e=[(c=c-65536|0)>>>10&1023|55296,[1023&(56320|c),a]],t=i+f|0):(e=[c=65533,a],t=i+1|0)}}(t,0),"")},t.readStringSlice=s,t.readStringNT=function(r,t){for(var n=t,e=r.length;n<e&&0!==u.caml_array_get(r,n);)n=n+1|0;return s(r,t,n)}},function(r,t,n){"use strict";var e=n(22),a=n(0),i=n(7),u=[0];function o(r,t){if(u){var n=u[0];r[0]=e.init(t,function(t){return t<r[1]?i.caml_array_get(r[0],t):n})}else r[0]=e.init(t,function(t){return t<r[1]?i.caml_array_get(r[0],t):0});return r[1]=t,0}var c=[u,function(r){return[u?i.caml_make_vect(r,u[0]):e.init(r,function(){return 0}),r,0]},o,function(r,t){return r[1]<t?o(r,t+(t/4|0)|0):0},function(r,t){return r[2]>=r[1]&&o(r,r[1]<<1),i.caml_array_set(r[0],r[2],t),r[2]=r[2]+1|0,0},function(r,t,n){return(r[2]+2|0)>r[1]&&o(r,r[1]<<1),i.caml_array_set(r[0],r[2],t),i.caml_array_set(r[0],r[2]+1|0,n),r[2]=r[2]+2|0,0},function(r,t,n,e){return(r[2]+3|0)>r[1]&&o(r,r[1]<<1),i.caml_array_set(r[0],r[2],t),i.caml_array_set(r[0],r[2]+1|0,n),i.caml_array_set(r[0],r[2]+2|0,e),r[2]=r[2]+3|0,0},function(r,t,n,e,a){return(r[2]+4|0)>r[1]&&o(r,r[1]<<1),i.caml_array_set(r[0],r[2],t),i.caml_array_set(r[0],r[2]+1|0,n),i.caml_array_set(r[0],r[2]+2|0,e),i.caml_array_set(r[0],r[2]+3|0,a),r[2]=r[2]+4|0,0},function(r){return e.sub(r[0],0,r[2])}];t.Make=function(r){var t=r[1]?[a._1(r[0],0)]:0,n=function(n,u){if(t){var o=t[0];n[0]=e.init(u,function(r){return r<n[1]?i.caml_array_get(n[0],r):o})}else n[0]=e.init(u,function(t){return t<n[1]?i.caml_array_get(n[0],t):a._1(r[0],0)});return n[1]=u,0};return[t,function(n){return[t?i.caml_make_vect(n,t[0]):e.init(n,function(){return a._1(r[0],0)}),n,0]},n,function(r,t){return r[1]<t?n(r,t+(t/4|0)|0):0},function(r,t){return r[2]>=r[1]&&n(r,r[1]<<1),i.caml_array_set(r[0],r[2],t),r[2]=r[2]+1|0,0},function(r,t,e){return(r[2]+2|0)>r[1]&&n(r,r[1]<<1),i.caml_array_set(r[0],r[2],t),i.caml_array_set(r[0],r[2]+1|0,e),r[2]=r[2]+2|0,0},function(r,t,e,a){return(r[2]+3|0)>r[1]&&n(r,r[1]<<1),i.caml_array_set(r[0],r[2],t),i.caml_array_set(r[0],r[2]+1|0,e),i.caml_array_set(r[0],r[2]+2|0,a),r[2]=r[2]+3|0,0},function(r,t,e,a,u){return(r[2]+4|0)>r[1]&&n(r,r[1]<<1),i.caml_array_set(r[0],r[2],t),i.caml_array_set(r[0],r[2]+1|0,e),i.caml_array_set(r[0],r[2]+2|0,a),i.caml_array_set(r[0],r[2]+3|0,u),r[2]=r[2]+4|0,0},function(r){return e.sub(r[0],0,r[2])}]},t.ArrayBInt=c},function(r,t,n){"use strict";var e=n(3),a=n(13),i=n(8),u=n(6),o=n(19),c=n(0),f=n(4),s=n(20),_=n(47),l=n(45),m=n(9),v=n(1),d=n(37);function g(r){var t=r[9]?["attribute vec3 color;\n","varying vec3 vColor;\n","vColor = color;\n"]:["","",""];return"\n    precision mediump float;\n    attribute vec2 position;\n    attribute vec2 uv;\n    "+t[0]+"\n    attribute float size;\n\n    uniform mat3 model;\n    uniform mat3 layout;\n    uniform vec2 pixelSize;\n\n    varying vec2 vUv;\n    varying float smoothFactor;\n    "+t[1]+"\n\n    void main() {\n        vUv = uv;\n      "+t[2]+"\n        // Bit trying and failing to get this somewhat right\n        // Can probably be calibrated better\n        smoothFactor = model[0][0] / pixelSize.x / size * 600.0;\n        vec2 pos = vec3(vec3(position, 1.0) * model * layout).xy;\n        gl_Position = vec4(pos, 0.0, 1.0);\n    }\n  "}function h(r){var t=r[9]?["varying vec3 vColor;\n","","vColor"]:["","uniform vec3 color;\n","color"];return"\n    #ifdef GL_OES_standard_derivatives\n    #extension GL_OES_standard_derivatives : enable\n    #endif\n    precision mediump float;\n    uniform sampler2D map;\n    "+t[1]+"\n    uniform float opacity;\n    varying vec2 vUv;\n    "+t[0]+"\n    varying float smoothFactor;\n\n    float aastep(float value) {\n      #ifdef GL_OES_standard_derivatives\n        float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;\n      #else\n        float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));\n      #endif\n      afwidth = afwidth * smoothFactor;\n      return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);\n    }\n\n    void main() {\n        float discardLimit = 0.0001;\n        vec4 texColor = 1.0 - texture2D(map, vUv);\n        float alpha = aastep(texColor.x);\n        vec3 c = "+t[2]+" * alpha;\n        gl_FragColor = vec4(c, opacity * alpha);\n        if (alpha < discardLimit) {\n            discard;\n        }\n    }\n  "}var y=s.trim("#version 300 es\n    precision mediump float;\n    attribute vec2 position;\n    attribute vec2 uv;\n    varying vec2 vUv;\n\n    //uniform mat3 model;\n\n    void main() {\n        vUv = uv;\n        //vec2 pos = vec3(model * vec3(position, 1.0)).xy;\n        vec2 pos = position;\n        gl_Position = vec4((pos - vec2(40.0, 0.0)) / 50., 0.0, 1.0);\n    }\n"),p=s.trim("#version 300 es\n    #ifdef GL_OES_standard_derivatives\n    #extension GL_OES_standard_derivatives : enable\n    #endif\n    precision mediump float;\n    uniform sampler2D map;\n    varying vec2 vUv;\n\n    float median(float r, float g, float b) {\n        return max(min(r, g), min(max(r, g), b));\n    }\n\n    void main() {\n        float opacity = 0.5;\n        vec3 color = vec3(0.2, 0.5, 0.8);\n        vec3 sample = 1.0 - texture2D(map, vUv).rgb;\n        float sigDist = median(sample.r, sample.g, sample.b) - 0.5;\n        float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);\n        gl_FragColor = vec4(color.xyz, alpha * opacity);\n    }\n"),b=[function(r){return[r[9]]},function(r){var t=0!==r[9]?[["model",5],[["opacity",0],0]]:[["model",5],[["color",3],[["opacity",0],0]]],n=r[9]?[e.VertexAttrib[0]("position",2),[e.VertexAttrib[0]("uv",2),[e.VertexAttrib[0]("size",0),[e.VertexAttrib[0]("color",3),0]]]]:[e.VertexAttrib[0]("position",2),[e.VertexAttrib[0]("uv",2),[e.VertexAttrib[0]("size",0),0]]];return f.makeProgram(e.Shader[0](g(r)),e.Shader[0](h(r)),0,[t],0,[[["map",0],0]],n,0,0,0,0,0,0,0)},2],w=d.Make(b);function x(r,t,n,a){var u=n?n[0]:.5,o=_.getPartInfo(r),c=i.map(function(r){return l.getTexture(t[0],r)},o[0]),s=0!=+(i.length(o[1])>1)?1:0,m=s?[["position",2],[["uv",2],[["size",0],[["color",3],0]]]]:[["position",2],[["uv",2],[["size",0],0]]],v=e.VertexBuffer[0]([],m,1),d=e.IndexBuffer[0]([],1),g=1/u;return[r,o,v,d,f.UMat3f[0](0),f.SceneVO[0](v,[d]),c,g,t,s]}function k(r,t,n,e,a,i,u,c){var f=e?e[0]:.2,s=a?a[0]:1,l=i?i[0]:0,m=u?u[0]:o.fromFloats(1,1,1);return x(_.block([l],0,[t],[f],[m],0,0,0,[_.text(r),0]),n,[f*s])}function M(r,t){return t[16]=1,l.requestMultiple(r[8][0],r[1][0],function(){var n=_.FontLayout[7](r[8],r[0],r[9]),i=n[0];e.VertexBuffer[6](r[2],i);var u=0!==r[9]?_.FontLayout[2]:_.FontLayout[1];e.IndexBuffer[4](r[3],e.IndexBuffer[2](m.div(i.length,u)));var o=-.5*n[1],c=a.Mat3[3](a.Mat3[4](1,r[7]),a.Mat3[5](0,o));return e.Uniform[10](r[4][1],c),t[16]=0,0})}function C(r,t,n,e,a,s,_){var l,m=n?n[0]:"fontDraw",d=e?e[0]:1,g=a?a[0]:0;if(0!==r[9])l=[["model",r[4]],[["opacity",f.UFloat[0](d)],0]];else{var h=r[1][1],y=h&&!h[1]?h[0]:v.failwith("Could not find font color");l=[["model",r[4]],[["color",f.UVec3f[3](o.toVec3(y))],[["opacity",f.UFloat[0](d)],0]]]}var p=i.mapi(function(r,t){return r?["map"+v.string_of_int(r+1|0),f.SceneTex[1](0,0,t)]:["map",f.SceneTex[1](0,0,t)]},r[6]),b=f.makeNode(t,[m],0,0,[c._1(w[1],r)],0,0,[p],0,[r[5]],[l],0,[1],0,0,0,[u.__(3,[r[7]])],0,0,0,s,0,0,0,0,0,0,[1],[1],0,0,[g],0,0,0,0,0);return M(r,b),b}t.vertexSource=g,t.fragmentSource=h,t.msdfVertexSource=y,t.msdfFragmentSource=p,t.StoreSpec=b,t.Programs=w,t.makeText=x,t.makeSimpleText=k,t.updateNode=M,t.makeNode=C,t.makePartNode=function(r,t,n,e,a,i,u,o,c){var f=n?n[0]:.5,s=i?i[0]:1,_=u?u[0]:0;return C(x(r,t,[f]),e,a,[s],[_],o)},t.makeSimpleNode=function(r,t,n,e,a,i,u,c,f,s,_,l){var m=e?e[0]:.2,v=a?a[0]:1,d=i?i[0]:0,g=u?u[0]:o.fromFloats(1,1,1),h=s?s[0]:1,y=_?_[0]:0;return C(k(r,t,n,[m],[v],[d],[g]),c,f,[h],[y],0)}},function(r,t,n){"use strict";var e=n(13),a=n(0),i=n(4),u=4*Math.atan(1),o=u/2;function c(r,t){switch(r){case 0:return function(r){return r/t};case 1:return function(r){return Math.sin(r/t*o)};case 2:return function(r){return Math.sin(r/t*o-o)+1};case 3:return function(r){return.5*Math.sin(r/t*u-o)+.5}}}t.pi=u,t.halfPi=o,t.getEasingFunction=c,t.anim=function(r,t,n,u,o,f,s,_,l){var m,v=u?u[0]:1,d=o?o[0]:2,g=f?f[0]:1,h=c(v,d);switch(0|t.tag){case 0:var y=t[1],p=t[0],b=y-p;if(r.tag){var w=r[1],x=r[0];m=[function(r,t){return i.setUniformFloat(r,x,w,p+b*a._1(h,t[5]))},function(r){return i.setUniformFloat(r,x,w,y)}]}else{var k=r[0];m=[function(r,t){return i.UFloat[3](r,k,p+b*a._1(h,t[5]))},function(r){return i.UFloat[3](r,k,y)}]}break;case 1:var M=t[1],C=t[0],S=e.Vec2[2](C),P=e.Vec2[3](C),A=e.Vec2[2](M)-S,T=e.Vec2[3](M)-P;if(r.tag){var D=r[1],L=r[0];m=[function(r,t){var n=a._1(h,t[5]);return i.setUniformVec2f(r,L,D,e.Vec2[5](S+A*n,P+T*n))},function(r){return i.setUniformVec2f(r,L,D,M)}]}else{var N=r[0];m=[function(r,t){var n=a._1(h,t[5]);return i.UVec2f[3](r,N,e.Vec2[5](S+A*n,P+T*n))},function(r){return i.UVec2f[3](r,N,M)}]}break;case 2:var U=t[1],V=t[0],z=e.Vec3[4](V),B=e.Vec3[5](V),E=e.Vec3[6](V),F=e.Vec3[4](U)-z,I=e.Vec3[5](U)-B,q=e.Vec3[6](U)-E;if(r.tag){var R=r[1],G=r[0];m=[function(r,t){var n=a._1(h,t[5]);return i.setUniformVec3f(r,G,R,e.Vec3[1](z+F*n,B+I*n,E+q*n))},function(r){return i.setUniformVec3f(r,G,R,U)}]}else{var O=r[0];m=[function(r,t){var n=a._1(h,t[5]);return i.UVec3f[4](r,O,e.Vec3[1](z+F*n,B+I*n,E+q*n))},function(r){return i.UVec3f[4](r,O,U)}]}}return i.makeAnim(m[0],m[1],d,n,s,[g],_,0)}},function(r,t,n){"use strict";var e=n(3),a=n(6),i=n(0),u=n(23),o=n(4);function c(r){return"\n        precision mediump float;\n        varying vec3 localP;\n        varying vec3 screenP;\n        varying vec3 vNormal;\n        "+u.ProgramLight[5](r)+"\n\n        "+u.ProgramLight[6](r)+"\n\n        void main() {\n            vec3 color = lighting(vNormal);\n            gl_FragColor = vec4(color, 0.2);\n        }\n    "}var f=[function(r){return[u.ProgramLight[0](r)]},function(r){var t=c(r);return o.makeProgram(e.Shader[0]("\n        precision mediump float;\n        attribute vec3 position;\n        attribute vec3 normal;\n        uniform mat3 layout;\n        varying vec3 localP;\n        varying vec3 screenP;\n        varying vec3 vNormal;\n        void main() {\n            // Z currently not affected by layout\n            vec3 pos2 = vec3((vec3(position.xy, 1.0) * layout).xy, position.z);\n            localP = position;\n            screenP = pos2;\n            vNormal = normal;\n            gl_Position = vec4(pos2, 1.0);\n        }\n    "),e.Shader[0](t),[u.ProgramLight[3](r)],0,0,0,[e.VertexAttrib[0]("position",3),[e.VertexAttrib[0]("normal",3),0]],0,0,0,0,0,0,0)},3],s=n(37).Make(f);t.vertSource=function(){return"\n        precision mediump float;\n        attribute vec3 position;\n        attribute vec3 normal;\n        uniform mat3 layout;\n        varying vec3 localP;\n        varying vec3 screenP;\n        varying vec3 vNormal;\n        void main() {\n            // Z currently not affected by layout\n            vec3 pos2 = vec3((vec3(position.xy, 1.0) * layout).xy, position.z);\n            localP = position;\n            screenP = pos2;\n            vNormal = normal;\n            gl_Position = vec4(pos2, 1.0);\n        }\n    "},t.fragSource=c,t.StoreSpec=f,t.Programs=s,t.make=function(r,t,n,e){var c=t?t[0]:a.__(0,[a.__(0,[1]),a.__(0,[1])]);return o.makeNode(0,["node3d"],0,0,[i._1(s[1],n)],0,0,0,0,[r],[u.ProgramLight[3](n)],0,0,0,0,0,[c],0,0,0,0,0,0,0,0,0,0,0,[1],0,0,0,0,0,0,0,0)}},function(r,t,n){"use strict";var e=n(6),a=n(4);t.vertical=function(r,t,n,i,u,o,c,f,s,_,l,m){var v=t?t[0]:"verticalLayout",d=n?n[0]:e.__(3,[1]),g=c?c[0]:0,h=f?f[0]:0,y=s?s[0]:1;return a.makeNode(r,[v],0,0,0,0,[m],0,0,0,0,0,0,0,0,0,[d],_,l,o,u,[1],i,[h],[y],0,[0],0,0,0,0,[g],0,0,0,0,0)},t.horizontal=function(r,t,n,i,u,o,c,f,s,_,l,m){var v=t?t[0]:"horizontalLayout",d=n?n[0]:e.__(3,[1]),g=c?c[0]:0,h=f?f[0]:1,y=s?s[0]:0;return a.makeNode(r,[v],0,0,0,0,[m],0,0,0,0,0,0,0,0,0,[d],_,l,o,u,[0],i,[h],[y],0,[0],0,0,0,0,[g],0,0,0,0,0)},t.stacked=function(r,t,n,i,u,o,c,f,s,_,l,m){var v=t?t[0]:"stackedLayout",d=n?n[0]:e.__(3,[1]),g=o?o[0]:0,h=c?c[0]:0,y=f?f[0]:1;return a.makeNode(r,[v],0,0,0,0,[m],0,0,0,0,0,0,0,0,0,[d],s,_,u,l,[2],i,[h],[y],0,[0],0,0,0,0,[g],0,0,0,0,0)}},function(r,t,n){"use strict";var e=n(3),a=n(13),i=n(4),u=n(7);function o(r,t,n){var e=a.Vec3[1](t[0]-r[0],t[1]-r[1],t[2]-r[2]),i=a.Vec3[1](n[0]-r[0],n[1]-r[1],n[2]-r[2]);return a.Vec3[11](a.Vec3[13](e,i))}var c=[function(r,t,n){return[r,t,n]},o];function f(r,t,n,e){return[r,t,n,e]}function s(r){return o(r[0],r[1],r[3])}var _=[f,function(r,t,n,e,a){return f([r,t-e,a],[r+n,t-e,a],[r+n,t,a],[r,t,a])},s];function l(r){var t=r[1],n=r[0],e=s(t),a=s(t),i=o(t[1],n[1],t[2]),c=o(t[0],n[0],t[1]),f=o(t[3],n[3],t[0]),_=o(t[2],n[2],t[3]);return[t[0][0],t[0][1],t[0][2],u.caml_array_get(e,0),u.caml_array_get(e,1),u.caml_array_get(e,2),t[1][0],t[1][1],t[1][2],u.caml_array_get(e,0),u.caml_array_get(e,1),u.caml_array_get(e,2),t[2][0],t[2][1],t[2][2],u.caml_array_get(e,0),u.caml_array_get(e,1),u.caml_array_get(e,2),t[3][0],t[3][1],t[3][2],u.caml_array_get(e,0),u.caml_array_get(e,1),u.caml_array_get(e,2),t[1][0],t[1][1],t[1][2],u.caml_array_get(i,0),u.caml_array_get(i,1),u.caml_array_get(i,2),n[1][0],n[1][1],n[1][2],u.caml_array_get(i,0),u.caml_array_get(i,1),u.caml_array_get(i,2),n[2][0],n[2][1],n[2][2],u.caml_array_get(i,0),u.caml_array_get(i,1),u.caml_array_get(i,2),t[2][0],t[2][1],t[2][2],u.caml_array_get(i,0),u.caml_array_get(i,1),u.caml_array_get(i,2),n[0][0],n[0][1],n[0][2],u.caml_array_get(c,0),u.caml_array_get(c,1),u.caml_array_get(c,2),n[1][0],n[1][1],n[1][2],u.caml_array_get(c,0),u.caml_array_get(c,1),u.caml_array_get(c,2),t[1][0],t[1][1],t[1][2],u.caml_array_get(c,0),u.caml_array_get(c,1),u.caml_array_get(c,2),t[0][0],t[0][1],t[0][2],u.caml_array_get(c,0),u.caml_array_get(c,1),u.caml_array_get(c,2),n[0][0],n[0][1],n[0][2],u.caml_array_get(f,0),u.caml_array_get(f,1),u.caml_array_get(f,2),t[0][0],t[0][1],t[0][2],u.caml_array_get(f,0),u.caml_array_get(f,1),u.caml_array_get(f,2),t[3][0],t[3][1],t[3][2],u.caml_array_get(f,0),u.caml_array_get(f,1),u.caml_array_get(f,2),n[3][0],n[3][1],n[3][2],u.caml_array_get(f,0),u.caml_array_get(f,1),u.caml_array_get(f,2),n[2][0],n[2][1],n[2][2],u.caml_array_get(_,0),u.caml_array_get(_,1),u.caml_array_get(_,2),n[3][0],n[3][1],n[3][2],u.caml_array_get(_,0),u.caml_array_get(_,1),u.caml_array_get(_,2),t[3][0],t[3][1],t[3][2],u.caml_array_get(_,0),u.caml_array_get(_,1),u.caml_array_get(_,2),t[2][0],t[2][1],t[2][2],u.caml_array_get(_,0),u.caml_array_get(_,1),u.caml_array_get(_,2),n[0][0],n[0][1],n[0][2],u.caml_array_get(a,0),u.caml_array_get(a,1),u.caml_array_get(a,2),n[3][0],n[3][1],n[3][2],u.caml_array_get(a,0),u.caml_array_get(a,1),u.caml_array_get(a,2),n[2][0],n[2][1],n[2][2],u.caml_array_get(a,0),u.caml_array_get(a,1),u.caml_array_get(a,2),n[1][0],n[1][1],n[1][2],u.caml_array_get(a,0),u.caml_array_get(a,1),u.caml_array_get(a,2)]}var m=[function(r,t){return[r,t]},l,function(r,t,n){var a=t?t[0]:0,u=e.VertexBuffer[0](l(r),[["position",3],[["normal",3],0]],a),o=e.IndexBuffer[0](e.IndexBuffer[2](6),a);return i.SVertexObject[0](u,[o])}];t.Point=c,t.Quad=_,t.AreaBetweenQuads=m},function(r,t,n){"use strict";var e=n(3),a=n(4),i="\n    precision mediump float;\n    attribute vec2 position;\n    uniform mat3 translation;\n    uniform mat3 layout;\n    uniform mat3 sdfTilesMat;\n    varying vec2 vPosition;\n    varying vec2 vTexPos;\n    void main() {\n        vPosition = (vec3(position, 1.0) * translation).xy;\n        vec3 transformed = vec3(vPosition, 1.0) * layout;\n        vTexPos = (vec3(vPosition, 1.0) * sdfTilesMat).xy;\n        gl_Position = vec4(transformed.xy, 0.0, 1.0);\n    }\n",u="\n    precision mediump float;\n    varying vec2 vPosition;\n    varying vec2 vTexPos;\n\n    uniform vec3 elColor;\n    uniform sampler2D sdfTiles;\n\n    void main() {\n        vec3 sdfColor = texture2D(sdfTiles, vTexPos).xyz;\n        gl_FragColor = vec4(mix(elColor, sdfColor, 0.4), 1.0);\n    }\n";t.currElVertex=i,t.currElFragment=u,t.makeNode=function(r,t){return a.makeNode(["currEl"],0,[e.Shader[0](i)],[e.Shader[0](u)],0,0,0,[[["sdfTiles",a.SceneTex[0](0,0,t)],0]],0,[r[0]],[[["elColor",r[3]],[["translation",r[1]],0]]],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[1],0,0,0,0,0,0)}},function(r,t,n){"use strict";var e=n(3),a=n(13),i=n(6),u=n(1),o="\n    precision mediump float;\n    attribute vec2 position;\n    uniform mat3 layout;\n    void main() {\n        vec2 pos = (vec3(position, 1.0) * layout).xy;\n        gl_Position = vec4(pos, 0.0, 1.0);\n    }\n",c="\n    precision mediump float;\n    uniform float elapsed;\n    const float stepSize = 5.0;\n    void main() {\n        float stepMod = mod(elapsed, stepSize * 3.0);\n        float r = smoothstep(0.0, stepSize, stepMod);\n        float g = smoothstep(stepSize, stepSize * 2.0, stepMod);\n        float b = smoothstep(stepSize * 2.0, stepSize * 3.0, stepMod);\n        gl_FragColor = vec4(r, g, b, 0.1);\n    }\n";t.vertexSource=o,t.fragmentSource=c,t.make=function(r){var t=i.__(5,[[a.Mat3[7](0)]]),n=i.__(0,[[0]]),f=e.Program[0](e.Shader[0](o),e.Shader[0](c),e.VertexBuffer[3](0),[e.Uniform[2]("layout",t),[e.Uniform[2]("elapsed",n),0]]),s=e.Program[3](f,r[0]);return[r,s?s[0]:u.failwith("Could not initialize stencilDraw"),t,n,e.VertexBuffer[8](e.VertexBuffer[4](0,0,0),r[0],r[1]),e.IndexBuffer[6](e.IndexBuffer[1](0),r[0],r[1])]},t.draw=function(r,t,n){return e.Uniform[10](r[2],t),e.Uniform[6](r[3],n),e.Canvas[13](r[0],r[1],r[4],r[5],[])}},function(r,t,n){"use strict";var e=n(3),a=n(1),i="\n    precision mediump float;\n    attribute vec2 position;\n    void main() {\n        gl_Position = vec4(position, 0.0, 1.0);\n    }\n",u="\n    precision mediump float;\n\n    void main() {\n        gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n    }\n";t.vertexSource=i,t.fragmentSource=u,t.make=function(r){var t=e.Program[0](e.Shader[0](i),e.Shader[0](u),e.VertexBuffer[3](0),0),n=e.Program[3](t,r[0]);return[r,n?n[0]:a.failwith("Could not initialize stencilDraw")]},t.draw=function(r,t,n){return e.Canvas[13](r[0],r[1],t,n,[])}},function(r,t,n){"use strict";function e(r,t,n,e){return[r,t,n,e]}var a=[e,function(){return[0,0,0,0]},function(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]?+(r[3]===t[3]):0},function(r,t){return r[0]<=t[0]&&r[1]<=t[1]&&r[0]+r[2]>=t[0]+t[2]?+(r[1]+r[3]>=t[1]+t[3]):0},function(r,t){return t[0]<=r[0]+r[2]&&r[0]<=t[0]+t[2]&&t[1]<=r[1]+r[3]?+(r[1]<=t[1]+t[3]):0},function(r,t){var n=r[0]+r[2],a=r[1]+r[3],i=t[0]+t[2],u=t[1]+t[3],o=0!=+(n>i)?n:i,c=0!=+(a>u)?a:u;return r[0]<t[0]?r[1]<t[1]?e(r[0],r[1],o-r[0],c-r[1]):e(r[0],t[1],o-r[0],c-t[1]):r[1]<t[1]?e(t[0],r[1],o-t[0],c-r[1]):e(t[0],t[1],o-t[0],c-t[1])}];t.Rect=a},function(r,t,n){"use strict";var e=n(3),a=n(10),i=n(4),u="\n    precision mediump float;\n    attribute vec2 position;\n    void main() {\n        gl_Position = vec4(position, 0.0, 1.0);\n    }\n",o="\n    precision mediump float;\n    uniform float anim;\n\n    void main() {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.5 * anim);\n    }\n";t.vertexSource=u,t.fragmentSource=o,t.makeNode=function(){return i.makeNode(["mask"],0,[e.Shader[0](u)],[e.Shader[0](o)],0,0,0,0,0,0,[[["anim",i.UFloat[0](0)],0]],0,0,0,0,0,[a.__(0,[a.__(0,[1]),a.__(0,[1])])],0,0,0,0,0,0,0,0,0,0,0,[1],0,0,[1],0,0,0,0,0)}},function(r,t,n){"use strict";var e=n(27),a=n(14);function i(r,t,n){var i=t[1],u=t[0],o=function(r){return[r[1],a.imul(r[0],-1)]},c=e.map(o,r),f=e.map(o,c),s=e.map(o,f),_=function(r){return[((r[0]-u|0)/2|0)-1|0,((r[1]-i|0)/-2|0)-1|0]};return[e.map(_,r),e.map(_,c),e.map(_,f),e.map(_,s),n]}var u=i([[-3,1],[[-1,1],[[1,1],[[3,1],0]]]],[1,1],2),o=i([[-2,2],[[-2,0],[[0,0],[[2,0],0]]]],[0,0],3),c=i([[-2,0],[[0,0],[[2,0],[[2,2],0]]]],[0,0],4),f=i([[-1,1],[[-1,-1],[[1,1],[[1,-1],0]]]],[1,1],5),s=i([[-2,0],[[0,0],[[0,2],[[2,2],0]]]],[0,0],6),_=i([[-2,0],[[0,0],[[0,2],[[2,0],0]]]],[0,0],7),l=i([[-2,2],[[0,2],[[0,0],[[2,0],0]]]],[0,0],8);t.make=i,t.lineTiles=u,t.leftLTiles=o,t.rightLTiles=c,t.cubeTiles=f,t.rightTurnTiles=s,t.triangleTiles=_,t.leftTurnTiles=l},function(r,t,n){"use strict";var e=n(21),a=n(25),i=n(5);function u(r,t){if(t<0||t>(r.length-20|0))throw[i.invalid_argument,"Marshal.data_size"];return a.not_implemented("caml_marshal_data_size not implemented by bucklescript yet\n")}function o(r,t){if(t<0||t>(r.length-20|0))throw[i.invalid_argument,"Marshal.from_bytes"];var n=a.not_implemented("caml_marshal_data_size not implemented by bucklescript yet\n");if(t>(r.length-(20+n|0)|0))throw[i.invalid_argument,"Marshal.from_bytes"];return a.not_implemented("caml_input_value_from_string not implemented by bucklescript yet\n")}t.to_channel=function(r,t,n){return a.not_implemented("caml_output_value not implemented by bucklescript yet\n")},t.to_buffer=function(r,t,n,e,u){if(t<0||n<0||t>(r.length-n|0))throw[i.invalid_argument,"Marshal.to_buffer: substring out of bounds"];return a.not_implemented("caml_output_value_to_buffer not implemented by bucklescript yet\n")},t.from_channel=function(){return a.not_implemented("caml_input_value not implemented by bucklescript yet\n")},t.from_bytes=o,t.from_string=function(r,t){return o(e.bytes_of_string(r),t)},t.header_size=20,t.data_size=u,t.total_size=function(r,t){return 20+u(r,t)|0}},function(r,t,n){"use strict";var e=n(91),a=n(17),i=n(25),u=n(5),o=a.caml_array_get,c=a.caml_array_set;function f(r){var t=void 0!==r.length&&248!=(0|r.tag)&&r.length>=1?r[0]:r;if(void 0===t.length||248!==t.tag)throw u.not_found;if(252===t[0].tag)return t;throw u.not_found}t.double_field=o,t.set_double_field=c,t.first_non_constant_constructor_tag=0,t.last_non_constant_constructor_tag=245,t.lazy_tag=246,t.closure_tag=247,t.object_tag=248,t.infix_tag=249,t.forward_tag=250,t.no_scan_tag=251,t.abstract_tag=251,t.string_tag=252,t.double_tag=253,t.double_array_tag=254,t.custom_tag=255,t.final_tag=255,t.int_tag=1e3,t.out_of_heap_tag=1001,t.unaligned_tag=1002,t.extension_name=function(r){try{return f(r)[0]}catch(r){throw r===u.not_found?[u.invalid_argument,"Obj.extension_name"]:r}},t.extension_id=function(r){try{return f(r)[1]}catch(r){throw r===u.not_found?[u.invalid_argument,"Obj.extension_id"]:r}},t.extension_slot=function(r){try{return f(r)}catch(r){throw r===u.not_found?[u.invalid_argument,"Obj.extension_slot"]:r}},t.marshal=function(){return i.not_implemented("caml_output_value_to_string not implemented by bucklescript yet\n")},t.unmarshal=function(r,t){return[e.from_bytes(r,t),t+e.total_size(r,t)|0]}},function(r,t,n){"use strict";var e=n(92),a=n(11),i=n(26).create("CamlinternalLazy.Undefined");function u(){throw i}function o(r){var t=r[0];r[0]=u;try{var n=a._1(t,0);return r[0]=n,r.tag=e.forward_tag,n}catch(t){throw r[0]=function(){throw t},t}}function c(r){var t=r[0];r[0]=u;var n=a._1(t,0);return r[0]=n,r.tag=e.forward_tag,n}t.Undefined=i,t.force_lazy_block=o,t.force_val_lazy_block=c,t.force=function(r){var t=0|r.tag;return t===e.forward_tag?r[0]:t!==e.lazy_tag?r:o(r)},t.force_val=function(r){var t=0|r.tag;return t===e.forward_tag?r[0]:t!==e.lazy_tag?r:c(r)}},function(r,t,n){"use strict";t.create=function(){return[0,0]},t.push=function(r,t){if(t[0]){var n=t[1],e=[r,n[1]];return t[0]=t[0]+1|0,n[1]=e,t[1]=e,0}var a=[];return a[0]=r,a[1]=a,t[0]=1,t[1]=a,0},t.unsafe_pop=function(r){r[0]=r[0]-1|0;var t=r[1],n=t[1];return n===t?r[1]=0:t[1]=n[1],n[0]},t.is_empty=function(r){return+(0===r[0])}},function(r,t,n){"use strict";var e=n(14),a=n(94),i=n(5);function u(r,t){return r<<t|r>>>(32-t|0)}function o(r,t){var n=t;n=u(n=e.imul(n,3432918353),15);var a=r^(n=e.imul(n,461845907));return 3864292196+((a=u(a,13))+(a<<2)|0)|0}function c(r){var t=r^r>>>16;return t=e.imul(t,2246822507),t^=t>>>13,(t=e.imul(t,3266489909))^t>>>16}function f(r,t){for(var n=t.length,e=(n/4|0)-1|0,a=r,i=0;i<=e;++i){var u=i<<2;a=o(a,t.charCodeAt(u)|t.charCodeAt(u+1|0)<<8|t.charCodeAt(u+2|0)<<16|t.charCodeAt(u+3|0)<<24)}var c=3&n;return 0!==c&&(a=o(a,3===c?t.charCodeAt(n-1|0)<<16|t.charCodeAt(n-2|0)<<8|t.charCodeAt(n-3|0):2===c?t.charCodeAt(n-1|0)<<8|t.charCodeAt(n-2|0):t.charCodeAt(n-1|0))),a^n}t.caml_hash_mix_int=o,t.caml_hash_mix_string=f,t.caml_hash_final_mix=c,t.caml_hash=function(r,t,n,e){var u=n;if("number"==typeof e){var s=0|e;return c(u=o(u,1+(s+s|0)|0))}if("string"==typeof e)return c(u=f(u,e));var _=[0,0],l=r;for(a.push(e,_),l=l-1|0;0!==_[0]&&l>0;){var m=a.unsafe_pop(_);if("number"==typeof m){var v=0|m;u=o(u,1+(v+v|0)|0),l=l-1|0}else if("string"==typeof m)u=f(u,m),l=l-1|0;else if("boolean"!=typeof m&&void 0!==m){if("symbol"==typeof m)throw[i.assert_failure,["caml_hash.ml",135,8]];if("function"!=typeof m){var d=m.length;if(void 0!==d){var g=d<<10|0|m.tag;if(248===g)u=o(u,m[1]);else{u=o(u,g);for(var h=d-1|0,y=h<l?h:l,p=0;p<=y;++p)a.push(m[p],_)}}}}}return c(u)}},function(r,t,n){"use strict";var e=n(16),a=n(35),i=e.caml_nativeint_compare;t.zero=0,t.one=1,t.minus_one=-1,t.succ=function(r){return r+1},t.pred=function(r){return r-1},t.abs=function(r){return r>=0?r:-r},t.size=54,t.max_int=9007199254740991,t.min_int=-9007199254740991,t.lognot=function(r){return-1^r},t.to_string=function(r){return a.caml_nativeint_format("%d",r)},t.compare=i},function(r,t,n){"use strict";function e(r,t,n,e,a,i){var u=((t+r|0)+e|0)+i|0;return(u<<a|u>>>(32-a|0)|0)+n|0}function a(r,t,n,a,i,u,o){return e(t&n|(-1^t)&a,r,t,i,u,o)}function i(r,t,n,a,i,u,o){return e(t&a|n&(-1^a),r,t,i,u,o)}function u(r,t,n,a,i,u,o){return e(t^n^a,r,t,i,u,o)}function o(r,t,n,a,i,u,o){return e(n^(t|-1^a),r,t,i,u,o)}function c(r,t){var n=r[0],e=r[1],c=r[2],f=r[3];return e=o(e=o(e=o(e=o(e=u(e=u(e=u(e=u(e=i(e=i(e=i(e=i(e=a(e=a(e=a(e=a(e,c=a(c,f=a(f,n=a(n,e,c,f,t[0],7,-680876936),e,c,t[1],12,-389564586),n,e,t[2],17,606105819),f,n,t[3],22,-1044525330),c=a(c,f=a(f,n=a(n,e,c,f,t[4],7,-176418897),e,c,t[5],12,1200080426),n,e,t[6],17,-1473231341),f,n,t[7],22,-45705983),c=a(c,f=a(f,n=a(n,e,c,f,t[8],7,1770035416),e,c,t[9],12,-1958414417),n,e,t[10],17,-42063),f,n,t[11],22,-1990404162),c=a(c,f=a(f,n=a(n,e,c,f,t[12],7,1804603682),e,c,t[13],12,-40341101),n,e,t[14],17,-1502002290),f,n,t[15],22,1236535329),c=i(c,f=i(f,n=i(n,e,c,f,t[1],5,-165796510),e,c,t[6],9,-1069501632),n,e,t[11],14,643717713),f,n,t[0],20,-373897302),c=i(c,f=i(f,n=i(n,e,c,f,t[5],5,-701558691),e,c,t[10],9,38016083),n,e,t[15],14,-660478335),f,n,t[4],20,-405537848),c=i(c,f=i(f,n=i(n,e,c,f,t[9],5,568446438),e,c,t[14],9,-1019803690),n,e,t[3],14,-187363961),f,n,t[8],20,1163531501),c=i(c,f=i(f,n=i(n,e,c,f,t[13],5,-1444681467),e,c,t[2],9,-51403784),n,e,t[7],14,1735328473),f,n,t[12],20,-1926607734),c=u(c,f=u(f,n=u(n,e,c,f,t[5],4,-378558),e,c,t[8],11,-2022574463),n,e,t[11],16,1839030562),f,n,t[14],23,-35309556),c=u(c,f=u(f,n=u(n,e,c,f,t[1],4,-1530992060),e,c,t[4],11,1272893353),n,e,t[7],16,-155497632),f,n,t[10],23,-1094730640),c=u(c,f=u(f,n=u(n,e,c,f,t[13],4,681279174),e,c,t[0],11,-358537222),n,e,t[3],16,-722521979),f,n,t[6],23,76029189),c=u(c,f=u(f,n=u(n,e,c,f,t[9],4,-640364487),e,c,t[12],11,-421815835),n,e,t[15],16,530742520),f,n,t[2],23,-995338651),c=o(c,f=o(f,n=o(n,e,c,f,t[0],6,-198630844),e,c,t[7],10,1126891415),n,e,t[14],15,-1416354905),f,n,t[5],21,-57434055),c=o(c,f=o(f,n=o(n,e,c,f,t[12],6,1700485571),e,c,t[3],10,-1894986606),n,e,t[10],15,-1051523),f,n,t[1],21,-2054922799),c=o(c,f=o(f,n=o(n,e,c,f,t[8],6,1873313359),e,c,t[15],10,-30611744),n,e,t[6],15,-1560198380),f,n,t[13],21,1309151649),c=o(c,f=o(f,n=o(n,e,c,f,t[4],6,-145523070),e,c,t[11],10,-1120210379),n,e,t[2],15,718787259),f,n,t[9],21,-343485551),r[0]=n+r[0]|0,r[1]=e+r[1]|0,r[2]=c+r[2]|0,r[3]=f+r[3]|0,0}var f=[1732584193,-271733879,-1732584194,271733878],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];t.caml_md5_string=function(r,t,n){var e=r.slice(t,n),a=e.length;f[0]=1732584193,f[1]=-271733879,f[2]=-1732584194,f[3]=271733878;for(var i=0;i<=15;++i)s[i]=0;for(var u=a/64|0,o=1;o<=u;++o){for(var _=0;_<=15;++_){var l=((o<<6)-64|0)+(_<<2)|0;s[_]=((e.charCodeAt(l)+(e.charCodeAt(l+1|0)<<8)|0)+(e.charCodeAt(l+2|0)<<16)|0)+(e.charCodeAt(l+3|0)<<24)|0}c(f,s)}for(var m=e.slice(u<<6),v=0;v<=15;++v)s[v]=0;for(var d=m.length-1|0,g=0;g<=d;++g)s[g/4|0]=s[g/4|0]|m.charCodeAt(g)<<(g%4<<3);var h=d+1|0;if(s[h/4|0]=s[h/4|0]|128<<(h%4<<3),h>55){c(f,s);for(var y=0;y<=15;++y)s[y]=0}return s[14]=a<<3,c(f,s),String.fromCharCode(255&f[0],f[0]>>8&255,f[0]>>16&255,f[0]>>24&255,255&f[1],f[1]>>8&255,f[1]>>16&255,f[1]>>24&255,255&f[2],f[2]>>8&255,f[2]>>16&255,f[2]>>24&255,255&f[3],f[3]>>8&255,f[3]>>16&255,f[3]>>24&255)}},function(r,t,n){"use strict";var e=n(49),a=n(27),i=n(11),u=n(16),o=n(14),c=n(15),f=n(21),s=n(5),_=[];function l(r){var t=r.length,n=f.caml_create_string(t);return f.caml_blit_bytes(r,0,n,0,t),n}function m(r,t,n){if(t<0||n<0||t>(r.length-n|0))throw[s.invalid_argument,"String.sub / Bytes.sub"];var e=f.caml_create_string(n);return f.caml_blit_bytes(r,t,e,0,n),e}function v(r){var t=r-9|0;return t>4||t<0?23!==t?0:1:2!==t?1:0}function d(r,t){var n=t.length;if(n){for(var e=f.caml_create_string(n),a=0,u=n-1|0;a<=u;++a)e[a]=i._1(r,t[a]);return e}return t}function g(r,t){if(t.length){var n=l(t);return n[0]=i._1(r,t[0]),n}return t}function h(r,t,n,e){for(;;){var a=n;if(a>=t)throw s.not_found;if(r[a]===e)return a;n=a+1|0}}function y(r,t,n){for(;;){var e=t;if(e<0)throw s.not_found;if(r[e]===n)return e;t=e-1|0}}function p(r,t,n){var e=r.length;if(t<0||t>e)throw[s.invalid_argument,"String.contains_from / Bytes.contains_from"];try{return h(r,e,t,n),1}catch(r){if(r===s.not_found)return 0;throw r}}var b=u.caml_compare,w=f.bytes_to_string,x=f.bytes_of_string;t.make=function(r,t){var n=f.caml_create_string(r);return f.caml_fill_string(n,0,r,t),n},t.init=function(r,t){for(var n=f.caml_create_string(r),e=0,a=r-1|0;e<=a;++e)n[e]=i._1(t,e);return n},t.empty=_,t.copy=l,t.of_string=function(r){return l(f.bytes_of_string(r))},t.to_string=function(r){return f.bytes_to_string(l(r))},t.sub=m,t.sub_string=function(r,t,n){return f.bytes_to_string(m(r,t,n))},t.extend=function(r,t,n){var e=(r.length+t|0)+n|0,a=f.caml_create_string(e),i=t<0?[0|-t,0]:[0,t],u=i[1],o=i[0],s=c.min(r.length-o|0,e-u|0);return s>0&&f.caml_blit_bytes(r,o,a,u,s),a},t.fill=function(r,t,n,e){if(t<0||n<0||t>(r.length-n|0))throw[s.invalid_argument,"String.fill / Bytes.fill"];return f.caml_fill_string(r,t,n,e)},t.blit=function(r,t,n,e,a){if(a<0||t<0||t>(r.length-a|0)||e<0||e>(n.length-a|0))throw[s.invalid_argument,"Bytes.blit"];return f.caml_blit_bytes(r,t,n,e,a)},t.blit_string=function(r,t,n,e,a){if(a<0||t<0||t>(r.length-a|0)||e<0||e>(n.length-a|0))throw[s.invalid_argument,"String.blit / Bytes.blit_string"];return f.caml_blit_string(r,t,n,e,a)},t.concat=function(r,t){if(t){var n=t[0],e=[0],i=[0];a.iter(function(r){return e[0]=e[0]+1|0,i[0]=i[0]+r.length|0,0},t);var u=f.caml_create_string(i[0]+o.imul(r.length,e[0]-1|0)|0);f.caml_blit_bytes(n,0,u,0,n.length);var c=[n.length];return a.iter(function(t){return f.caml_blit_bytes(r,0,u,c[0],r.length),c[0]=c[0]+r.length|0,f.caml_blit_bytes(t,0,u,c[0],t.length),c[0]=c[0]+t.length|0,0},t[1]),u}return _},t.cat=function(r,t){return r.concat(t)},t.iter=function(r,t){for(var n=0,e=t.length-1|0;n<=e;++n)i._1(r,t[n]);return 0},t.iteri=function(r,t){for(var n=0,e=t.length-1|0;n<=e;++n)i._2(r,n,t[n]);return 0},t.map=d,t.mapi=function(r,t){var n=t.length;if(n){for(var e=f.caml_create_string(n),a=0,u=n-1|0;a<=u;++a)e[a]=i._2(r,a,t[a]);return e}return t},t.trim=function(r){for(var t=r.length,n=0;n<t&&v(r[n]);)n=n+1|0;for(var e=t-1|0;e>=n&&v(r[e]);)e=e-1|0;return e>=n?m(r,n,1+(e-n|0)|0):_},t.escaped=function(r){for(var t=0,n=0,e=r.length-1|0;n<=e;++n){var a,i=r[n];if(i>=32){var u=i-34|0;a=u>58||u<0?u>=93?4:1:u>57||u<1?2:1}else a=i>=11?13!==i?4:2:i>=8?2:4;t=t+a|0}if(t===r.length)return l(r);var o=f.caml_create_string(t);t=0;for(var c=0,s=r.length-1|0;c<=s;++c){var _=r[c],m=0;if(_>=35)92!==_?_>=127?m=1:o[t]=_:m=2;else if(_>=32)_>=34?m=2:o[t]=_;else if(_>=14)m=1;else switch(_){case 8:o[t]=92,o[t=t+1|0]=98;break;case 9:o[t]=92,o[t=t+1|0]=116;break;case 10:o[t]=92,o[t=t+1|0]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:m=1;break;case 13:o[t]=92,o[t=t+1|0]=114}switch(m){case 1:o[t]=92,o[t=t+1|0]=48+(_/100|0)|0,o[t=t+1|0]=48+(_/10|0)%10|0,o[t=t+1|0]=48+_%10|0;break;case 2:o[t]=92,o[t=t+1|0]=_}t=t+1|0}return o},t.index=function(r,t){return h(r,r.length,0,t)},t.rindex=function(r,t){return y(r,r.length-1|0,t)},t.index_from=function(r,t,n){var e=r.length;if(t<0||t>e)throw[s.invalid_argument,"String.index_from / Bytes.index_from"];return h(r,e,t,n)},t.rindex_from=function(r,t,n){if(t<-1||t>=r.length)throw[s.invalid_argument,"String.rindex_from / Bytes.rindex_from"];return y(r,t,n)},t.contains=function(r,t){return p(r,0,t)},t.contains_from=p,t.rcontains_from=function(r,t,n){if(t<0||t>=r.length)throw[s.invalid_argument,"String.rcontains_from / Bytes.rcontains_from"];try{return y(r,t,n),1}catch(r){if(r===s.not_found)return 0;throw r}},t.uppercase=function(r){return d(e.uppercase,r)},t.lowercase=function(r){return d(e.lowercase,r)},t.capitalize=function(r){return g(e.uppercase,r)},t.uncapitalize=function(r){return g(e.lowercase,r)},t.compare=b,t.unsafe_to_string=w,t.unsafe_of_string=x},function(r,t,n){"use strict";var e=n(27),a=n(98),i=n(14),u=n(21);function o(r){var t=r-9|0;return t>4||t<0?23!==t?0:1:2!==t?1:0}var c=u.caml_string_compare,f=a.fill,s=a.blit_string;t.make=function(r,t){return u.bytes_to_string(a.make(r,t))},t.init=function(r,t){return u.bytes_to_string(a.init(r,t))},t.copy=function(r){return u.bytes_to_string(a.copy(u.bytes_of_string(r)))},t.sub=function(r,t,n){return u.bytes_to_string(a.sub(u.bytes_of_string(r),t,n))},t.fill=f,t.blit=s,t.concat=function(r,t){if(t){var n=t[0],a=[0],o=[0];e.iter(function(r){return a[0]=a[0]+1|0,o[0]=o[0]+r.length|0,0},t);var c=u.caml_create_string(o[0]+i.imul(r.length,a[0]-1|0)|0);u.caml_blit_string(n,0,c,0,n.length);var f=[n.length];return e.iter(function(t){return u.caml_blit_string(r,0,c,f[0],r.length),f[0]=f[0]+r.length|0,u.caml_blit_string(t,0,c,f[0],t.length),f[0]=f[0]+t.length|0,0},t[1]),u.bytes_to_string(c)}return""},t.iter=function(r,t){return a.iter(r,u.bytes_of_string(t))},t.iteri=function(r,t){return a.iteri(r,u.bytes_of_string(t))},t.map=function(r,t){return u.bytes_to_string(a.map(r,u.bytes_of_string(t)))},t.mapi=function(r,t){return u.bytes_to_string(a.mapi(r,u.bytes_of_string(t)))},t.trim=function(r){return""===r||!o(r.charCodeAt(0))&&!o(r.charCodeAt(r.length-1|0))?r:u.bytes_to_string(a.trim(u.bytes_of_string(r)))},t.escaped=function(r){return function(t){for(;;){var n=t;if(n>=r.length)return 0;var e=r.charCodeAt(n);if(!(e>=32))return 1;var a=e-34|0;if(a>58||a<0){if(a>=93)return 1;t=n+1|0}else{if(a>57||a<1)return 1;t=n+1|0}}}(0)?u.bytes_to_string(a.escaped(u.bytes_of_string(r))):r},t.index=function(r,t){return a.index(u.bytes_of_string(r),t)},t.rindex=function(r,t){return a.rindex(u.bytes_of_string(r),t)},t.index_from=function(r,t,n){return a.index_from(u.bytes_of_string(r),t,n)},t.rindex_from=function(r,t,n){return a.rindex_from(u.bytes_of_string(r),t,n)},t.contains=function(r,t){return a.contains(u.bytes_of_string(r),t)},t.contains_from=function(r,t,n){return a.contains_from(u.bytes_of_string(r),t,n)},t.rcontains_from=function(r,t,n){return a.rcontains_from(u.bytes_of_string(r),t,n)},t.uppercase=function(r){return u.bytes_to_string(a.uppercase(u.bytes_of_string(r)))},t.lowercase=function(r){return u.bytes_to_string(a.lowercase(u.bytes_of_string(r)))},t.capitalize=function(r){return u.bytes_to_string(a.capitalize(u.bytes_of_string(r)))},t.uncapitalize=function(r){return u.bytes_to_string(a.uncapitalize(u.bytes_of_string(r)))},t.compare=c},function(r,t,n){"use strict";var e=n(49),a=n(99),i=n(97),u=n(15),o=n(21),c=n(25),f=n(5);function s(r){return i.caml_md5_string(r,0,r.length)}function _(r,t,n){if(t<0||n<0||t>(r.length-n|0))throw[f.invalid_argument,"Digest.substring"];return i.caml_md5_string(r,t,n)}var l=u.output_string;function m(r){return r+(r<10?48:87)|0}var v=a.compare;t.compare=v,t.string=s,t.bytes=function(r){return s(o.bytes_to_string(r))},t.substring=_,t.subbytes=function(r,t,n){return _(o.bytes_to_string(r),t,n)},t.file=function(r){u.open_in_bin(r);var t,n=0;try{t=c.not_implemented("caml_md5_chan not implemented by bucklescript yet\n"),n=1}catch(r){throw c.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n"),r}if(1===n)return c.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n"),t},t.output=l,t.input=function(r){return u.really_input_string(r,16)},t.to_hex=function(r){for(var t=new Array(32),n=0;n<=15;++n){var e=o.get(r,n);t[n<<1]=m(e>>>4),t[1+(n<<1)|0]=m(15&e)}return o.bytes_to_string(t)},t.from_hex=function(r){if(32!==r.length)throw[f.invalid_argument,"Digest.from_hex"];for(var t=function(r){if(r>=65){if(r>=97){if(r>=103)throw[f.invalid_argument,"Digest.from_hex"];return 10+(r-97|0)|0}if(r>=71)throw[f.invalid_argument,"Digest.from_hex"];return 10+(r-65|0)|0}if(r>57||r<48)throw[f.invalid_argument,"Digest.from_hex"];return r-48|0},n=function(n){return(t(o.get(r,n))<<4)+t(o.get(r,n+1|0))|0},a=new Array(16),i=0;i<=15;++i)a[i]=e.chr(n(i<<1));return o.bytes_to_string(a)}},function(r,t,n){"use strict";var e=n(39),a=n(35),i=e.compare;t.zero=[0,0],t.one=[0,1],t.minus_one=[-1,4294967295],t.succ=function(r){return e.add(r,[0,1])},t.pred=function(r){return e.sub(r,[0,1])},t.abs=function(r){return e.ge(r,[0,0])?r:e.neg(r)},t.max_int=[2147483647,4294967295],t.min_int=[-2147483648,0],t.lognot=function(r){return e.xor(r,[-1,4294967295])},t.to_string=function(r){return a.caml_int64_format("%d",r)},t.compare=i},function(r,t,n){"use strict";var e=n(16),a=n(35),i=e.caml_int32_compare;t.zero=0,t.one=1,t.minus_one=-1,t.succ=function(r){return r+1|0},t.pred=function(r){return r-1|0},t.abs=function(r){return r>=0?r:0|-r},t.max_int=2147483647,t.min_int=-2147483648,t.lognot=function(r){return-1^r},t.to_string=function(r){return a.caml_int32_format("%d",r)},t.compare=i},function(r,t,n){"use strict";var e=n(26),a=e.create("Js_exn.Error");t.$$Error=a,t.internalToOCamlException=function(r){return e.isCamlExceptionOrOpenVariant(r)?r:[a,r]},t.raiseError=function(r){throw new Error(r)},t.raiseEvalError=function(r){throw new EvalError(r)},t.raiseRangeError=function(r){throw new RangeError(r)},t.raiseReferenceError=function(r){throw new ReferenceError(r)},t.raiseSyntaxError=function(r){throw new SyntaxError(r)},t.raiseTypeError=function(r){throw new TypeError(r)},t.raiseUriError=function(r){throw new URIError(r)}},function(r,t,n){"use strict";var e=n(12),a=n(28),i=n(2);function u(r,t){if(t<0||t>(r.length-20|0))throw[i.invalid_argument,"Marshal.data_size"];return a.not_implemented("caml_marshal_data_size not implemented by bucklescript yet\n")}function o(r,t){if(t<0||t>(r.length-20|0))throw[i.invalid_argument,"Marshal.from_bytes"];var n=a.not_implemented("caml_marshal_data_size not implemented by bucklescript yet\n");if(t>(r.length-(20+n|0)|0))throw[i.invalid_argument,"Marshal.from_bytes"];return a.not_implemented("caml_input_value_from_string not implemented by bucklescript yet\n")}t.to_channel=function(r,t,n){return a.not_implemented("caml_output_value not implemented by bucklescript yet\n")},t.to_buffer=function(r,t,n,e,u){if(t<0||n<0||t>(r.length-n|0))throw[i.invalid_argument,"Marshal.to_buffer: substring out of bounds"];return a.not_implemented("caml_output_value_to_buffer not implemented by bucklescript yet\n")},t.from_channel=function(){return a.not_implemented("caml_input_value not implemented by bucklescript yet\n")},t.from_bytes=o,t.from_string=function(r,t){return o(e.bytes_of_string(r),t)},t.header_size=20,t.data_size=u,t.total_size=function(r,t){return 20+u(r,t)|0}},function(r,t,n){"use strict";var e=n(104),a=n(7),i=n(28),u=n(2),o=a.caml_array_get,c=a.caml_array_set;function f(r){var t=void 0!==r.length&&248!=(0|r.tag)&&r.length>=1?r[0]:r;if(void 0===t.length||248!==t.tag)throw u.not_found;if(252===t[0].tag)return t;throw u.not_found}t.double_field=o,t.set_double_field=c,t.first_non_constant_constructor_tag=0,t.last_non_constant_constructor_tag=245,t.lazy_tag=246,t.closure_tag=247,t.object_tag=248,t.infix_tag=249,t.forward_tag=250,t.no_scan_tag=251,t.abstract_tag=251,t.string_tag=252,t.double_tag=253,t.double_array_tag=254,t.custom_tag=255,t.final_tag=255,t.int_tag=1e3,t.out_of_heap_tag=1001,t.unaligned_tag=1002,t.extension_name=function(r){try{return f(r)[0]}catch(r){throw r===u.not_found?[u.invalid_argument,"Obj.extension_name"]:r}},t.extension_id=function(r){try{return f(r)[1]}catch(r){throw r===u.not_found?[u.invalid_argument,"Obj.extension_id"]:r}},t.extension_slot=function(r){try{return f(r)}catch(r){throw r===u.not_found?[u.invalid_argument,"Obj.extension_slot"]:r}},t.marshal=function(){return i.not_implemented("caml_output_value_to_string not implemented by bucklescript yet\n")},t.unmarshal=function(r,t){return[e.from_bytes(r,t),t+e.total_size(r,t)|0]}},function(r,t,n){"use strict";var e=n(105),a=n(0),i=n(29).create("CamlinternalLazy.Undefined");function u(){throw i}function o(r){var t=r[0];r[0]=u;try{var n=a._1(t,0);return r[0]=n,r.tag=e.forward_tag,n}catch(t){throw r[0]=function(){throw t},t}}function c(r){var t=r[0];r[0]=u;var n=a._1(t,0);return r[0]=n,r.tag=e.forward_tag,n}t.Undefined=i,t.force_lazy_block=o,t.force_val_lazy_block=c,t.force=function(r){var t=0|r.tag;return t===e.forward_tag?r[0]:t!==e.lazy_tag?r:o(r)},t.force_val=function(r){var t=0|r.tag;return t===e.forward_tag?r[0]:t!==e.lazy_tag?r:c(r)}},function(r,t,n){"use strict";t.create=function(){return[0,0]},t.push=function(r,t){if(t[0]){var n=t[1],e=[r,n[1]];return t[0]=t[0]+1|0,n[1]=e,t[1]=e,0}var a=[];return a[0]=r,a[1]=a,t[0]=1,t[1]=a,0},t.unsafe_pop=function(r){r[0]=r[0]-1|0;var t=r[1],n=t[1];return n===t?r[1]=0:t[1]=n[1],n[0]},t.is_empty=function(r){return+(0===r[0])}},function(r,t,n){"use strict";var e=n(9),a=n(107),i=n(2);function u(r,t){return r<<t|r>>>(32-t|0)}function o(r,t){var n=t;n=u(n=e.imul(n,3432918353),15);var a=r^(n=e.imul(n,461845907));return 3864292196+((a=u(a,13))+(a<<2)|0)|0}function c(r){var t=r^r>>>16;return t=e.imul(t,2246822507),t^=t>>>13,(t=e.imul(t,3266489909))^t>>>16}function f(r,t){for(var n=t.length,e=(n/4|0)-1|0,a=r,i=0;i<=e;++i){var u=i<<2;a=o(a,t.charCodeAt(u)|t.charCodeAt(u+1|0)<<8|t.charCodeAt(u+2|0)<<16|t.charCodeAt(u+3|0)<<24)}var c=3&n;return 0!==c&&(a=o(a,3===c?t.charCodeAt(n-1|0)<<16|t.charCodeAt(n-2|0)<<8|t.charCodeAt(n-3|0):2===c?t.charCodeAt(n-1|0)<<8|t.charCodeAt(n-2|0):t.charCodeAt(n-1|0))),a^n}t.caml_hash_mix_int=o,t.caml_hash_mix_string=f,t.caml_hash_final_mix=c,t.caml_hash=function(r,t,n,e){var u=n;if("number"==typeof e){var s=0|e;return c(u=o(u,1+(s+s|0)|0))}if("string"==typeof e)return c(u=f(u,e));var _=[0,0],l=r;for(a.push(e,_),l=l-1|0;0!==_[0]&&l>0;){var m=a.unsafe_pop(_);if("number"==typeof m){var v=0|m;u=o(u,1+(v+v|0)|0),l=l-1|0}else if("string"==typeof m)u=f(u,m),l=l-1|0;else if("boolean"!=typeof m&&void 0!==m){if("symbol"==typeof m)throw[i.assert_failure,["caml_hash.ml",135,8]];if("function"!=typeof m){var d=m.length;if(void 0!==d){var g=d<<10|0|m.tag;if(248===g)u=o(u,m[1]);else{u=o(u,g);for(var h=d-1|0,y=h<l?h:l,p=0;p<=y;++p)a.push(m[p],_)}}}}}return c(u)}},function(r,t,n){"use strict";var e=n(18),a=n(30),i=e.caml_nativeint_compare;t.zero=0,t.one=1,t.minus_one=-1,t.succ=function(r){return r+1},t.pred=function(r){return r-1},t.abs=function(r){return r>=0?r:-r},t.size=54,t.max_int=9007199254740991,t.min_int=-9007199254740991,t.lognot=function(r){return-1^r},t.to_string=function(r){return a.caml_nativeint_format("%d",r)},t.compare=i},function(r,t,n){"use strict";function e(r,t,n,e,a,i){var u=((t+r|0)+e|0)+i|0;return(u<<a|u>>>(32-a|0)|0)+n|0}function a(r,t,n,a,i,u,o){return e(t&n|(-1^t)&a,r,t,i,u,o)}function i(r,t,n,a,i,u,o){return e(t&a|n&(-1^a),r,t,i,u,o)}function u(r,t,n,a,i,u,o){return e(t^n^a,r,t,i,u,o)}function o(r,t,n,a,i,u,o){return e(n^(t|-1^a),r,t,i,u,o)}function c(r,t){var n=r[0],e=r[1],c=r[2],f=r[3];return e=o(e=o(e=o(e=o(e=u(e=u(e=u(e=u(e=i(e=i(e=i(e=i(e=a(e=a(e=a(e=a(e,c=a(c,f=a(f,n=a(n,e,c,f,t[0],7,-680876936),e,c,t[1],12,-389564586),n,e,t[2],17,606105819),f,n,t[3],22,-1044525330),c=a(c,f=a(f,n=a(n,e,c,f,t[4],7,-176418897),e,c,t[5],12,1200080426),n,e,t[6],17,-1473231341),f,n,t[7],22,-45705983),c=a(c,f=a(f,n=a(n,e,c,f,t[8],7,1770035416),e,c,t[9],12,-1958414417),n,e,t[10],17,-42063),f,n,t[11],22,-1990404162),c=a(c,f=a(f,n=a(n,e,c,f,t[12],7,1804603682),e,c,t[13],12,-40341101),n,e,t[14],17,-1502002290),f,n,t[15],22,1236535329),c=i(c,f=i(f,n=i(n,e,c,f,t[1],5,-165796510),e,c,t[6],9,-1069501632),n,e,t[11],14,643717713),f,n,t[0],20,-373897302),c=i(c,f=i(f,n=i(n,e,c,f,t[5],5,-701558691),e,c,t[10],9,38016083),n,e,t[15],14,-660478335),f,n,t[4],20,-405537848),c=i(c,f=i(f,n=i(n,e,c,f,t[9],5,568446438),e,c,t[14],9,-1019803690),n,e,t[3],14,-187363961),f,n,t[8],20,1163531501),c=i(c,f=i(f,n=i(n,e,c,f,t[13],5,-1444681467),e,c,t[2],9,-51403784),n,e,t[7],14,1735328473),f,n,t[12],20,-1926607734),c=u(c,f=u(f,n=u(n,e,c,f,t[5],4,-378558),e,c,t[8],11,-2022574463),n,e,t[11],16,1839030562),f,n,t[14],23,-35309556),c=u(c,f=u(f,n=u(n,e,c,f,t[1],4,-1530992060),e,c,t[4],11,1272893353),n,e,t[7],16,-155497632),f,n,t[10],23,-1094730640),c=u(c,f=u(f,n=u(n,e,c,f,t[13],4,681279174),e,c,t[0],11,-358537222),n,e,t[3],16,-722521979),f,n,t[6],23,76029189),c=u(c,f=u(f,n=u(n,e,c,f,t[9],4,-640364487),e,c,t[12],11,-421815835),n,e,t[15],16,530742520),f,n,t[2],23,-995338651),c=o(c,f=o(f,n=o(n,e,c,f,t[0],6,-198630844),e,c,t[7],10,1126891415),n,e,t[14],15,-1416354905),f,n,t[5],21,-57434055),c=o(c,f=o(f,n=o(n,e,c,f,t[12],6,1700485571),e,c,t[3],10,-1894986606),n,e,t[10],15,-1051523),f,n,t[1],21,-2054922799),c=o(c,f=o(f,n=o(n,e,c,f,t[8],6,1873313359),e,c,t[15],10,-30611744),n,e,t[6],15,-1560198380),f,n,t[13],21,1309151649),c=o(c,f=o(f,n=o(n,e,c,f,t[4],6,-145523070),e,c,t[11],10,-1120210379),n,e,t[2],15,718787259),f,n,t[9],21,-343485551),r[0]=n+r[0]|0,r[1]=e+r[1]|0,r[2]=c+r[2]|0,r[3]=f+r[3]|0,0}var f=[1732584193,-271733879,-1732584194,271733878],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];t.caml_md5_string=function(r,t,n){var e=r.slice(t,n),a=e.length;f[0]=1732584193,f[1]=-271733879,f[2]=-1732584194,f[3]=271733878;for(var i=0;i<=15;++i)s[i]=0;for(var u=a/64|0,o=1;o<=u;++o){for(var _=0;_<=15;++_){var l=((o<<6)-64|0)+(_<<2)|0;s[_]=((e.charCodeAt(l)+(e.charCodeAt(l+1|0)<<8)|0)+(e.charCodeAt(l+2|0)<<16)|0)+(e.charCodeAt(l+3|0)<<24)|0}c(f,s)}for(var m=e.slice(u<<6),v=0;v<=15;++v)s[v]=0;for(var d=m.length-1|0,g=0;g<=d;++g)s[g/4|0]=s[g/4|0]|m.charCodeAt(g)<<(g%4<<3);var h=d+1|0;if(s[h/4|0]=s[h/4|0]|128<<(h%4<<3),h>55){c(f,s);for(var y=0;y<=15;++y)s[y]=0}return s[14]=a<<3,c(f,s),String.fromCharCode(255&f[0],f[0]>>8&255,f[0]>>16&255,f[0]>>24&255,255&f[1],f[1]>>8&255,f[1]>>16&255,f[1]>>24&255,255&f[2],f[2]>>8&255,f[2]>>16&255,f[2]>>24&255,255&f[3],f[3]>>8&255,f[3]>>16&255,f[3]>>24&255)}},function(r,t,n){"use strict";var e=n(34),a=n(20),i=n(110),u=n(1),o=n(12),c=n(28),f=n(2);function s(r){return i.caml_md5_string(r,0,r.length)}function _(r,t,n){if(t<0||n<0||t>(r.length-n|0))throw[f.invalid_argument,"Digest.substring"];return i.caml_md5_string(r,t,n)}var l=u.output_string;function m(r){return r+(r<10?48:87)|0}var v=a.compare;t.compare=v,t.string=s,t.bytes=function(r){return s(o.bytes_to_string(r))},t.substring=_,t.subbytes=function(r,t,n){return _(o.bytes_to_string(r),t,n)},t.file=function(r){u.open_in_bin(r);var t,n=0;try{t=c.not_implemented("caml_md5_chan not implemented by bucklescript yet\n"),n=1}catch(r){throw c.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n"),r}if(1===n)return c.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n"),t},t.output=l,t.input=function(r){return u.really_input_string(r,16)},t.to_hex=function(r){for(var t=new Array(32),n=0;n<=15;++n){var e=o.get(r,n);t[n<<1]=m(e>>>4),t[1+(n<<1)|0]=m(15&e)}return o.bytes_to_string(t)},t.from_hex=function(r){if(32!==r.length)throw[f.invalid_argument,"Digest.from_hex"];for(var t=function(r){if(r>=65){if(r>=97){if(r>=103)throw[f.invalid_argument,"Digest.from_hex"];return 10+(r-97|0)|0}if(r>=71)throw[f.invalid_argument,"Digest.from_hex"];return 10+(r-65|0)|0}if(r>57||r<48)throw[f.invalid_argument,"Digest.from_hex"];return r-48|0},n=function(n){return(t(o.get(r,n))<<4)+t(o.get(r,n+1|0))|0},a=new Array(16),i=0;i<=15;++i)a[i]=e.chr(n(i<<1));return o.bytes_to_string(a)}},function(r,t,n){"use strict";var e=n(42),a=n(30),i=e.compare;t.zero=[0,0],t.one=[0,1],t.minus_one=[-1,4294967295],t.succ=function(r){return e.add(r,[0,1])},t.pred=function(r){return e.sub(r,[0,1])},t.abs=function(r){return e.ge(r,[0,0])?r:e.neg(r)},t.max_int=[2147483647,4294967295],t.min_int=[-2147483648,0],t.lognot=function(r){return e.xor(r,[-1,4294967295])},t.to_string=function(r){return a.caml_int64_format("%d",r)},t.compare=i},function(r,t,n){"use strict";var e=n(18),a=n(30),i=e.caml_int32_compare;t.zero=0,t.one=1,t.minus_one=-1,t.succ=function(r){return r+1|0},t.pred=function(r){return r-1|0},t.abs=function(r){return r>=0?r:0|-r},t.max_int=2147483647,t.min_int=-2147483648,t.lognot=function(r){return-1^r},t.to_string=function(r){return a.caml_int32_format("%d",r)},t.compare=i},function(r,t,n){"use strict";var e=n(22),a=n(0),i=n(113),u=n(112),o=n(111),c=n(62),f=n(109),s=n(7),_=n(42),l=n(1),m=n(12),v=n(2);function d(r,t){return e.blit(t[0],0,r[0],0,55),r[1]=t[1],0}function g(r,t){for(var n=function(r,t){return o.string(r+t)},e=t.length?t:[0],a=e.length,i=0;i<=54;++i)s.caml_array_set(r[0],i,i);for(var u,c="x",f=0,_=54+l.max(55,a)|0;f<=_;++f){var v=f%55,d=f%a;c=n(c,s.caml_array_get(e,d)),s.caml_array_set(r[0],v,1073741823&(s.caml_array_get(r[0],v)^(u=c,((m.get(u,0)+(m.get(u,1)<<8)|0)+(m.get(u,2)<<16)|0)+(m.get(u,3)<<24)|0)))}return r[1]=0,0}function h(r){var t=[s.caml_make_vect(55,0),0];return g(t,r),t}function y(r){var t=[s.caml_make_vect(55,0),0];return d(t,r),t}function p(r){r[1]=(r[1]+1|0)%55;var t=s.caml_array_get(r[0],r[1]),n=1073741823&(s.caml_array_get(r[0],(r[1]+24|0)%55)+(t^t>>>25&31)|0);return s.caml_array_set(r[0],r[1],n),n}function b(r,t){if(t>1073741823||t<=0)throw[v.invalid_argument,"Random.int"];for(var n=r,e=t;;){var a=p(n),i=a%e;if(!((a-i|0)>(1+(1073741823-e|0)|0)))return i}}function w(r,t){if(t<=0)throw[v.invalid_argument,"Random.int32"];for(var n=r,e=t;;){var a=p(n)|(1&p(n))<<30,u=a%e;if(!((a-u|0)>(1+(i.max_int-e|0)|0)))return u}}function x(r,t){if(_.le(t,[0,0]))throw[v.invalid_argument,"Random.int64"];for(var n=r,e=t;;){var a=_.of_int32(p(n)),i=_.lsl_(_.of_int32(p(n)),30),o=_.lsl_(_.of_int32(7&p(n)),60),c=_.or_(a,[i[0]|o[0],(i[1]|o[1])>>>0]),f=_.mod_(c,e);if(!_.gt(_.sub(c,f),_.add(_.sub(u.max_int,e),[0,1])))return f}}var k=32===f.size?w:function(r,t){return 0|x(r,_.of_int32(t))[1]};function M(r){return(p(r)/1073741824+p(r))/1073741824}function C(r){return+(0==(1&p(r)))}var S=[[987910699,495797812,364182224,414272206,318284740,990407751,383018966,270373319,840823159,24560019,536292337,512266505,189156120,730249596,143776328,51606627,140166561,366354223,1003410265,700563762,981890670,913149062,526082594,1021425055,784300257,667753350,630144451,949649812,48546892,415514493,258888527,511570777,89983870,283659902,308386020,242688715,482270760,865188196,1027664170,207196989,193777847,619708188,671350186,149669678,257044018,87658204,558145612,183450813,28133145,901332182,710253903,510646120,652377910,409934019,801085050],0];function P(r){return g(S,r)}var A=[h,function(){return h(c.caml_sys_random_seed(0))},y,p,b,w,k,x,function(r,t){return M(r)*t},C];t.init=function(r){return g(S,[r])},t.full_init=P,t.self_init=function(){return P(c.caml_sys_random_seed(0))},t.bits=function(){return p(S)},t.$$int=function(r){return b(S,r)},t.int32=function(r){return w(S,r)},t.nativeint=function(r){return a._2(k,S,r)},t.int64=function(r){return x(S,r)},t.$$float=function(r){return M(S)*r},t.bool=function(){return C(S)},t.State=A,t.get_state=function(){return y(S)},t.set_state=function(r){return d(S,r)}},function(r,t,n){"use strict";var e=n(2);t.get=function(r,t){if(t<0||t>=r.length)throw[e.invalid_argument,"index out of bounds"];return r[t]}},function(r,t,n){"use strict";var e=n(34),a=n(6),i=n(38),u=n(0),o=n(53),c=n(59),f=n(20),s=n(63),_=n(18),l=n(115),m=n(52),v=n(9),d=n(1),g=n(30),h=n(12),y=n(29),p=n(2),b=n(60);function w(r,t){var n=t>>>3,e=1<<(7&t);return r[n]=d.char_of_int(l.get(r,n)|e),0}var x=i.to_string;function k(r){for(var t=i.make(32,0),n=0;n<=31;++n)t[n]=d.char_of_int(255^h.get(r,n));return h.bytes_to_string(t)}function M(r,t){var n=t>>>3,e=1<<(7&t);return+(0!=(h.get(r,n)&e))}function C(r){return r?a.__(0,[1,r[0]]):0}function S(r,t){if("number"==typeof r)switch(r){case 0:return[a.__(0,[t])];case 1:return[a.__(1,[t])];case 2:return[a.__(9,[t])];case 3:return[a.__(19,[t])];case 4:return[a.__(22,[t])]}else switch(0|r.tag){case 0:return[a.__(2,[C(r[0]),t])];case 1:return[a.__(3,[C(r[0]),t])];case 2:return[a.__(4,[r[0],C(r[1]),0,t])];case 3:return[a.__(5,[r[0],C(r[1]),0,t])];case 4:return[a.__(6,[r[0],C(r[1]),0,t])];case 5:return[a.__(7,[r[0],C(r[1]),0,t])];case 6:return[a.__(8,[0,C(r[0]),(n=r[1],n?[n[0]]:0),t])];case 7:return[a.__(13,[r[0],r[1],t])];case 8:return[a.__(14,[r[0],r[1],t])];case 9:return[a.__(20,[r[0],r[1],t])];case 10:return[a.__(21,[r[0],t])]}var n}function P(r,t){var n=r[1].length,e=r[0]+t|0;if(e>n){var a=d.max(n<<1,e),u=h.caml_create_string(a);return i.blit(r[1],0,u,0,n),r[1]=u,0}return 0}function A(r,t){return P(r,1),r[1][r[0]]=t,r[0]=r[0]+1|0,0}function T(r,t){var n=t.length;return P(r,n),f.blit(t,0,r[1],r[0],n),r[0]=r[0]+n|0,0}function D(r){return i.sub_string(r[1],0,r[0])}function L(r){switch(r){case 0:case 1:case 2:return 100;case 3:case 4:case 5:return 105;case 6:case 7:return 120;case 8:case 9:return 88;case 10:case 11:return 111;case 12:return 117}}function N(r){switch(r){case 0:case 1:case 2:return 102;case 3:case 4:case 5:return 101;case 6:case 7:case 8:return 69;case 9:case 10:case 11:return 103;case 12:case 13:case 14:return 71;case 15:return 70}}function U(r){switch(r){case 0:return 108;case 1:return 110;case 2:return 78}}function V(r,t){var n,a,i=function(r,t){var n=d.char_of_int(t);return 37!==n?64!==n?A(r,n):(A(r,37),A(r,64)):(A(r,37),A(r,37))},u=function(t,n){for(;;){var e=n;if(!(e<256))return 0;if(M(t,d.char_of_int(e))){var a=t,c=e,f=d.char_of_int(c)-45|0;return f>48||f<0?f>=210?i(r,255):o(a,c+1|0):f>47||f<1?u(a,c+1|0):o(a,c+1|0)}n=e+1|0}},o=function(t,n){if(!M(t,d.char_of_int(n)))return i(r,n-1|0),u(t,n+1|0);var e=0,a=d.char_of_int(n)-45|0;if(a>48||a<0){if(a>=210)return i(r,254),i(r,255);e=1}else if(a>47||a<1){if(!M(t,d.char_of_int(n+1|0)))return i(r,n-1|0),u(t,n+1|0);e=1}else e=1;if(1===e){if(!M(t,d.char_of_int(n+1|0)))return i(r,n-1|0),i(r,n),u(t,n+2|0);for(var o=t,c=n-1|0,f=n+2|0;;){var s=f;if(256===s||!M(o,d.char_of_int(s)))return i(r,c),i(r,45),i(r,s-1|0),s<256?u(o,s+1|0):0;f=s+1|0}}};return A(r,91),n=M(t,0)?(A(r,94),k(t)):t,(a=function(r){var t=e.chr(r-1|0),a=e.chr(r+1|0);return M(n,r)?1-(M(n,t)&&M(n,a)):0})(93)&&A(r,93),u(n,1),a(45)&&A(r,45),A(r,93)}function z(r,t){return t?A(r,95):0}function B(r,t){return t?T(r,""+t[0]):0}function E(r,t){return"number"==typeof t?0:(function(r,t){switch(t){case 0:return A(r,45);case 1:return 0;case 2:A(r,48)}}(r,t[0]),t.tag?A(r,42):T(r,""+t[1]))}function F(r,t){return"number"==typeof t?0!==t?T(r,".*"):0:(A(r,46),T(r,""+t[0]))}function I(r,t){switch(t){case 1:case 4:return A(r,43);case 2:case 5:return A(r,32);case 7:case 9:case 11:return A(r,35);case 0:case 3:case 6:case 8:case 10:case 12:return 0}}function q(r,t,n,e,a){return A(r,37),z(r,t),I(r,n),E(r,e),F(r,a),A(r,L(n))}function R(r,t,n,e,a,i){return A(r,37),z(r,t),I(r,n),E(r,e),F(r,a),A(r,i),A(r,L(n))}function G(r,t){switch(t){case 1:case 4:case 7:case 10:case 13:return A(r,43);case 2:case 5:case 8:case 11:case 14:return A(r,32);case 0:case 3:case 6:case 9:case 12:case 15:return 0}}function O(r,t,n,e,a){return A(r,37),z(r,t),G(r,n),E(r,e),F(r,a),A(r,N(n))}function H(r){if("number"==typeof r)switch(r){case 0:return"@]";case 1:return"@}";case 2:return"@?";case 3:return"@\n";case 4:return"@.";case 5:return"@@";case 6:return"@%"}else switch(0|r.tag){case 0:case 1:return r[0];case 2:return"@"+h.bytes_to_string(i.make(1,r[0]))}}function K(r){return r[0][1]}function j(r,t){return 37!==t?A(r,t):T(r,"%%")}function $(r,t){for(var n=0,e=t.length-1|0;n<=e;++n)j(r,h.get(t,n));return 0}function W(r,t){for(;;){var n=t;if("number"==typeof n)return 0;switch(0|n.tag){case 0:T(r,"%c"),t=n[0];continue;case 1:T(r,"%s"),t=n[0];continue;case 2:T(r,"%i"),t=n[0];continue;case 3:T(r,"%li"),t=n[0];continue;case 4:T(r,"%ni"),t=n[0];continue;case 5:T(r,"%Li"),t=n[0];continue;case 6:T(r,"%f"),t=n[0];continue;case 7:T(r,"%B"),t=n[0];continue;case 8:T(r,"%{"),W(r,n[0]),T(r,"%}"),t=n[1];continue;case 9:T(r,"%("),W(r,n[0]),T(r,"%)"),t=n[2];continue;case 10:T(r,"%a"),t=n[0];continue;case 11:T(r,"%t"),t=n[0];continue;case 12:T(r,"%?"),t=n[0];continue;case 13:T(r,"%r"),t=n[0];continue;case 14:T(r,"%_r"),t=n[0];continue}}}function X(r){return r?1+X(r[0])|0:0}function Q(r){if("number"==typeof r)return 0;switch(0|r.tag){case 0:return a.__(0,[Q(r[0])]);case 1:return a.__(1,[Q(r[0])]);case 2:return a.__(2,[Q(r[0])]);case 3:return a.__(3,[Q(r[0])]);case 4:return a.__(4,[Q(r[0])]);case 5:return a.__(5,[Q(r[0])]);case 6:return a.__(6,[Q(r[0])]);case 7:return a.__(7,[Q(r[0])]);case 8:return a.__(8,[r[0],Q(r[1])]);case 9:return a.__(9,[r[1],r[0],Q(r[2])]);case 10:return a.__(10,[Q(r[0])]);case 11:return a.__(11,[Q(r[0])]);case 12:return a.__(12,[Q(r[0])]);case 13:return a.__(13,[Q(r[0])]);case 14:return a.__(14,[Q(r[0])])}}function Y(r){if("number"==typeof r)return[function(){return 0},function(){return 0},function(){return 0},function(){return 0}];switch(0|r.tag){case 0:var t=Y(r[0]),n=t[1],e=t[0];return[function(){return u._1(e,0),0},function(){return u._1(n,0),0},t[2],t[3]];case 1:var a=Y(r[0]),i=a[1],o=a[0];return[function(){return u._1(o,0),0},function(){return u._1(i,0),0},a[2],a[3]];case 2:var c=Y(r[0]),f=c[1],s=c[0];return[function(){return u._1(s,0),0},function(){return u._1(f,0),0},c[2],c[3]];case 3:var _=Y(r[0]),l=_[1],m=_[0];return[function(){return u._1(m,0),0},function(){return u._1(l,0),0},_[2],_[3]];case 4:var v=Y(r[0]),d=v[1],g=v[0];return[function(){return u._1(g,0),0},function(){return u._1(d,0),0},v[2],v[3]];case 5:var h=Y(r[0]),y=h[1],p=h[0];return[function(){return u._1(p,0),0},function(){return u._1(y,0),0},h[2],h[3]];case 6:var b=Y(r[0]),w=b[1],x=b[0];return[function(){return u._1(x,0),0},function(){return u._1(w,0),0},b[2],b[3]];case 7:var k=Y(r[0]),M=k[1],C=k[0];return[function(){return u._1(C,0),0},function(){return u._1(M,0),0},k[2],k[3]];case 8:var S=Y(r[1]),P=S[1],A=S[0];return[function(){return u._1(A,0),0},function(){return u._1(P,0),0},S[2],S[3]];case 9:var T=Y(r[2]),D=T[3],L=T[2],N=T[1],U=T[0],V=Y(Z(Q(r[0]),r[1])),z=V[3],B=V[2],E=V[1],F=V[0];return[function(){return u._1(U,0),u._1(F,0),0},function(){return u._1(E,0),u._1(N,0),0},function(){return u._1(L,0),u._1(B,0),0},function(){return u._1(z,0),u._1(D,0),0}];case 10:var I=Y(r[0]),q=I[1],R=I[0];return[function(){return u._1(R,0),0},function(){return u._1(q,0),0},I[2],I[3]];case 11:var G=Y(r[0]),O=G[1],H=G[0];return[function(){return u._1(H,0),0},function(){return u._1(O,0),0},G[2],G[3]];case 12:var K=Y(r[0]),j=K[1],$=K[0];return[function(){return u._1($,0),0},function(){return u._1(j,0),0},K[2],K[3]];case 13:var W=Y(r[0]),X=W[3],J=W[2],rr=W[1],tr=W[0];return[function(){return u._1(tr,0),0},function(){return u._1(rr,0),0},function(){return u._1(J,0),0},function(){return u._1(X,0),0}];case 14:var nr=Y(r[0]),er=nr[3],ar=nr[2],ir=nr[1],ur=nr[0];return[function(){return u._1(ur,0),0},function(){return u._1(ir,0),0},function(){return u._1(ar,0),0},function(){return u._1(er,0),0}]}}function Z(r,t){var n=0;if("number"==typeof r){if("number"==typeof t)return 0;switch(0|t.tag){case 8:n=6;break;case 9:n=7;break;case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:n=4;break;case 14:n=5;break;default:throw[p.assert_failure,["camlinternalFormat.ml",816,23]]}}else switch(0|r.tag){case 0:if("number"==typeof t)n=8;else switch(0|t.tag){case 0:return a.__(0,[Z(r[0],t[0])]);case 8:n=6;break;case 9:n=7;break;case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:n=4;break;case 14:n=5}break;case 1:if("number"==typeof t)n=8;else switch(0|t.tag){case 1:return a.__(1,[Z(r[0],t[0])]);case 8:n=6;break;case 9:n=7;break;case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:n=4;break;case 14:n=5}break;case 2:if("number"==typeof t)n=8;else switch(0|t.tag){case 2:return a.__(2,[Z(r[0],t[0])]);case 8:n=6;break;case 9:n=7;break;case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:n=4;break;case 14:n=5}break;case 3:if("number"==typeof t)n=8;else switch(0|t.tag){case 3:return a.__(3,[Z(r[0],t[0])]);case 8:n=6;break;case 9:n=7;break;case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:n=4;break;case 14:n=5}break;case 4:if("number"==typeof t)n=8;else switch(0|t.tag){case 4:return a.__(4,[Z(r[0],t[0])]);case 8:n=6;break;case 9:n=7;break;case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:n=4;break;case 14:n=5}break;case 5:if("number"==typeof t)n=8;else switch(0|t.tag){case 5:return a.__(5,[Z(r[0],t[0])]);case 8:n=6;break;case 9:n=7;break;case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:n=4;break;case 14:n=5}break;case 6:if("number"==typeof t)n=8;else switch(0|t.tag){case 6:return a.__(6,[Z(r[0],t[0])]);case 8:n=6;break;case 9:n=7;break;case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:n=4;break;case 14:n=5}break;case 7:if("number"==typeof t)n=8;else switch(0|t.tag){case 7:return a.__(7,[Z(r[0],t[0])]);case 8:n=6;break;case 9:n=7;break;case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:n=4;break;case 14:n=5}break;case 8:if("number"==typeof t)throw[p.assert_failure,["camlinternalFormat.ml",802,26]];switch(0|t.tag){case 8:return a.__(8,[Z(r[0],t[0]),Z(r[1],t[1])]);case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:n=4;break;case 14:n=5;break;default:throw[p.assert_failure,["camlinternalFormat.ml",802,26]]}break;case 9:if("number"==typeof t)throw[p.assert_failure,["camlinternalFormat.ml",812,28]];switch(0|t.tag){case 8:n=6;break;case 9:var e=Y(Z(Q(r[1]),t[0]));return u._1(e[1],0),u._1(e[3],0),a.__(9,[r[0],t[1],Z(r[2],t[2])]);case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:n=4;break;case 14:n=5;break;default:throw[p.assert_failure,["camlinternalFormat.ml",812,28]]}break;case 10:if("number"==typeof t)throw[p.assert_failure,["camlinternalFormat.ml",780,21]];if(10===t.tag)return a.__(10,[Z(r[0],t[0])]);throw[p.assert_failure,["camlinternalFormat.ml",780,21]];case 11:if("number"==typeof t)throw[p.assert_failure,["camlinternalFormat.ml",784,21]];switch(0|t.tag){case 10:n=1;break;case 11:return a.__(11,[Z(r[0],t[0])]);default:throw[p.assert_failure,["camlinternalFormat.ml",784,21]]}break;case 12:if("number"==typeof t)throw[p.assert_failure,["camlinternalFormat.ml",788,19]];switch(0|t.tag){case 10:n=1;break;case 11:n=2;break;case 12:return a.__(12,[Z(r[0],t[0])]);default:throw[p.assert_failure,["camlinternalFormat.ml",788,19]]}break;case 13:if("number"==typeof t)throw[p.assert_failure,["camlinternalFormat.ml",792,22]];switch(0|t.tag){case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:return a.__(13,[Z(r[0],t[0])]);default:throw[p.assert_failure,["camlinternalFormat.ml",792,22]]}break;case 14:if("number"==typeof t)throw[p.assert_failure,["camlinternalFormat.ml",797,30]];switch(0|t.tag){case 10:n=1;break;case 11:n=2;break;case 12:n=3;break;case 13:n=4;break;case 14:return a.__(14,[Z(r[0],t[0])]);default:throw[p.assert_failure,["camlinternalFormat.ml",797,30]]}}switch(n){case 1:throw[p.assert_failure,["camlinternalFormat.ml",781,21]];case 2:throw[p.assert_failure,["camlinternalFormat.ml",785,21]];case 3:throw[p.assert_failure,["camlinternalFormat.ml",789,19]];case 4:throw[p.assert_failure,["camlinternalFormat.ml",793,22]];case 5:throw[p.assert_failure,["camlinternalFormat.ml",798,30]];case 6:throw[p.assert_failure,["camlinternalFormat.ml",803,26]];case 7:throw[p.assert_failure,["camlinternalFormat.ml",813,28]];case 8:throw[p.assert_failure,["camlinternalFormat.ml",817,23]]}}function J(r){for(;;){var t=r,n=0;if("number"==typeof t)return 0;switch(0|t.tag){case 2:case 3:n=1;break;case 4:var e=J(t[3]),i=nr(t[2],a.__(2,[e]));return tr(t[1],i);case 5:var u=J(t[3]),o=nr(t[2],a.__(3,[u]));return tr(t[1],o);case 6:var c=J(t[3]),f=nr(t[2],a.__(4,[c]));return tr(t[1],f);case 7:var s=J(t[3]),_=nr(t[2],a.__(5,[s]));return tr(t[1],_);case 8:var l=J(t[3]),m=nr(t[2],a.__(6,[l]));return tr(t[1],m);case 9:return a.__(7,[J(t[0])]);case 10:r=t[0];continue;case 13:return a.__(8,[t[1],J(t[2])]);case 14:var v=t[1];return a.__(9,[v,v,J(t[2])]);case 15:return a.__(10,[J(t[0])]);case 16:return a.__(11,[J(t[0])]);case 11:case 12:case 17:r=t[1];continue;case 18:return b.concat_fmtty(J(t[0][0][0]),J(t[1]));case 19:return a.__(13,[J(t[0])]);case 20:return a.__(1,[J(t[2])]);case 21:return a.__(2,[J(t[1])]);case 23:var d=t[0],g=t[1];return"number"==typeof d?3===d?a.__(14,[J(g)]):J(g):8===d.tag?b.concat_fmtty(d[1],J(g)):J(g);case 24:return rr(t[0],J(t[2]));default:return a.__(0,[J(t[0])])}if(1===n)return tr(t[0],a.__(1,[J(t[1])]))}}function rr(r,t){return r?a.__(12,[rr(r[0],t)]):t}function tr(r,t){return"number"!=typeof r&&r.tag?a.__(2,[t]):t}function nr(r,t){return"number"==typeof r&&0!==r?a.__(2,[t]):t}var er=y.create("CamlinternalFormat.Type_mismatch");function ar(r,t){if("number"==typeof r)return[0,t];if(r.tag){if("number"==typeof t)throw er;if(2===t.tag)return[a.__(1,[r[0]]),t[0]];throw er}return[a.__(0,[r[0],r[1]]),t]}function ir(r,t,n){var e=ar(r,n);if("number"==typeof t){if(0!==t){var a=e[1];if("number"==typeof a)throw er;if(2===a.tag)return[e[0],1,a[0]];throw er}return[e[0],0,e[1]]}return[e[0],[t[0]],e[1]]}function ur(r,t,n){var e=or(t,n);return[a.__(23,[r,e[0]]),e[1]]}function or(r,t){if("number"==typeof r)return[0,t];switch(0|r.tag){case 0:if("number"==typeof t)throw er;if(t.tag)throw er;var n=or(r[0],t[0]);return[a.__(0,[n[0]]),n[1]];case 1:if("number"==typeof t)throw er;if(t.tag)throw er;var e=or(r[0],t[0]);return[a.__(1,[e[0]]),e[1]];case 2:var i=ar(r[0],t),o=i[1];if("number"==typeof o)throw er;if(1===o.tag){var c=or(r[1],o[0]);return[a.__(2,[i[0],c[0]]),c[1]]}throw er;case 3:var f=ar(r[0],t),s=f[1];if("number"==typeof s)throw er;if(1===s.tag){var l=or(r[1],s[0]);return[a.__(3,[f[0],l[0]]),l[1]]}throw er;case 4:var m=ir(r[1],r[2],t),v=m[2];if("number"==typeof v)throw er;if(2===v.tag){var d=or(r[3],v[0]);return[a.__(4,[r[0],m[0],m[1],d[0]]),d[1]]}throw er;case 5:var g=ir(r[1],r[2],t),h=g[2];if("number"==typeof h)throw er;if(3===h.tag){var y=or(r[3],h[0]);return[a.__(5,[r[0],g[0],g[1],y[0]]),y[1]]}throw er;case 6:var p=ir(r[1],r[2],t),w=p[2];if("number"==typeof w)throw er;if(4===w.tag){var x=or(r[3],w[0]);return[a.__(6,[r[0],p[0],p[1],x[0]]),x[1]]}throw er;case 7:var k=ir(r[1],r[2],t),M=k[2];if("number"==typeof M)throw er;if(5===M.tag){var C=or(r[3],M[0]);return[a.__(7,[r[0],k[0],k[1],C[0]]),C[1]]}throw er;case 8:var S=ir(r[1],r[2],t),P=S[2];if("number"==typeof P)throw er;if(6===P.tag){var A=or(r[3],P[0]);return[a.__(8,[r[0],S[0],S[1],A[0]]),A[1]]}throw er;case 9:if("number"==typeof t)throw er;if(7===t.tag){var T=or(r[0],t[0]);return[a.__(9,[T[0]]),T[1]]}throw er;case 10:var D=or(r[0],t);return[a.__(10,[D[0]]),D[1]];case 11:var L=or(r[1],t);return[a.__(11,[r[0],L[0]]),L[1]];case 12:var N=or(r[1],t);return[a.__(12,[r[0],N[0]]),N[1]];case 13:if("number"==typeof t)throw er;if(8===t.tag){var U=t[0];if(_.caml_notequal([r[1]],[U]))throw er;var V=or(r[2],t[1]);return[a.__(13,[r[0],U,V[0]]),V[1]]}throw er;case 14:if("number"==typeof t)throw er;if(9===t.tag){var z=t[0];if(_.caml_notequal([b.erase_rel(r[1])],[b.erase_rel(z)]))throw er;var B=or(r[2],b.erase_rel(t[2]));return[a.__(14,[r[0],z,B[0]]),B[1]]}throw er;case 15:if("number"==typeof t)throw er;if(10===t.tag){var E=or(r[0],t[0]);return[a.__(15,[E[0]]),E[1]]}throw er;case 16:if("number"==typeof t)throw er;if(11===t.tag){var F=or(r[0],t[0]);return[a.__(16,[F[0]]),F[1]]}throw er;case 17:var I=or(r[1],t);return[a.__(17,[r[0],I[0]]),I[1]];case 18:var q=r[0],R=r[1],G=t;if(q.tag){var O=q[0],H=or(O[0],G),K=or(R,H[1]);return[a.__(18,[a.__(1,[[H[0],O[1]]]),K[0]]),K[1]]}var j=q[0],$=or(j[0],G),W=or(R,$[1]);return[a.__(18,[a.__(0,[[$[0],j[1]]]),W[0]]),W[1]];case 19:if("number"==typeof t)throw er;if(13===t.tag){var X=or(r[0],t[0]);return[a.__(19,[X[0]]),X[1]]}throw er;case 20:if("number"==typeof t)throw er;if(1===t.tag){var J=or(r[2],t[0]);return[a.__(20,[r[0],r[1],J[0]]),J[1]]}throw er;case 21:if("number"==typeof t)throw er;if(2===t.tag){var rr=or(r[1],t[0]);return[a.__(21,[r[0],rr[0]]),rr[1]]}throw er;case 23:var tr=r[0],nr=r[1],cr=t;if("number"==typeof tr){if(3===tr){if("number"==typeof cr)throw er;if(14===cr.tag){var fr=or(nr,cr[0]);return[a.__(23,[3,fr[0]]),fr[1]]}throw er}return ur(tr,nr,cr)}switch(0|tr.tag){case 7:return ur(a.__(7,[tr[0],tr[1]]),nr,cr);case 8:var sr=function r(t,n,e){if("number"==typeof t)return[0,or(n,e)];switch(0|t.tag){case 0:if("number"==typeof e)throw er;if(e.tag)throw er;var i=r(t[0],n,e[0]);return[a.__(0,[i[0]]),i[1]];case 1:if("number"==typeof e)throw er;if(1===e.tag){var o=r(t[0],n,e[0]);return[a.__(1,[o[0]]),o[1]]}throw er;case 2:if("number"==typeof e)throw er;if(2===e.tag){var c=r(t[0],n,e[0]);return[a.__(2,[c[0]]),c[1]]}throw er;case 3:if("number"==typeof e)throw er;if(3===e.tag){var f=r(t[0],n,e[0]);return[a.__(3,[f[0]]),f[1]]}throw er;case 4:if("number"==typeof e)throw er;if(4===e.tag){var s=r(t[0],n,e[0]);return[a.__(4,[s[0]]),s[1]]}throw er;case 5:if("number"==typeof e)throw er;if(5===e.tag){var l=r(t[0],n,e[0]);return[a.__(5,[l[0]]),l[1]]}throw er;case 6:if("number"==typeof e)throw er;if(6===e.tag){var m=r(t[0],n,e[0]);return[a.__(6,[m[0]]),m[1]]}throw er;case 7:if("number"==typeof e)throw er;if(7===e.tag){var v=r(t[0],n,e[0]);return[a.__(7,[v[0]]),v[1]]}throw er;case 8:if("number"==typeof e)throw er;if(8===e.tag){var d=e[0];if(_.caml_notequal([t[0]],[d]))throw er;var g=r(t[1],n,e[1]);return[a.__(8,[d,g[0]]),g[1]]}throw er;case 9:if("number"==typeof e)throw er;if(9===e.tag){var h=e[1],y=e[0];if(_.caml_notequal([b.erase_rel(t[0])],[b.erase_rel(y)]))throw er;if(_.caml_notequal([b.erase_rel(t[1])],[b.erase_rel(h)]))throw er;var p=Y(Z(Q(y),h));u._1(p[1],0),u._1(p[3],0);var w=r(b.erase_rel(t[2]),n,e[2]);return[a.__(9,[y,h,Q(w[0])]),w[1]]}throw er;case 10:if("number"==typeof e)throw er;if(10===e.tag){var x=r(t[0],n,e[0]);return[a.__(10,[x[0]]),x[1]]}throw er;case 11:if("number"==typeof e)throw er;if(11===e.tag){var k=r(t[0],n,e[0]);return[a.__(11,[k[0]]),k[1]]}throw er;case 12:throw er;case 13:if("number"==typeof e)throw er;if(13===e.tag){var M=r(t[0],n,e[0]);return[a.__(13,[M[0]]),M[1]]}throw er;case 14:if("number"==typeof e)throw er;if(14===e.tag){var C=r(t[0],n,e[0]);return[a.__(14,[C[0]]),C[1]]}throw er}}(tr[1],nr,cr),_r=sr[1];return[a.__(23,[a.__(8,[tr[0],sr[0]]),_r[0]]),_r[1]];default:return ur(tr,nr,cr)}case 22:case 24:throw er}}function cr(r,t){var n=or(r,t);if("number"==typeof n[1])return n[0];throw er}function fr(r,t){return cr(r,b.erase_rel(Q(t)))}function sr(r,t,n){var e=n.length,a=d.abs(t),u=t<0?0:r,o=a;if(o<=e)return n;var c=u,s=i.make(o,2===c?48:32);switch(c){case 0:f.blit(n,0,s,0,e);break;case 1:f.blit(n,0,s,o-e|0,e);break;case 2:e>0&&(43===h.get(n,0)||45===h.get(n,0)||32===h.get(n,0))?(s[0]=h.get(n,0),f.blit(n,1,s,1+(o-e|0)|0,e-1|0)):e>1&&48===h.get(n,0)&&(120===h.get(n,1)||88===h.get(n,1))?(s[1]=h.get(n,1),f.blit(n,2,s,2+(o-e|0)|0,e-2|0)):f.blit(n,0,s,o-e|0,e)}return h.bytes_to_string(s)}function _r(r,t){var n=d.abs(r),e=t.length,a=h.get(t,0),u=0;if(a>=58)if(a>=71){if(a>102||a<97)return t;u=2}else{if(!(a>=65))return t;u=2}else if(32!==a){if(!(a>=43))return t;switch(a-43|0){case 0:case 2:u=1;break;case 1:case 3:case 4:return t;case 5:if((n+2|0)>e&&e>1&&(120===h.get(t,1)||88===h.get(t,1))){var o=i.make(n+2|0,48);return o[1]=h.get(t,1),f.blit(t,2,o,4+(n-e|0)|0,e-2|0),h.bytes_to_string(o)}u=2;break;case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:u=2}}else u=1;switch(u){case 1:if((n+1|0)>e){var c=i.make(n+1|0,48);return c[0]=a,f.blit(t,1,c,2+(n-e|0)|0,e-1|0),h.bytes_to_string(c)}return t;case 2:if(n>e){var s=i.make(n,48);return f.blit(t,0,s,n-e|0,e),h.bytes_to_string(s)}return t}}function lr(r){return f.concat(f.escaped(r),['"',['"',0]])}function mr(r,t){var n;switch(r){case 0:n=["%",["d",0]];break;case 1:n=["%+",["d",0]];break;case 2:n=["% ",["d",0]];break;case 3:n=["%",["i",0]];break;case 4:n=["%+",["i",0]];break;case 5:n=["% ",["i",0]];break;case 6:n=["%",["x",0]];break;case 7:n=["%#",["x",0]];break;case 8:n=["%",["X",0]];break;case 9:n=["%#",["X",0]];break;case 10:n=["%",["o",0]];break;case 11:n=["%#",["o",0]];break;case 12:n=["%",["u",0]]}return f.concat(h.bytes_to_string(i.make(1,t)),n)}function vr(r,t){return g.caml_format_int(function(r){switch(r){case 0:return"%d";case 1:return"%+d";case 2:return"% d";case 3:return"%i";case 4:return"%+i";case 5:return"% i";case 6:return"%x";case 7:return"%#x";case 8:return"%X";case 9:return"%#X";case 10:return"%o";case 11:return"%#o";case 12:return"%u"}}(r),t)}function dr(r,t){return g.caml_int32_format(mr(r,108),t)}function gr(r,t){return g.caml_nativeint_format(mr(r,110),t)}function hr(r,t){return g.caml_int64_format(mr(r,76),t)}function yr(r,t,n){var e=d.abs(t),a=g.caml_format_float(function(r,t){if(15===r)return"%.12g";var n=d.abs(t),e=N(r),a=[0,new Array(16)];return A(a,37),G(a,r),A(a,46),T(a,""+n),A(a,e),D(a)}(r,e),n);if(15!==r)return a;var i=a.length,u=m.caml_classify_float(n);return 3!==u?u>=4?"nan":function(r){for(;;){var t=r;if(t===i)return 0;var n=h.get(a,t)-46|0;if(n>23||n<0){if(55!==n){r=t+1|0;continue}return 1}if(n>22||n<1)return 1;r=t+1|0}}(0)?a:a+".":n<0?"neg_infinity":"infinity"}function pr(r){return f.concat(e.escaped(r),["'",["'",0]])}function br(r){var t=[0,new Array(16)];return W(t,r),D(t)}function wr(r,t,n,e){for(;;){var i=e,o=n,c=r;if("number"==typeof i)return u._2(c,t,o);switch(0|i.tag){case 0:return function(r,n,e){return function(i){var u=a.__(5,[n,i]);return wr(r,t,u,e)}}(c,o,i[0]);case 1:return function(r,n,e){return function(i){var u=pr(i),o=a.__(4,[n,u]);return wr(r,t,o,e)}}(c,o,i[0]);case 2:return Mr(c,t,o,i[1],i[0],function(r){return r});case 3:return Mr(c,t,o,i[1],i[0],lr);case 4:return Cr(c,t,o,i[3],i[1],i[2],vr,i[0]);case 5:return Cr(c,t,o,i[3],i[1],i[2],dr,i[0]);case 6:return Cr(c,t,o,i[3],i[1],i[2],gr,i[0]);case 7:return Cr(c,t,o,i[3],i[1],i[2],hr,i[0]);case 8:var f=c,s=t,_=o,l=i[3],m=i[1],v=i[2],d=i[0];if("number"!=typeof m){if(m.tag){var h=m[0];return"number"==typeof v?0!==v?function(r,t,n,e,i,u){return function(o,c,f){var s=sr(u,o,yr(i,c,f));return wr(r,t,a.__(4,[n,s]),e)}}(f,s,_,l,d,h):function(r,t,n,e,i,u){return function(o,c){var f=yr(i,6,c),s=sr(u,o,f);return wr(r,t,a.__(4,[n,s]),e)}}(f,s,_,l,d,h):function(r,t,n,e,i,u,o){return function(c,f){var s=sr(u,c,yr(i,o,f));return wr(r,t,a.__(4,[n,s]),e)}}(f,s,_,l,d,h,v[0])}var y=m[1],w=m[0];return"number"==typeof v?0!==v?function(r,t,n,e,i,u,o){return function(c,f){var s=sr(u,o,yr(i,c,f));return wr(r,t,a.__(4,[n,s]),e)}}(f,s,_,l,d,w,y):function(r,t,n,e,i,u,o){return function(c){var f=yr(i,6,c),s=sr(u,o,f);return wr(r,t,a.__(4,[n,s]),e)}}(f,s,_,l,d,w,y):function(r,t,n,e,i,u,o,c){return function(f){var s=sr(u,o,yr(i,c,f));return wr(r,t,a.__(4,[n,s]),e)}}(f,s,_,l,d,w,y,v[0])}return"number"==typeof v?0!==v?function(r,t,n,e,i){return function(u,o){var c=yr(i,u,o);return wr(r,t,a.__(4,[n,c]),e)}}(f,s,_,l,d):function(r,t,n,e,i){return function(u){var o=yr(i,6,u);return wr(r,t,a.__(4,[n,o]),e)}}(f,s,_,l,d):function(r,t,n,e,i,u){return function(o){var c=yr(i,u,o);return wr(r,t,a.__(4,[n,c]),e)}}(f,s,_,l,d,v[0]);case 9:return function(r,n,e){return function(i){return wr(r,t,a.__(4,[n,i?"true":"false"]),e)}}(c,o,i[0]);case 10:e=i[0],n=a.__(7,[o]);continue;case 11:e=i[1],n=a.__(2,[o,i[0]]);continue;case 12:e=i[1],n=a.__(3,[o,i[0]]);continue;case 13:return function(r,n,e,i){return function(){return wr(r,t,a.__(4,[n,i]),e)}}(c,o,i[2],br(i[1]));case 14:var x=i[2];return function(r,n,e,a){return function(i){return wr(r,t,n,b.concat_fmt(fr(i[0],e),a))}}(c,o,i[1],x);case 15:return function(r,n,e){return function(i,o){return wr(r,t,a.__(6,[n,function(r){return u._2(i,r,o)}]),e)}}(c,o,i[0]);case 16:return function(r,n,e){return function(i){return wr(r,t,a.__(6,[n,i]),e)}}(c,o,i[0]);case 17:e=i[1],n=a.__(0,[o,i[0]]);continue;case 18:var k=i[0];if(k.tag){var M=function(r,t,n){return function(e,i){return wr(r,e,a.__(1,[t,a.__(1,[i])]),n)}}(c,o,i[1]);e=k[0][0],n=0,r=M;continue}var C=function(r,t,n){return function(e,i){return wr(r,e,a.__(1,[t,a.__(0,[i])]),n)}}(c,o,i[1]);e=k[0][0],n=0,r=C;continue;case 19:throw[p.assert_failure,["camlinternalFormat.ml",1449,4]];case 20:return function(r,n,e){return function(){return wr(r,t,e,n)}}(c,i[2],a.__(8,[o,"Printf: bad conversion %["]));case 21:return function(r,n,e){return function(i){var u=g.caml_format_int("%u",i),o=a.__(4,[n,u]);return wr(r,t,o,e)}}(c,o,i[1]);case 22:return function(r,n,e){return function(i){var u=a.__(5,[n,i]);return wr(r,t,u,e)}}(c,o,i[0]);case 23:var S=c,P=t,A=o,T=i[0],D=i[1];if("number"==typeof T){if(3===T)throw[p.assert_failure,["camlinternalFormat.ml",1517,39]];return kr(S,P,A,D)}return 8===T.tag?xr(S,P,A,T[1],D):kr(S,P,A,D);case 24:return Sr(c,t,o,i[2],i[0],u._1(i[1],0))}}}function xr(r,t,n,e,a){if("number"==typeof e)return kr(r,t,n,a);switch(0|e.tag){case 0:var i=e[0];return function(){return xr(r,t,n,i,a)};case 1:var u=e[0];return function(){return xr(r,t,n,u,a)};case 2:var o=e[0];return function(){return xr(r,t,n,o,a)};case 3:var c=e[0];return function(){return xr(r,t,n,c,a)};case 4:var f=e[0];return function(){return xr(r,t,n,f,a)};case 5:var s=e[0];return function(){return xr(r,t,n,s,a)};case 6:var _=e[0];return function(){return xr(r,t,n,_,a)};case 7:var l=e[0];return function(){return xr(r,t,n,l,a)};case 8:var m=e[1];return function(){return xr(r,t,n,m,a)};case 9:var v=e[2],d=Z(Q(e[0]),e[1]);return function(){return xr(r,t,n,b.concat_fmtty(d,v),a)};case 10:var g=e[0];return function(e,i){return xr(r,t,n,g,a)};case 11:var h=e[0];return function(){return xr(r,t,n,h,a)};case 12:var y=e[0];return function(){return xr(r,t,n,y,a)};case 13:throw[p.assert_failure,["camlinternalFormat.ml",1540,31]];case 14:throw[p.assert_failure,["camlinternalFormat.ml",1541,31]]}}function kr(r,t,n,e){return wr(r,t,a.__(8,[n,"Printf: bad conversion %_"]),e)}function Mr(r,t,n,e,i,o){if("number"==typeof i)return function(i){var c=u._1(o,i),f=a.__(4,[n,c]);return wr(r,t,f,e)};if(i.tag){var c=i[0];return function(i,f){var s=sr(c,i,u._1(o,f)),_=a.__(4,[n,s]);return wr(r,t,_,e)}}var f=i[1],s=i[0];return function(i){var c=sr(s,f,u._1(o,i)),_=a.__(4,[n,c]);return wr(r,t,_,e)}}function Cr(r,t,n,e,i,o,c,f){if("number"==typeof i){if("number"==typeof o)return 0!==o?function(i,o){var s=_r(i,u._2(c,f,o));return wr(r,t,a.__(4,[n,s]),e)}:function(i){var o=u._2(c,f,i);return wr(r,t,a.__(4,[n,o]),e)};var s=o[0];return function(i){var o=_r(s,u._2(c,f,i));return wr(r,t,a.__(4,[n,o]),e)}}if(i.tag){var _=i[0];if("number"==typeof o)return 0!==o?function(i,o,s){var l=sr(_,i,_r(o,u._2(c,f,s)));return wr(r,t,a.__(4,[n,l]),e)}:function(i,o){var s=sr(_,i,u._2(c,f,o));return wr(r,t,a.__(4,[n,s]),e)};var l=o[0];return function(i,o){var s=sr(_,i,_r(l,u._2(c,f,o)));return wr(r,t,a.__(4,[n,s]),e)}}var m=i[1],v=i[0];if("number"==typeof o)return 0!==o?function(i,o){var s=sr(v,m,_r(i,u._2(c,f,o)));return wr(r,t,a.__(4,[n,s]),e)}:function(i){var o=sr(v,m,u._2(c,f,i));return wr(r,t,a.__(4,[n,o]),e)};var d=o[0];return function(i){var o=sr(v,m,_r(d,u._2(c,f,i)));return wr(r,t,a.__(4,[n,o]),e)}}function Sr(r,t,n,e,i,o){if(i){var c=i[0];return function(a){return Sr(r,t,n,e,c,u._1(o,a))}}return wr(r,t,a.__(4,[n,o]),e)}function Pr(r,t){for(;;){var n=t,e=0;if("number"==typeof n)return 0;switch(0|n.tag){case 0:var a=H(n[1]);return Pr(r,n[0]),o.add_string(r,a);case 1:var i=n[1];if(Pr(r,n[0]),i.tag){o.add_string(r,"@["),t=i[0];continue}o.add_string(r,"@{"),t=i[0];continue;case 2:case 4:e=1;break;case 3:case 5:e=2;break;case 6:return Pr(r,n[0]),o.add_string(r,u._1(n[1],0));case 7:t=n[0];continue;case 8:throw Pr(r,n[0]),[p.invalid_argument,n[1]]}switch(e){case 1:return Pr(r,n[0]),o.add_string(r,n[1]);case 2:return Pr(r,n[0]),o.add_char(r,n[1])}}}function Ar(r){var t=o.create(256);return wr(function(r,n){Pr(t,n);var e=o.contents(t);throw[p.failure,e]},0,0,r[0])}function Tr(r){if(""===r)return[0,4];var t,n,e=r.length,i=function(){return u._1(Ar([a.__(11,["invalid box description ",a.__(3,[0,0])]),"invalid box description %S"]),r)},o=function(t){for(;;){var n=t;if(n===e)return n;var a=h.get(r,n);if(9===a)t=n+1|0;else{if(32!==a)return n;t=n+1|0}}},s=o(0),_=function(t,n){for(;;){var a=n;if(a===e)return a;var i=h.get(r,a);if(i>122||i<97)return a;n=a+1|0}}(0,s),l=f.sub(r,s,_-s|0),m=o(_),v=function(t,n){for(;;){var a=n;if(a===e)return a;var i=h.get(r,a);if(i>=48){if(i>=58)return a;n=a+1|0}else{if(45!==i)return a;n=a+1|0}}}(0,m);if(m===v)t=0;else try{t=g.caml_int_of_string(f.sub(r,m,v-m|0))}catch(r){var d=c.internalToOCamlException(r);if(d[0]!==p.failure)throw d;t=i()}switch(o(v)!==e&&i(),l){case"":case"b":n=4;break;case"h":n=0;break;case"hov":n=3;break;case"hv":n=2;break;case"v":n=1;break;default:n=i()}return[t,n]}function Dr(r,t){return"number"==typeof r?[0,t]:r.tag?[a.__(1,[r[0]]),t]:[a.__(0,[r[0],r[1]]),t]}function Lr(r,t,n){var e=function(r,t){return"number"==typeof r?0!==r?[1,t]:[0,t]:[[r[0]],t]}(t,n),i=e[1],u=e[0];return"number"==typeof r?[0,u,i]:r.tag?[a.__(1,[r[0]]),u,i]:[a.__(0,[r[0],r[1]]),u,i]}function Nr(r,t){var n=r?r[0]:1,e=function(r,n){return u._3(Ar([a.__(11,["invalid format ",a.__(3,[0,a.__(11,[": at character number ",a.__(4,[0,0,0,a.__(11,[", ",a.__(2,[0,0])])])])])]),"invalid format %S: at character number %d, %s"]),t,r,n)},o=function(r,n,e){return u._4(Ar([a.__(11,["invalid format ",a.__(3,[0,a.__(11,[": at character number ",a.__(4,[0,0,0,a.__(11,[", '",a.__(0,[a.__(11,["' without ",a.__(2,[0,0])])])])])])])]),"invalid format %S: at character number %d, '%c' without %s"]),t,r,n,e)},s=function(r,n,e){return u._4(Ar([a.__(11,["invalid format ",a.__(3,[0,a.__(11,[": at character number ",a.__(4,[0,0,0,a.__(11,[", ",a.__(2,[0,a.__(11,[" expected, read ",a.__(1,[0])])])])])])])]),"invalid format %S: at character number %d, %s expected, read %C"]),t,r,n,e)},l=function(r,t,e,a,i,u){for(;;){var o=i,c=a,f=e,s=0,_=0;if(0!==f)if(0!==c)_=2;else if(0!==o)s=1;else{if(100===u)return 1;if(105===u)return 4;s=1}else if(0!==c)if(0!==o)_=2;else{if(88===u)return 9;if(111===u)return 11;if(120===u)return 7;_=2}else if(0!==o){if(100===u)return 2;if(105===u)return 5;s=1}else{var l=u-88|0;if(l>32||l<0)s=1;else switch(l){case 0:return 8;case 12:return 0;case 17:return 3;case 23:return 10;case 29:return 12;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:s=1;break;case 32:return 6}}if(2===_){var v=0,d=u-88|0;if(d>32||d<0)s=1;else switch(d){case 0:if(n)return 9;s=1;break;case 23:if(n)return 11;s=1;break;case 12:case 17:case 29:v=3;break;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:s=1;break;case 32:if(n)return 7;s=1}if(3===v){if(n){a=0;continue}return m(r,t,u,"'#'")}}if(1===s){if(0!==f){if(0!==o){if(n){i=0;continue}return m(r,t,32,"'+'")}if(n){e=0;continue}return m(r,t,u,"'+'")}if(0!==o){if(n){i=0;continue}return m(r,t,u,"' '")}throw[p.assert_failure,["camlinternalFormat.ml",2719,28]]}}},m=function(r,n,e,i){var o=f.sub(t,r,n-r|0);return u._5(Ar([a.__(11,["invalid format ",a.__(3,[0,a.__(11,[": at character number ",a.__(4,[0,0,0,a.__(11,[", ",a.__(2,[0,a.__(11,[" is incompatible with '",a.__(0,[a.__(11,["' in sub-format ",a.__(3,[0,0])])])])])])])])])]),"invalid format %S: at character number %d, %s is incompatible with '%c' in sub-format %S"]),t,r,i,e,o)},g=function(r,n,a){for(;;){var i=a,u=r;u===n&&e(n,"unexpected end of format");var o=h.get(t,u);if(o>57||o<48)return[u,i];a=v.imul(i,10)+(o-48|0)|0,r=u+1|0}},y=function(r,n,i,u,o,c,f,s,_,l){n===i&&e(i,"unexpected end of format");var m=function(e){return D(r,n+1|0,i,o,c,f,s,_,l,e,h.get(t,n))};if("number"!=typeof _)return m(_);var v=0;if("number"==typeof l){if(0===l)return m(0);v=1}else v=1;return 1===v?m(0!==u?"number"==typeof l?a.__(1,[0]):a.__(0,[0,l[0]]):"number"==typeof l?a.__(1,[1]):a.__(0,[1,l[0]])):void 0},b=function(r,a,i,u,c,f,s,_,l){a===i&&e(i,"unexpected end of format");var m=h.get(t,a);if(46!==m)return D(r,a+1|0,i,c,f,s,_,l,0,l,m);var v=r,d=a+1|0,p=i,b=u,w=c,x=f,k=s,M=_,C=l;d===p&&e(p,"unexpected end of format");var S=function(r,t){var n=g(t,p,0);return y(v,n[0],p,r,w,x,k,M,C,[n[1]])},P=h.get(t,d),A=0,T=0;if(P>=48){if(!(P>=58))return S(b,d);A=1}else if(P>=42)switch(P-42|0){case 0:return y(v,d+1|0,p,b,w,x,k,M,C,1);case 1:case 3:T=2;break;case 2:case 4:case 5:A=1}else A=1;if(2===T){if(n)return S(b||+(45===P),d+1|0);A=1}return 1===A?n?y(v,d,p,b,w,x,k,M,C,[0]):o(d-1|0,46,"precision"):void 0},x=function(r,n,e){for(;;){var a=n;if(a===e)return S(r,a,0);var i=h.get(t,a);if(37!==i){if(64!==i){n=a+1|0;continue}var u=C(a+1|0,e);return S(r,a,u[0])}var o=M(a,e);return S(r,a,o[0])}},M=function(r,n){var a=r,i=r+1|0,u=n;return i===u&&e(u,"unexpected end of format"),95!==h.get(t,i)?L(a,i,u,0):L(a,i+1|0,u,1)},C=function(r,n){if(r===n)return[a.__(12,[64,0])];var e=h.get(t,r),i=0;if(e>=65)if(e>=94){var u=e-123|0;if(u>2||u<0)i=1;else switch(u){case 0:return z(1,r+1|0,n);case 1:i=1;break;case 2:var o=r+1|0,s=x(o,o,n);return[a.__(17,[1,s[0]])]}}else if(e>=91)switch(e-91|0){case 0:return z(0,r+1|0,n);case 1:i=1;break;case 2:var _=r+1|0,l=x(_,_,n);return[a.__(17,[0,l[0]])]}else i=1;else{if(10===e){var m=r+1|0,v=x(m,m,n);return[a.__(17,[3,v[0]])]}if(e>=32)switch(e-32|0){case 0:var d=r+1|0,g=x(d,d,n);return[a.__(17,[a.__(0,["@ ",1,0]),g[0]])];case 5:if((r+1|0)<n&&37===h.get(t,r+1|0)){var y=r+2|0,b=x(y,y,n);return[a.__(17,[6,b[0]])]}var w=x(r,r,n);return[a.__(12,[64,w[0]])];case 12:var k=r+1|0,M=x(k,k,n);return[a.__(17,[a.__(0,["@,",0,0]),M[0]])];case 14:var C=r+1|0,S=x(C,C,n);return[a.__(17,[4,S[0]])];case 27:var T,D=r+1|0,L=n;try{if(D===L||60!==h.get(t,D))throw p.not_found;var N=P(D+1|0,L),U=h.get(t,N),V=0;if(U>=48){if(U>=58)throw p.not_found;V=1}else{if(45!==U)throw p.not_found;V=1}if(1===V){var B=A(N,L),E=B[1],F=P(B[0],L),I=h.get(t,F)-45|0;if(I>12||I<0){if(17!==I)throw p.not_found;var q=f.sub(t,D-2|0,3+(F-D|0)|0);T=[F+1|0,a.__(0,[q,E,0])]}else{if(2===I||1===I)throw p.not_found;var R=A(F,L),G=P(R[0],L);if(62!==h.get(t,G))throw p.not_found;var O=f.sub(t,D-2|0,3+(G-D|0)|0);T=[G+1|0,a.__(0,[O,E,R[1]])]}}}catch(r){var H=c.internalToOCamlException(r);if(H===p.not_found)T=[D,a.__(0,["@;",1,0])];else{if(H[0]!==p.failure)throw H;T=[D,a.__(0,["@;",1,0])]}}var K=T[0],j=x(K,K,L);return[a.__(17,[T[1],j[0]])];case 28:var $,W=r+1|0,X=n;try{var Q=P(W,X),Y=h.get(t,Q),Z=0;if(Y>=48?Y>=58?$=0:Z=1:45!==Y?$=0:Z=1,1===Z){var J=A(Q,X),rr=P(J[0],X);if(62!==h.get(t,rr))throw p.not_found;var tr=f.sub(t,W-2|0,3+(rr-W|0)|0);$=[[rr+1|0,a.__(1,[tr,J[1]])]]}}catch(r){var nr=c.internalToOCamlException(r);if(nr===p.not_found)$=0;else{if(nr[0]!==p.failure)throw nr;$=0}}if($){var er=$[0],ar=er[0],ir=x(ar,ar,X);return[a.__(17,[er[1],ir[0]])]}var ur=x(W,W,X);return[a.__(17,[a.__(2,[60]),ur[0]])];case 1:case 2:case 3:case 4:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 29:case 30:i=1;break;case 31:var or=r+1|0,cr=x(or,or,n);return[a.__(17,[2,cr[0]])];case 32:var fr=r+1|0,sr=x(fr,fr,n);return[a.__(17,[5,sr[0]])]}else i=1}if(1===i){var _r=r+1|0,lr=x(_r,_r,n);return[a.__(17,[a.__(2,[e]),lr[0]])]}},S=function(r,n,e){var i=n-r|0;return 0!==i?1!==i?[a.__(11,[f.sub(t,r,i),e])]:[a.__(12,[h.get(t,r),e])]:[e]},P=function(r,n){for(;;){var a=r;if(a===n&&e(n,"unexpected end of format"),32!==h.get(t,a))return a;r=a+1|0}},A=function(r,n){r===n&&e(n,"unexpected end of format");var a=h.get(t,r);if(a>=48){if(a>=58)throw[p.assert_failure,["camlinternalFormat.ml",2624,11]];return g(r,n,0)}if(45!==a)throw[p.assert_failure,["camlinternalFormat.ml",2624,11]];(r+1|0)===n&&e(n,"unexpected end of format");var i=h.get(t,r+1|0);if(i>57||i<48)return s(r+1|0,"digit",i);var u=g(r+1|0,n,0);return[u[0],0|-u[1]]},T=function(r,n,i){for(;;){var o=r;if(o===n&&u._3(Ar([a.__(11,["invalid format ",a.__(3,[0,a.__(11,[': unclosed sub-format, expected "',a.__(12,[37,a.__(0,[a.__(11,['" at character number ',a.__(4,[0,0,0,0])])])])])])]),'invalid format %S: unclosed sub-format, expected "%%%c" at character number %d']),t,i,n),37===h.get(t,o)){if((o+1|0)===n&&e(n,"unexpected end of format"),h.get(t,o+1|0)===i)return o;var c=h.get(t,o+1|0),f=0;if(c>=95)if(c>=123)if(c>=126)f=1;else switch(c-123|0){case 0:r=T(o+2|0,n,125)+2|0;continue;case 1:f=1;break;case 2:return s(o+1|0,"character ')'",125)}else{if(!(c>=96)){(o+2|0)===n&&e(n,"unexpected end of format");var _=h.get(t,o+2|0);if(40!==_){if(123!==_){r=o+3|0;continue}r=T(o+3|0,n,125)+2|0;continue}r=T(o+3|0,n,41)+2|0;continue}f=1}else{if(40===c){r=T(o+2|0,n,41)+2|0;continue}if(41===c)return s(o+1|0,"character '}'",41);f=1}1!==f||(r=o+2|0)}else r=o+1|0}},D=function(r,i,o,c,f,s,v,d,g,y,b){var w,k=0,M=0,C=0,S=[0],P=0,A=[0],D=function(t,e){return"number"==typeof e?e:e.tag?e[0]>=2?n?a.__(1,[1]):m(r,i,t,"0"):e:e[0]>=2?n?a.__(0,[1,e[1]]):m(r,i,t,"0"):e},L=function(t,e){if("number"==typeof e)return 0;if(e.tag)return m(r,i,t,"'*'");switch(e[0]){case 0:return n?[e[1]]:m(r,i,t,"'-'");case 1:return[e[1]];case 2:return n?[e[1]]:m(r,i,t,"'0'")}},z=0,B=0,E=0;if(b>=124)B=6;else switch(b){case 33:var F=x(i,i,o);w=[a.__(10,[F[0]])];break;case 40:var I=T(i,o,41),q=I+2|0,R=x(q,q,o)[0],G=J(x(i,i,I)[0]);if(S[0]=1,v){P=1;var O=L(95,d),H=a.__(8,[O,G]);w=[a.__(23,[H,R])]}else P=1,w=[a.__(14,[L(40,d),G,R])];break;case 44:w=x(i,i,o);break;case 37:case 64:B=4;break;case 67:var K=x(i,i,o)[0];S[0]=1,w=v?[a.__(23,[1,K])]:[a.__(1,[K])];break;case 78:var j=x(i,i,o)[0];if(S[0]=1,v){var $=a.__(10,[2]);w=[a.__(23,[$,j])]}else w=[a.__(21,[2,j])];break;case 83:P=1;var W=D(b,y),X=x(i,i,o)[0];if(S[0]=1,v){P=1;var Q=a.__(1,[L(95,y)]);w=[a.__(23,[Q,X])]}else{var Y=Dr(W,X);w=[a.__(3,[Y[0],Y[1]])]}break;case 91:var Z=V(i,o),rr=Z[1],tr=Z[0],nr=x(tr,tr,o)[0];if(S[0]=1,v){P=1;var er=L(95,d),ar=a.__(9,[er,rr]);w=[a.__(23,[ar,nr])]}else P=1,w=[a.__(20,[L(91,d),rr,nr])];break;case 32:case 35:case 43:case 45:case 95:B=5;break;case 97:var ir=x(i,i,o);w=[a.__(15,[ir[0]])];break;case 66:case 98:B=3;break;case 99:var ur=function(r){return S[0]=1,v?[a.__(23,[0,r])]:[a.__(0,[r])]},or=x(i,i,o)[0];P=1;var cr=L(99,d);w=cr?0!==cr[0]?n?ur(or):e(i,"non-zero widths are unsupported for %c conversions"):function(r){return S[0]=1,v?[a.__(23,[4,r])]:[a.__(22,[r])]}(or):ur(or);break;case 69:case 70:case 71:case 101:case 102:case 103:B=2;break;case 76:case 108:case 110:E=8;break;case 114:var fr=x(i,i,o)[0];S[0]=1,w=v?[a.__(23,[3,fr])]:[a.__(19,[fr])];break;case 115:P=1;var sr=D(b,y),_r=x(i,i,o)[0];if(S[0]=1,v){P=1;var lr=a.__(0,[L(95,y)]);w=[a.__(23,[lr,_r])]}else{var mr=Dr(sr,_r);w=[a.__(2,[mr[0],mr[1]])]}break;case 116:var vr=x(i,i,o);w=[a.__(16,[vr[0]])];break;case 88:case 100:case 105:case 111:case 117:case 120:E=7;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 34:case 36:case 38:case 39:case 41:case 42:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 58:case 59:case 60:case 61:case 62:case 63:case 65:case 68:case 72:case 73:case 74:case 75:case 77:case 79:case 80:case 81:case 82:case 84:case 85:case 86:case 87:case 89:case 90:case 92:case 93:case 94:case 96:case 104:case 106:case 107:case 109:case 112:case 113:case 118:case 119:case 121:case 122:B=6;break;case 123:var dr=T(i,o,125),gr=x(i,i,dr),hr=dr+2|0,yr=x(hr,hr,o)[0],pr=J(gr[0]);if(S[0]=1,v){P=1;var br=L(95,d),wr=a.__(7,[br,pr]);w=[a.__(23,[wr,yr])]}else P=1,w=[a.__(13,[L(123,d),pr,yr])]}switch(E){case 7:k=1,M=1,C=1;var xr=l(r,i,c,f,s,b),kr=x(i,i,o)[0];if(S[0]=1,v){P=1;var Mr=L(95,d),Cr=a.__(2,[xr,Mr]);w=[a.__(23,[Cr,kr])]}else{var Sr;P=1,A[0]=1;var Pr=0;"number"==typeof g&&0===g?Sr=d:Pr=9,9===Pr&&(Sr="number"==typeof d?0:d.tag?d[0]>=2?n?a.__(1,[1]):m(r,i,48,"precision"):d:d[0]>=2?n?a.__(0,[1,d[1]]):m(r,i,48,"precision"):d);var Tr=Lr(Sr,(A[0]=1,g),kr);w=[a.__(4,[xr,Tr[0],Tr[1],Tr[2]])]}break;case 8:if(i!==o&&N(h.get(t,i)))B=6;else{var Nr=x(i,i,o)[0],Ur=U(b);if(S[0]=1,v){var Vr=a.__(10,[Ur]);w=[a.__(23,[Vr,Nr])]}else w=[a.__(21,[Ur,Nr])]}}switch(B){case 2:k=1,C=1;var zr=function(r,t,e,a,i){for(;;){var u=a;if(0!==e){if(0!==u){if(n){a=0;continue}return m(r,t,32,"'+'")}var o=0;if(i>=72){var c=i-101|0;if(c>2||c<0)o=1;else switch(c){case 0:return 4;case 1:return 1;case 2:return 10}}else if(i>=69)switch(i-69|0){case 0:return 7;case 1:o=1;break;case 2:return 13}else o=1;if(1===o){if(n){e=0;continue}return m(r,t,i,"'+'")}}else if(0!==u){var f=0;if(i>=72){var s=i-101|0;if(s>2||s<0)f=1;else switch(s){case 0:return 5;case 1:return 2;case 2:return 11}}else if(i>=69)switch(i-69|0){case 0:return 8;case 1:f=1;break;case 2:return 14}else f=1;if(1===f){if(n){a=0;continue}return m(r,t,i,"' '")}}else if(i>=72){var _=i-101|0;if(_>2||_<0)throw[p.assert_failure,["camlinternalFormat.ml",2747,25]];switch(_){case 0:return 3;case 1:return 0;case 2:return 9}}else{if(!(i>=69))throw[p.assert_failure,["camlinternalFormat.ml",2747,25]];switch(i-69|0){case 0:return 6;case 1:return 15;case 2:return 12}}}}(r,i,c,s,b),Br=x(i,i,o)[0];if(S[0]=1,v){P=1;var Er=L(95,d),Fr=(A[0]=1,"number"==typeof g?0!==g?m(r,i,95,"'*'"):0:[g[0]]),Ir=a.__(6,[Er,Fr]);w=[a.__(23,[Ir,Br])]}else{P=1;var qr=Lr(d,(A[0]=1,g),Br);w=[a.__(8,[zr,qr[0],qr[1],qr[2]])]}break;case 3:var Rr=x(i,i,o)[0];S[0]=1,w=v?[a.__(23,[2,Rr])]:[a.__(9,[Rr])];break;case 4:var Gr=x(i,i,o);w=[a.__(12,[b,Gr[0]])];break;case 5:w=u._3(Ar([a.__(11,["invalid format ",a.__(3,[0,a.__(11,[": at character number ",a.__(4,[0,0,0,a.__(11,[", flag ",a.__(1,[a.__(11,[" is only allowed after the '",a.__(12,[37,a.__(11,["', before padding and precision",0])])])])])])])])]),"invalid format %S: at character number %d, flag %C is only allowed after the '%%', before padding and precision"]),t,r,b);break;case 6:if(b>=108)if(b>=111)z=1;else switch(b-108|0){case 0:k=1,M=1,C=1;var Or=l(r,i+1|0,c,f,s,h.get(t,i)),Hr=i+1|0,Kr=x(Hr,Hr,o)[0];if(S[0]=1,v){P=1;var jr=L(95,d),$r=a.__(3,[Or,jr]);w=[a.__(23,[$r,Kr])]}else{P=1;var Wr=Lr(d,(A[0]=1,g),Kr);w=[a.__(5,[Or,Wr[0],Wr[1],Wr[2]])]}break;case 1:z=1;break;case 2:k=1,M=1,C=1;var Xr=l(r,i+1|0,c,f,s,h.get(t,i)),Qr=i+1|0,Yr=x(Qr,Qr,o)[0];if(S[0]=1,v){P=1;var Zr=L(95,d),Jr=a.__(4,[Xr,Zr]);w=[a.__(23,[Jr,Yr])]}else{P=1;var rt=Lr(d,(A[0]=1,g),Yr);w=[a.__(6,[Xr,rt[0],rt[1],rt[2]])]}}else if(76!==b)z=1;else{k=1,M=1,C=1;var tt=l(r,i+1|0,c,f,s,h.get(t,i)),nt=i+1|0,et=x(nt,nt,o)[0];if(S[0]=1,v){P=1;var at=L(95,d),it=a.__(5,[tt,at]);w=[a.__(23,[it,et])]}else{P=1;var ut=Lr(d,(A[0]=1,g),et);w=[a.__(7,[tt,ut[0],ut[1],ut[2]])]}}}if(1===z&&(w=u._3(Ar([a.__(11,["invalid format ",a.__(3,[0,a.__(11,[": at character number ",a.__(4,[0,0,0,a.__(11,[', invalid conversion "',a.__(12,[37,a.__(0,[a.__(12,[34,0])])])])])])])]),'invalid format %S: at character number %d, invalid conversion "%%%c"']),t,i-1|0,b)),n||(!k&&c&&m(r,i,b,"'+'"),!M&&f&&m(r,i,b,"'#'"),!C&&s&&m(r,i,b,"' '"),!P&&_.caml_notequal([d],[0])&&m(r,i,b,"`padding'"),!A[0]&&_.caml_notequal([g],[0])&&m(r,i,v?95:b,"`precision'"),v&&c&&m(r,i,95,"'+'")),!S[0]&&v){var ot=0;b>=38?44!==b&&64!==b?ot=1:n||(ot=1):33!==b?b>=37&&n||(ot=1):n||(ot=1),1===ot&&m(r,i,b,"'_'")}return w},L=function(r,i,c,f){for(var s=[0],_=[0],l=[0],v=[0],d=[0],y=function(r,e){return e[0]&&!n&&u._3(Ar([a.__(11,["invalid format ",a.__(3,[0,a.__(11,[": at character number ",a.__(4,[0,0,0,a.__(11,[", duplicate flag ",a.__(1,[0])])])])])]),"invalid format %S: at character number %d, duplicate flag %C"]),t,r,h.get(t,r)),e[0]=1,0},p=i;;){var w=p;w===c&&e(c,"unexpected end of format");var x=0,k=h.get(t,w)-32|0;if(k>16||k<0)x=1;else switch(k){case 0:y(w,v),p=w+1|0;continue;case 3:y(w,d),p=w+1|0;continue;case 11:y(w,l),p=w+1|0;continue;case 13:y(w,_),p=w+1|0;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 14:case 15:x=1;break;case 16:y(w,s),p=w+1|0;continue}if(1===x){var M=r,C=w,S=c,P=s[0],A=_[0],T=l[0],D=d[0],L=v[0],N=f;C===S&&e(S,"unexpected end of format");var U=0!==P?0!==A?n?0:m(M,C,45,"0"):2:0!==A?0:1,V=h.get(t,C),z=0;if(V>=48){if(!(V>=58)){var B=g(C,S,0);return b(M,B[0],S,A,T,D,L,N,a.__(0,[U,B[1]]))}z=1}else{if(42===V)return b(M,C+1|0,S,A,T,D,L,N,a.__(1,[U]));z=1}if(1===z)switch(U){case 0:return n||o(C-1|0,45,"padding"),b(M,C,S,A,T,D,L,N,0);case 1:return b(M,C,S,A,T,D,L,N,0);case 2:return b(M,C,S,A,T,D,L,N,a.__(0,[1,0]))}}}},N=function(r){var t=r-88|0;if(t>32||t<0)return 0;switch(t){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:return 0;case 0:case 12:case 17:case 23:case 29:case 32:return 1}},U=function(r){var t=0;if(r>=108)if(r>=111)t=1;else switch(r-108|0){case 0:return 0;case 1:t=1;break;case 2:return 1}else{if(76===r)return 2;t=1}if(1===t)throw[p.assert_failure,["camlinternalFormat.ml",2686,34]]},V=function(r,n){r===n&&e(n,"unexpected end of format");var o=i.make(32,0),c=function(r,t){for(var n=r;n<=t;++n)w(o,d.char_of_int(n));return 0},f=function(r){return u._2(Ar([a.__(11,["invalid format ",a.__(3,[0,a.__(11,[": '",a.__(12,[37,a.__(11,["' alone is not accepted in character sets, use ",a.__(12,[37,a.__(12,[37,a.__(11,[" instead at position ",a.__(4,[0,0,0,a.__(12,[46,0])])])])])])])])])]),"invalid format %S: '%%' alone is not accepted in character sets, use %%%% instead at position %d."]),t,r)},s=function(r,n,a){for(;;){var i=a,u=r;u===n&&e(n,"unexpected end of format");var s=h.get(t,u),l=0,m=0;if(s>=46)if(64!==s){if(93===s)return w(o,i),u+1|0;l=1}else m=2;else if(37!==s)if(s>=45){var v=u+1|0,d=n,g=i;v===d&&e(d,"unexpected end of format");var y=h.get(t,v);if(37!==y)return 93!==y?(c(g,y),_(v+1|0,d)):(w(o,g),w(o,45),v+1|0);(v+1|0)===d&&e(d,"unexpected end of format");var p=h.get(t,v+1|0),b=0;if(37!==p){if(64!==p)return f(v);b=1}else b=1;if(1===b)return c(g,p),_(v+2|0,d)}else l=1;else m=2;if(2===m){if(37===i)return w(o,s),_(u+1|0,n);l=1}1!==l||(37===i&&f(u),w(o,i),a=s,r=u+1|0)}},_=function(r,n){for(;;){var a=r;a===n&&e(n,"unexpected end of format");var i=h.get(t,a);if(45!==i)return 93!==i?s(a+1|0,n,i):a+1|0;w(o,45),r=a+1|0}};r===n&&e(n,"unexpected end of format");var l=94!==h.get(t,r)?[r,0]:[r+1|0,1],m=function(r,n){r===n&&e(n,"unexpected end of format");var a=h.get(t,r);return s(r+1|0,n,a)}(l[0],n),v=i.to_string(o);return[m,l[1]?k(v):v]},z=function(r,n,e){try{if(n===e)throw p.not_found;if(60!==h.get(t,n))throw p.not_found;var i=f.index_from(t,n+1|0,62);if(i>=e)throw p.not_found;var u=f.sub(t,n,1+(i-n|0)|0),o=i+1|0,s=x(o,o,e),_=x(n,n,i+1|0)[0],l=[_,u],m=r?a.__(0,[l]):(function(r){if("number"==typeof r)return 0;if(11!==r.tag)return 0;if("number"!=typeof r[1])return 0;try{Tr(r[0])}catch(r){var t=c.internalToOCamlException(r);if(t[0]===p.failure)return 0;throw t}}(_),a.__(1,[l]));return[a.__(18,[m,s[0]])]}catch(t){if(t===p.not_found){var v=x(n,n,e),d=[0,""],g=r?a.__(0,[d]):a.__(1,[d]);return[a.__(18,[g,v[0]])]}throw t}};return x(0,0,t.length)}t.is_in_char_set=M,t.rev_char_set=k,t.create_char_set=function(){return i.make(32,0)},t.add_in_char_set=w,t.freeze_char_set=x,t.param_format_of_ignored_format=S,t.make_printf=wr,t.output_acc=function r(t,n){for(;;){var e=n,a=0;if("number"==typeof e)return 0;switch(0|e.tag){case 0:var i=H(e[1]);return r(t,e[0]),d.output_string(t,i);case 1:var o=e[1];if(r(t,e[0]),o.tag){d.output_string(t,"@["),n=o[0];continue}d.output_string(t,"@{"),n=o[0];continue;case 2:case 4:a=1;break;case 3:case 5:a=2;break;case 6:return r(t,e[0]),u._1(e[1],t);case 7:return r(t,e[0]),s.caml_ml_flush(t);case 8:throw r(t,e[0]),[p.invalid_argument,e[1]]}switch(a){case 1:return r(t,e[0]),d.output_string(t,e[1]);case 2:return r(t,e[0]),s.caml_ml_output_char(t,e[1])}}},t.bufput_acc=function r(t,n){for(;;){var e=n,a=0;if("number"==typeof e)return 0;switch(0|e.tag){case 0:var i=H(e[1]);return r(t,e[0]),o.add_string(t,i);case 1:var c=e[1];if(r(t,e[0]),c.tag){o.add_string(t,"@["),n=c[0];continue}o.add_string(t,"@{"),n=c[0];continue;case 2:case 4:a=1;break;case 3:case 5:a=2;break;case 6:return r(t,e[0]),u._1(e[1],t);case 7:n=e[0];continue;case 8:throw r(t,e[0]),[p.invalid_argument,e[1]]}switch(a){case 1:return r(t,e[0]),o.add_string(t,e[1]);case 2:return r(t,e[0]),o.add_char(t,e[1])}}},t.strput_acc=Pr,t.type_format=cr,t.fmt_ebb_of_string=Nr,t.format_of_string_fmtty=function(r,t){var n=Nr(0,r);try{return[cr(n[0],t),r]}catch(n){if(n===er)return u._2(Ar([a.__(11,["bad input: format type mismatch between ",a.__(3,[0,a.__(11,[" and ",a.__(3,[0,0])])])]),"bad input: format type mismatch between %S and %S"]),r,br(t));throw n}},t.format_of_string_format=function(r,t){var n=Nr(0,r);try{return[cr(n[0],J(t[0])),r]}catch(n){if(n===er)return u._2(Ar([a.__(11,["bad input: format type mismatch between ",a.__(3,[0,a.__(11,[" and ",a.__(3,[0,0])])])]),"bad input: format type mismatch between %S and %S"]),r,t[1]);throw n}},t.char_of_iconv=L,t.string_of_formatting_lit=H,t.string_of_formatting_gen=K,t.string_of_fmtty=br,t.string_of_fmt=function(r){var t=[0,new Array(16)];return function(r,t){for(var n=t,e=0;;){var a=e,i=n;if("number"==typeof i)return 0;switch(0|i.tag){case 0:A(r,37),z(r,a),A(r,99),e=0,n=i[0];continue;case 1:A(r,37),z(r,a),A(r,67),e=0,n=i[0];continue;case 2:A(r,37),z(r,a),E(r,i[0]),A(r,115),e=0,n=i[1];continue;case 3:A(r,37),z(r,a),E(r,i[0]),A(r,83),e=0,n=i[1];continue;case 4:q(r,a,i[0],i[1],i[2]),e=0,n=i[3];continue;case 5:R(r,a,i[0],i[1],i[2],108),e=0,n=i[3];continue;case 6:R(r,a,i[0],i[1],i[2],110),e=0,n=i[3];continue;case 7:R(r,a,i[0],i[1],i[2],76),e=0,n=i[3];continue;case 8:O(r,a,i[0],i[1],i[2]),e=0,n=i[3];continue;case 9:A(r,37),z(r,a),A(r,66),e=0,n=i[0];continue;case 10:T(r,"%!"),n=i[0];continue;case 11:$(r,i[0]),n=i[1];continue;case 12:j(r,i[0]),n=i[1];continue;case 13:A(r,37),z(r,a),B(r,i[0]),A(r,123),W(r,i[1]),A(r,37),A(r,125),e=0,n=i[2];continue;case 14:A(r,37),z(r,a),B(r,i[0]),A(r,40),W(r,i[1]),A(r,37),A(r,41),e=0,n=i[2];continue;case 15:A(r,37),z(r,a),A(r,97),e=0,n=i[0];continue;case 16:A(r,37),z(r,a),A(r,116),e=0,n=i[0];continue;case 17:$(r,H(i[0])),n=i[1];continue;case 18:$(r,"@{"),$(r,K(i[0])),n=i[1];continue;case 19:A(r,37),z(r,a),A(r,114),e=0,n=i[0];continue;case 20:A(r,37),z(r,a),B(r,i[0]),V(r,i[1]),e=0,n=i[2];continue;case 21:A(r,37),z(r,a),A(r,U(i[0])),e=0,n=i[1];continue;case 22:A(r,37),z(r,a),$(r,"0c"),e=0,n=i[0];continue;case 23:e=1,n=S(i[0],i[1])[0];continue;case 24:for(var u=1,o=X(i[0]);u<=o;++u)A(r,37),z(r,a),A(r,63);e=0,n=i[2];continue}}}(t,r),D(t)},t.open_box_of_string=Tr,t.symm=Q,t.trans=Z,t.recast=fr},function(r,t,n){"use strict";var e=n(0),a=n(53),i=n(1),u=n(116);function o(r,t,n){return u.make_printf(function(t,n){return u.output_acc(t,n),e._1(r,t)},t,0,n[0])}function c(r,t,n){return u.make_printf(function(t,n){return u.bufput_acc(t,n),e._1(r,t)},t,0,n[0])}function f(r,t,n){return u.make_printf(function(t,n){return e._1(r,t)},t,0,n[0])}function s(r,t){return o(function(){return 0},r,t)}function _(r,t){return u.make_printf(function(t,n){var i=a.create(64);return u.strput_acc(i,n),e._1(r,a.contents(i))},0,0,t[0])}var l=_;t.fprintf=s,t.printf=function(r){return s(i.stdout,r)},t.eprintf=function(r){return s(i.stderr,r)},t.sprintf=function(r){return _(function(r){return r},r)},t.bprintf=function(r,t){return c(function(){return 0},r,t)},t.ifprintf=function(r,t){return f(function(){return 0},r,t)},t.kfprintf=o,t.ikfprintf=f,t.ksprintf=_,t.kbprintf=c,t.kprintf=l},function(r,t,n){"use strict";var e=n(10);t.concat_fmtty=function r(t,n){if("number"==typeof t)return n;switch(0|t.tag){case 0:return e.__(0,[r(t[0],n)]);case 1:return e.__(1,[r(t[0],n)]);case 2:return e.__(2,[r(t[0],n)]);case 3:return e.__(3,[r(t[0],n)]);case 4:return e.__(4,[r(t[0],n)]);case 5:return e.__(5,[r(t[0],n)]);case 6:return e.__(6,[r(t[0],n)]);case 7:return e.__(7,[r(t[0],n)]);case 8:return e.__(8,[t[0],r(t[1],n)]);case 9:return e.__(9,[t[0],t[1],r(t[2],n)]);case 10:return e.__(10,[r(t[0],n)]);case 11:return e.__(11,[r(t[0],n)]);case 12:return e.__(12,[r(t[0],n)]);case 13:return e.__(13,[r(t[0],n)]);case 14:return e.__(14,[r(t[0],n)])}},t.erase_rel=function r(t){if("number"==typeof t)return 0;switch(0|t.tag){case 0:return e.__(0,[r(t[0])]);case 1:return e.__(1,[r(t[0])]);case 2:return e.__(2,[r(t[0])]);case 3:return e.__(3,[r(t[0])]);case 4:return e.__(4,[r(t[0])]);case 5:return e.__(5,[r(t[0])]);case 6:return e.__(6,[r(t[0])]);case 7:return e.__(7,[r(t[0])]);case 8:return e.__(8,[t[0],r(t[1])]);case 9:var n=t[0];return e.__(9,[n,n,r(t[2])]);case 10:return e.__(10,[r(t[0])]);case 11:return e.__(11,[r(t[0])]);case 12:return e.__(12,[r(t[0])]);case 13:return e.__(13,[r(t[0])]);case 14:return e.__(14,[r(t[0])])}},t.concat_fmt=function r(t,n){if("number"==typeof t)return n;switch(0|t.tag){case 0:return e.__(0,[r(t[0],n)]);case 1:return e.__(1,[r(t[0],n)]);case 2:return e.__(2,[t[0],r(t[1],n)]);case 3:return e.__(3,[t[0],r(t[1],n)]);case 4:return e.__(4,[t[0],t[1],t[2],r(t[3],n)]);case 5:return e.__(5,[t[0],t[1],t[2],r(t[3],n)]);case 6:return e.__(6,[t[0],t[1],t[2],r(t[3],n)]);case 7:return e.__(7,[t[0],t[1],t[2],r(t[3],n)]);case 8:return e.__(8,[t[0],t[1],t[2],r(t[3],n)]);case 9:return e.__(9,[r(t[0],n)]);case 10:return e.__(10,[r(t[0],n)]);case 11:return e.__(11,[t[0],r(t[1],n)]);case 12:return e.__(12,[t[0],r(t[1],n)]);case 13:return e.__(13,[t[0],t[1],r(t[2],n)]);case 14:return e.__(14,[t[0],t[1],r(t[2],n)]);case 15:return e.__(15,[r(t[0],n)]);case 16:return e.__(16,[r(t[0],n)]);case 17:return e.__(17,[t[0],r(t[1],n)]);case 18:return e.__(18,[t[0],r(t[1],n)]);case 19:return e.__(19,[r(t[0],n)]);case 20:return e.__(20,[t[0],t[1],r(t[2],n)]);case 21:return e.__(21,[t[0],r(t[1],n)]);case 22:return e.__(22,[r(t[0],n)]);case 23:return e.__(23,[t[0],r(t[1],n)]);case 24:return e.__(24,[t[0],t[1],r(t[2],n)])}}},function(r,t,n){"use strict";(function(r){var e=n(11),a=n(5),i=["",function(t,n){var e=n.length-1|0;return void 0!==r&&r.stdout&&r.stdout.write?r.stdout.write(n):"\n"===n[e]?(console.log(n.slice(0,e)),0):(console.log(n),0)}],u=["",function(r,t){var n=t.length-1|0;return"\n"===t[n]?(console.log(t.slice(0,n)),0):(console.log(t),0)}];function o(r){return""!==r[0]?(e._2(r[1],r,r[0]),r[0]="",0):0}function c(t,n,e,a){var u=0===e&&a===n.length?n:n.slice(e,a);if(void 0!==r&&r.stdout&&r.stdout.write&&t===i)return r.stdout.write(u);var c=u.lastIndexOf("\n");return c<0?(t[0]=t[0]+u,0):(t[0]=t[0]+u.slice(0,c+1|0),o(t),t[0]=t[0]+u.slice(c+1|0),0)}t.$caret=function(r,t){return r+t},t.stdin=void 0,t.stdout=i,t.stderr=u,t.caml_ml_open_descriptor_in=function(){throw[a.failure,"caml_ml_open_descriptor_in not implemented"]},t.caml_ml_open_descriptor_out=function(){throw[a.failure,"caml_ml_open_descriptor_out not implemented"]},t.caml_ml_flush=o,t.node_std_output=function(t){return void 0!==r&&r.stdout&&(r.stdout.write(t),!0)},t.caml_ml_output=c,t.caml_ml_output_char=function(r,t){return c(r,String.fromCharCode(t),0,1)},t.caml_ml_input=function(r,t,n,e){throw[a.failure,"caml_ml_input ic not implemented"]},t.caml_ml_input_char=function(){throw[a.failure,"caml_ml_input_char not implemnted"]},t.caml_ml_out_channels_list=function(){return[i,[u,0]]}}).call(this,n(36))},function(r,t,n){"use strict";t.keycodeMap=function(r){var t=r-8|0;if(t>214||t<0)return 65;switch(t){case 0:return 0;case 1:return 1;case 5:return 2;case 8:return 56;case 9:return 55;case 10:return 57;case 12:return 63;case 19:return 3;case 24:return 4;case 29:return 52;case 30:return 54;case 31:return 51;case 32:return 53;case 40:return 10;case 41:return 11;case 42:return 12;case 43:return 13;case 44:return 14;case 45:return 15;case 46:return 16;case 47:return 17;case 48:return 18;case 49:return 19;case 57:return 25;case 58:return 26;case 59:return 27;case 60:return 28;case 61:return 29;case 62:return 30;case 63:return 31;case 64:return 32;case 65:return 33;case 66:return 34;case 67:return 35;case 68:return 36;case 69:return 37;case 70:return 38;case 71:return 39;case 72:return 40;case 73:return 41;case 74:return 42;case 75:return 43;case 76:return 44;case 77:return 45;case 78:return 46;case 79:return 47;case 80:return 48;case 81:return 49;case 82:return 50;case 83:return 58;case 85:return 62;case 178:return 20;case 179:return 21;case 180:return 6;case 181:return 7;case 182:return 8;case 183:return 9;case 184:return 64;case 2:case 3:case 4:case 6:case 7:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 20:case 21:case 22:case 23:case 25:case 26:case 27:case 28:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 84:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:case 124:case 125:case 126:case 127:case 128:case 129:case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 137:case 138:case 139:case 140:case 141:case 142:case 143:case 144:case 145:case 146:case 147:case 148:case 149:case 150:case 151:case 152:case 153:case 154:case 155:case 156:case 157:case 158:case 159:case 160:case 161:case 162:case 163:case 164:case 165:case 166:case 167:case 168:case 169:case 170:case 171:case 172:case 173:case 174:case 175:case 176:case 177:case 185:case 186:case 187:case 188:case 189:case 190:case 191:case 192:case 193:case 194:case 195:case 196:case 197:case 198:case 199:case 200:case 201:case 202:case 203:case 204:case 205:case 206:case 207:case 208:case 209:case 210:return 65;case 211:return 22;case 212:return 23;case 213:return 24;case 214:return 5}}},function(r,t,n){"use strict";var e=n(3),a=n(13),i=n(57),u=n(27),o=n(89),c=n(33),f=n(10),s=n(19),_=n(23),l=n(51),m=n(4),v=n(31),d=n(32),g=n(85),h=n(84),y=n(83),p=n(82),b=n(81),w=n(48),x=n(80),k=n(47),M=n(44),C=n(74),S=n(73),P=n(45),A=n(72),T=n(71),D=n(70),L=n(17),N=n(14),U=n(15),V=n(69),z=n(68),B=n(67),E=n(65);function F(){return 0}function I(){var r=m.UMat3f[0](0),t=m.UVec3f[0](0);return[m.SVertexObject[1]([1],0),r,a.Vec2[6](0),t]}function q(r){var t=_.Directional[1](f.__(0,[a.Vec3[1](.4,.3,.3)]),0,0,0,0,0),n=_.PointLight[1](f.__(0,[d.pointLight]),0,0,0,[12],0);return _.ProgramLight[1](t,[n,0],r)}function R(r){var t=s.Hsl[5](s.fromFloats(.14,.09,.2)),n=s.Hsl[0](t);s.Hsl[1](n,20);var e=s.Hsl[0](n);return s.Hsl[4](e,.2),m.UVec3f[6](r[15],s.toVec3(s.Hsl[6](t))),m.UVec3f[6](r[16],s.toVec3(s.Hsl[6](n))),m.UVec3f[6](r[17],s.toVec3(s.Hsl[6](e))),r}function G(){var r=m.SVertexObject[1]([1],0),t=m.SVertexObject[1]([1],0),n=m.SVertexObject[0](e.VertexBuffer[0]([],[["position",2],[["fromDrop",0],0]],1),[e.IndexBuffer[0]([],1)]),a=L.caml_make_vect(N.imul(d.tileRows,d.tileCols),0),u=m.SceneTex[1](0,0,e.Texture[0](f.__(1,[[a],d.tileCols,d.tileRows]),0,1)),o=I(),c=m.UVec3f[0](0),s=i.setup(a),l=q(v.make(d.camera)),g=m.UVec4f[0](0),h=m.UVec3f[0](0),y=_.PointLight[1](f.__(1,[h]),[f.__(1,[o[3]])],0,[.4],[0],0),p=[l[0],[y,l[1]],l[2]],b=m.UVec3f[0](0),w=m.UVec3f[0](0),x=m.UVec3f[0](0);return R([a,0,k.FontLayout[0](P.make([1],0)),u,o,g,[I(),I(),I()],I(),r,n,c,t,l,h,p,b,w,x,s,m.UFloat[1](0)])}function O(r){var t=M.makeNode(d.tileCols,d.tileRows,r[12],[2],0,0,["sdfTiles"],0,0,0,0),n=C.makeNode(r[8]),e=S.makeNode(r[9]),a=E.makeNode(r[3]),i=T.makeNode(r[3],t),u=g.makeNode(r[4],t),o=B.makeNode(r[16],r[17],r[3],a,n,e,r[10],t,r[4],r[5],r[19]),c=A.makeNode(r[11]);return y.stacked(["boardLayout"],0,[f.__(3,[d.tileCols/d.tileRows])],0,0,0,0,0,0,0,0,[o,[i,[u,[c,0]]]])}function H(r){var t=h.AreaBetweenQuads[0](h.Quad[0](h.Point[0](-1,-.45,0),h.Point[0](1,-.7,0),h.Point[0](1,1,0),h.Point[0](-1,1,0)),h.Quad[0](h.Point[0](-.7,-.287,.5),h.Point[0](.8,-.34,.5),h.Point[0](.8,1,.5),h.Point[0](-.7,1,.5)));return y.stacked(0,0,[f.__(0,[f.__(0,[.22]),f.__(0,[1])])],0,0,0,0,[0],0,0,0,[p.make(h.AreaBetweenQuads[2](t,0,0),[f.__(0,[f.__(0,[1]),f.__(0,[.6])])],r[14],0),[V.makeNode(y.vertical(0,0,0,[f.__(0,[.09])],[f.__(2,[f.__(0,[0]),f.__(0,[0]),f.__(0,[0]),f.__(0,[.025])])],0,0,0,[0],0,0,[x.makeSimpleNode("HOLD","digitalt",r[2],[.27],0,[1],0,0,0,[.7],0,0),[z.makeNode(r[7],r[12]),0]]),[1],[1],[f.__(0,[f.__(0,[1]),f.__(0,[.6])])],0),0]])}function K(r){var t=h.AreaBetweenQuads[0](h.Quad[0](h.Point[0](-1,-.95,0),h.Point[0](1,-.7,0),h.Point[0](1,1,0),h.Point[0](-1,1,0)),h.Quad[0](h.Point[0](-.7,-.54,.5),h.Point[0](.8,-.5,.5),h.Point[0](.8,1,.5),h.Point[0](-.7,1,.5)));return y.stacked(0,0,[f.__(0,[f.__(0,[.22]),f.__(0,[1])])],0,0,0,0,[0],0,0,0,[p.make(h.AreaBetweenQuads[2](t,0,0),[f.__(0,[f.__(0,[1]),f.__(0,[.6])])],r[14],0),[V.makeNode(y.vertical(["nextElements"],0,0,[f.__(0,[.09])],[f.__(2,[f.__(0,[0]),f.__(0,[0]),f.__(0,[0]),f.__(0,[.025])])],0,0,0,[0],0,0,[x.makeSimpleNode("NEXT","digitalt",r[2],[.27],0,[1],0,["next"],0,[.7],0,0),[z.makeNode(L.caml_array_get(r[6],0),r[12]),[z.makeNode(L.caml_array_get(r[6],1),r[12]),[z.makeNode(L.caml_array_get(r[6],2),r[12]),0]]]]),[1],[1],[f.__(0,[f.__(0,[1]),f.__(0,[.6])])],0),0]])}function j(r){var t=k.block([1],0,["digitalt"],[.25],[s.fromFloats(1,1,1)],0,0,0,[k.styledText(0,0,[L.caml_array_get(i.colors,2)],0,"V"),[k.styledText(0,0,[L.caml_array_get(i.colors,3)],0,"i"),[k.styledText(0,0,[L.caml_array_get(i.colors,4)],0,"m"),[k.styledText(0,0,[L.caml_array_get(i.colors,5)],0,"t"),[k.styledText(0,0,[L.caml_array_get(i.colors,6)],0,"r"),[k.styledText(0,0,[L.caml_array_get(i.colors,7)],0,"i"),[k.styledText(0,0,[L.caml_array_get(i.colors,8)],0,"s"),[k.block(0,0,0,0,0,0,0,0,[k.styled(0,[.08],0,0,0,0,[k.text("Press N to play\n"),0]),[k.styled(0,[.06],0,0,0,0,[k.text("Press ? for help"),0]),0]]),0]]]]]]]]);return y.vertical(["startScreen"],0,0,0,0,0,0,0,[1],0,0,[x.makePartNode(t,r[2],[.5],0,0,0,0,0,0),0])}function $(r){var t=k.block([1],0,0,0,0,0,0,0,[k.styledText(0,[.235],0,0,"\n\n"),[k.styledText(0,[.26],0,0,"Pause"),0]]),n=k.block([1],0,0,0,0,0,0,0,[k.styledText(0,[.058],0,0,"\nPress Space to continue\nPress ? for help"),0]);return y.vertical(["pauseScreen"],0,0,0,0,0,[1],0,0,0,0,[x.makePartNode(t,r[2],[.42],["pauseText"],0,[.6],0,0,0),[x.makePartNode(n,r[2],[.25],["pauseHelpText"],0,0,0,0,0),0]])}function W(r){var t=k.block([1],0,0,0,0,0,0,0,[k.styledText(0,[.23],0,[1.4],"Game\nover"),0]),n=k.block([1],0,0,0,0,0,0,0,[k.styledText(0,[.045],0,[2.4],"\nPress N to start a new game\nPress ? for help"),0]);return y.vertical(["gameOverScreen"],0,0,0,0,0,[1],0,0,0,0,[x.makePartNode(t,r[2],[.27],["gameOverText"],0,0,0,0,0),[x.makePartNode(n,r[2],[.15],["gameOverHelpText"],0,0,0,0,0),0]])}function X(r){var t=k.blockStyle([2],[.45],0,0,0,0,0,0),n=k.blockStyle([0],[.55],0,0,[s.fromFloats(.75,.7,.8)],0,0,0),e=u.fold_left(function(r,e){return[k.block(0,0,0,0,0,0,0,[n],[k.text("- "+e[1]),0]),[k.block(0,0,0,0,0,0,0,[t],[k.text(e[0]),0]),r]]},0,[["Space","pause"],[["H","move left"],[["L","move right"],[["J","move down"],[["K","cancel down"],[["C","rotate clockwise"],[["S","rotate counter clockwise"],[[".","drop"],[["W","move block right"],[["B","move block left"],[["0","move leftmost"],[["$","move rightmost"],0]]]]]]]]]]]]),a=k.block(0,0,["digitalt"],[.12],0,0,0,0,[k.block(0,0,0,[.042],0,0,0,0,[k.text("\n"),u.rev(e)]),0]);return y.vertical(["helpScreen"],0,0,0,0,0,[1],0,0,0,0,[y.stacked(0,0,[f.__(3,[1/.21])],0,0,0,0,0,0,0,0,[x.makePartNode(k.block([1],0,0,0,0,0,0,0,[k.styled(0,[.12],0,0,0,0,[k.text("Help\n"),[k.styled(0,[.06],[s.fromFloats(.8,.85,.9)],0,0,0,[k.text("Press N to play"),0]),0]]),0]),r[2],[.21],["startHelp"],0,0,0,0,0),[x.makePartNode(k.block([1],0,0,0,0,0,0,0,[k.styled(0,[.12],0,0,0,0,[k.text("Help\n"),[k.styled(0,[.05],[s.fromFloats(.8,.85,.9)],0,0,0,[k.text("Press Space to continue"),0]),0]]),0]),r[2],[.21],["gameHelp"],0,0,[1],0,0),0]]),[x.makePartNode(a,r[2],[.56],0,0,0,0,0,0),0]])}function Q(r){var t=f.__(3,[24/26]),n=f.__(2,[680]);return y.stacked(["root"],0,[f.__(0,[f.__(0,[1]),f.__(0,[1])])],0,0,0,0,[1],0,0,0,[D.makeNode(r[15],[y.horizontal(["gameHorizontal"],0,[t],0,0,0,[1],[0],0,0,[n],[H(r),[O(r),[K(r),0]]]),0]),[o.makeNode(0),[y.stacked(0,0,0,0,0,0,0,0,0,[n],0,[j(r),[$(r),[X(r),[W(r),0]]]]),0]]])}function Y(r,t){var n=m.make(r,t,Q(t),[0],0,0);m.queueDeps(n,n[5][2]);var e=b.anim(f.__(1,[m.getNodeUnsafe(n,"background"),"anim"]),f.__(0,[0,1]),0,[1],[1.5],0,0,0,0);return m.doAnim(n,e),n}function Z(r,t){return m.SVertexObject[2](r,t[0],[])}function J(r,t,n,e,o,f,_){var l=i.elTiles(t[0],t[4]),v=s.toArray(L.caml_array_get(i.colors,t[3])),d=t[1],g=t[2];m.UVec3f[4](r,n[3],v);var h=2/e,y=2/o,p=d*y-1,b=1+g*-h;a.Vec2[4](n[2],p,b);var x=_?a.Mat3[6](.65,.65,.325*p,.325*b):a.Mat3[5](p,b);if(m.UMat3f[2](r,n[1],x),f){var k=w.find(i.centerRadius,[t[0],t[4]]),M=p+k[0]*y,C=b+k[1]*h,S=k[2]*y,P=k[3]*h;m.UVec4f[4](r,f[0],a.Vec4[1](M,C,S,P))}var A=c.concat(u.map(function(r){var t=N.imul(r[1],-1)*h,n=r[0]*y;return[n,t-h,n+y,t-h,n+y,t,n,t]},l));return m.SVertexObject[2](r,n[0],A)}function rr(r,t,n,e){var a=2/d.tileRows,u=2/d.tileCols,o=c.fold_left(function(r,t){var n=t[0],o=r[1],f=r[0];if(n>i.beamNone){var s=f*u-1,_=-1+(f*u+u),l=1-(t[1]*a+a),m=1-n*a,v=e?[s,l,1,_,l,1,_,m,0,s,m,0]:[s,l,_,l,_,m,s,m];return[f+1|0,c.append(o,v)]}return[f+1|0,o]},[0,[]],t);return m.SVertexObject[2](r,n,o[1])}function tr(r,t,n){var e=2/d.tileRows,a=c.fold_left(function(r,t){return c.append(r,[-1,1-e*(t+1|0),1,1-e*(t+1|0),1,1-e*t,-1,1-e*t])},[],n);m.SVertexObject[2](r,t[11],a);var i=m.getNode(r,"tileBlink");return i?m.showNode(r,i[0]):0}function nr(r){var t=m.getNode(r,"tileBlink");return t?m.hideNode(r,t[0]):0}function er(r,t){if(r[18][4]){J(t,r[18][2],r[4],d.tileRows,d.tileCols,[r[5]],0),rr(t,r[18][13],r[8],0);var n=r[4][2],e=m.getNodeUnsafe(t,"grid")[29];if(e){var i=e[0];if(5===i.tag){var u=a.Mat3[2](i[0][0],a.Vec3[2](n,1));if(a.Vec3[9](u,.25),m.clearAnim(t,"elLightAnim"),r[18][5])m.UVec3f[4](t,r[13],u);else{var o,c=m.UVec3f[7](r[13]),_=r[18][17];if(_){var v=_[0];o=[v[5],v[3]]}else o=[0,0];var g=o[0]?(a.Vec3[8](c,a.Vec3[5](u)-(a.Vec3[5](u)-a.Vec3[5](c))/1.5),o[1]?b.anim(f.__(0,[r[13]]),f.__(2,[c,u]),["elLightAnim"],[2],[d.dropDownBeforeTouchDown],[2],0,0,0):b.anim(f.__(0,[r[13]]),f.__(2,[c,u]),["elLightAnim"],0,[d.dropDownBeforeTick/2],[2],0,0,0)):b.anim(f.__(0,[r[13]]),f.__(2,[c,u]),["elLightAnim"],0,[d.tickDuration/3],[3],0,0,0);m.doAnim(t,g)}}}}if(r[18][12]){var h=r[3][1][3];h&&(h[0][3]=1,m.queueUpdates(t,r[3][0]))}var y=r[18][17];if(y){var p=y[0];switch(p[0]){case 0:if(p[5]){var w=m.getNodeUnsafe(t,"dropBeams");rr(t,r[18][14],r[9],1),m.UVec3f[4](t,r[10],s.toVec3(r[18][15]));var x=b.anim(f.__(1,[w,"sinceDrop"]),f.__(0,[0,1]),0,[1],[d.dropAnimDuration],0,0,0,0);m.doAnim(t,x);var k=r[18].slice(),M=p.slice();k[17]=[(M[0]=1,M)],r[18]=k}else{tr(t,r,p[2]);var C=r[18].slice(),S=p.slice();C[17]=[(S[0]=2,S)],r[18]=C}break;case 1:var P=p[4]+t[4][2];if(p[3])if(P>=d.dropDownBeforeTouchDown){tr(t,r,p[2]);var A=r[18].slice();A[17]=[[2,p[1],p[2],p[3],P,p[5]]],r[18]=A}else{var T=r[18].slice(),D=p.slice();T[17]=[(D[4]=P,D)],r[18]=T}else if(P>=d.dropDownBeforeTick){m.UFloat[3](t,r[19],r[18][10]);var N=r[18].slice(),U=p.slice();N[17]=[(U[0]=3,U)],r[18]=N}else{var V=r[18].slice(),z=p.slice();V[17]=[(z[4]=P,z)],r[18]=V}break;case 2:var B=p[4]+t[4][2];if(B>=(0!==p[5]?d.dropDownBeforeTouchDown+d.blinkTime:d.blinkTime)){nr(t),m.UFloat[3](t,r[19],r[18][10]);var E=r[18].slice(),F=p.slice();E[17]=[(F[0]=3,F)],r[18]=E}else{var I=r[18].slice(),q=p.slice();I[17]=[(q[4]=B,q)],r[18]=I}}}else if(r[18][5]){l.fold(function(n,e){return J(t,e,L.caml_array_get(r[6],n),3,4,0,1),n+1|0},0,r[18][18]);var R=r[18][3];R?J(t,R[0],r[7],3,4,0,1):Z(t,r[7])}var G=r[18].slice();return G[4]=0,G[5]=0,G[6]=0,G[12]=0,r[18]=G,r}function ar(r,t){var n=r.slice();return n[1]=t,n}function ir(r,t){var n=m.getNodeUnsafe(r,"mask");m.clearAnim(r,"maskAnim");var e=b.anim(f.__(1,[n,"anim"]),f.__(0,[0,t]),["maskAnim"],[1],[3],0,0,0,0);return m.showNode(r,n),m.doAnim(r,e)}function ur(r,t,n){var e,a=r[18].slice();switch(r[18]=i.processAction((a[19]=n[2],a)),r[18][0]){case 1:var u=r[1];4!==u?0!==u?e=U.failwith("Starthelp should only be triggered from start screen"):(m.hideNodeByKey(t,"startScreen"),m.showNodeByKey(t,"helpScreen"),e=ar(r,4)):e=r;break;case 2:switch(r[1]){case 0:m.hideNodeByKey(t,"startScreen"),m.showNodeByKey(t,"helpScreen"),e=ar(r,3);break;case 1:m.hideNodeByKey(t,"gameHorizontal"),m.showNodeByKey(t,"helpScreen"),m.hideNodeByKey(t,"startHelp"),m.showNodeByKey(t,"gameHelp"),e=ar(r,3);break;case 2:m.hideNodeByKey(t,"gameHorizontal"),m.hideNodeByKey(t,"pauseScreen"),m.hideNodeByKey(t,"startHelp"),m.showNodeByKey(t,"gameHelp"),m.hideNodeByKey(t,"mask"),m.showNodeByKey(t,"helpScreen"),e=ar(r,3);break;case 3:e=r;break;case 4:e=U.failwith("Helpscreen from state not recognized");break;case 5:m.hideNodeByKey(t,"gameHorizontal"),m.hideNodeByKey(t,"gameOverScreen"),m.hideNodeByKey(t,"startHelp"),m.showNodeByKey(t,"gameHelp"),m.showNodeByKey(t,"helpScreen"),e=ar(r,3)}break;case 3:var o;switch(r[1]){case 0:m.hideNodeByKey(t,"startScreen"),m.showNodeByKey(t,"gameHorizontal"),o=ar(r,1);break;case 1:o=r;break;case 2:m.hideNodeByKey(t,"pauseScreen"),m.hideNodeByKey(t,"mask"),o=ar(r,1);break;case 3:m.hideNodeByKey(t,"helpScreen"),m.showNodeByKey(t,"gameHorizontal"),m.hideNodeByKey(t,"mask"),o=ar(r,1);break;case 4:m.hideNodeByKey(t,"helpScreen"),m.showNodeByKey(t,"gameHorizontal"),o=ar(r,1);break;case 5:m.hideNodeByKey(t,"gameOverScreen"),m.hideNodeByKey(t,"mask"),o=ar(r,1)}e=er(o,t);break;case 4:var c=r[1];if(c>=3)e=U.failwith("Paused from other than game screen");else switch(c){case 0:e=U.failwith("Paused from other than game screen");break;case 1:ir(t,.6),m.showNodeByKey(t,"pauseScreen"),e=ar(r,2);break;case 2:e=r}break;case 0:case 5:e=r;break;case 6:var f=r[1];1!==f?e=f>=5?r:U.failwith("Game over from other than game screen"):(ir(t,1),m.showNodeByKey(t,"gameOverScreen"),e=ar(r,5))}return m.update(t),e}function or(r,t){var n=r.slice(),e=r[18].slice();return e[1]=i.keyPressed(r[18],t),n[18]=e,n}var cr=e.Canvas[1](0),fr=cr[1],sr=cr[0];m.run(sr,fr,G,Y,ur,[or],[F],0),t.resize=F,t.makeElState=I,t.makeSceneLight=q,t.setBg=R,t.setup=G,t.createBoardNode=O,t.createLeftRow=H,t.createRightRow=K,t.createStartScreen=j,t.createPauseScreen=$,t.createGameOverScreen=W,t.createHelpScreen=X,t.createNextLevelScreen=function(r){return y.vertical(0,0,0,0,0,0,0,0,0,0,0,[x.makeSimpleNode("Level complete","digitalt",r[2],[.25],0,[1],0,["gameOver"],0,0,0,0),[x.makeSimpleNode("Press N to start new level","digitalt",r[2],[.08],0,[1],0,0,0,0,0,0),0]])},t.createRootNode=Q,t.createScene=Y,t.resetElState=Z,t.updateElTiles=J,t.updateBeams=rr,t.blinkInit=tr,t.blinkEnd=nr,t.drawGame=er,t.setScreenState=ar,t.showMask=ir,t.hideMask=function(r){return m.hideNodeByKey(r,"mask")},t.draw=ur,t.keyPressed=or,t.viewportX=sr,t.viewportY=fr}]);